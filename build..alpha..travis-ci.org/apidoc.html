<div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a

        href="http://www.easyrtc.com/"

    >easyrtc (v1.1.0)</a>
</h1>
<h4>EasyRTC enables quick development of webRTC</h4>
<div class="apidocSectionDiv"><a
    href="#apidoc.tableOfContents"
    id="apidoc.tableOfContents"
><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.easyrtc">module easyrtc</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.buildLocalSdpFilter">
            function <span class="apidocSignatureSpan">easyrtc.</span>buildLocalSdpFilter
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.buildRemoteSdpFilter">
            function <span class="apidocSignatureSpan">easyrtc.</span>buildRemoteSdpFilter
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.dontAddCloseButtons">
            function <span class="apidocSignatureSpan">easyrtc.</span>dontAddCloseButtons
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyApp">
            function <span class="apidocSignatureSpan">easyrtc.</span>easyApp
            <span class="apidocSignatureSpan">(applicationName, monitorVideoId, videoIds, onReady, onFailure)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.getDefaultOptions">
            function <span class="apidocSignatureSpan">easyrtc.</span>getDefaultOptions
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.getUserMediaConstraints">
            function <span class="apidocSignatureSpan">easyrtc.</span>getUserMediaConstraints
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.isRecordingTypeSupported">
            function <span class="apidocSignatureSpan">easyrtc.</span>isRecordingTypeSupported
            <span class="apidocSignatureSpan">(videoCodecName)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.listen">
            function <span class="apidocSignatureSpan">easyrtc.</span>listen
            <span class="apidocSignatureSpan">(httpApp, socketServer, options, listenCallback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.on">
            function <span class="apidocSignatureSpan">easyrtc.</span>on
            <span class="apidocSignatureSpan">(event, listener)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.recordToBlob">
            function <span class="apidocSignatureSpan">easyrtc.</span>recordToBlob
            <span class="apidocSignatureSpan">(mediaStream, blobCallback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.recordToCallback">
            function <span class="apidocSignatureSpan">easyrtc.</span>recordToCallback
            <span class="apidocSignatureSpan">(mediaStream, dataCallback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.recordToFile">
            function <span class="apidocSignatureSpan">easyrtc.</span>recordToFile
            <span class="apidocSignatureSpan">(mediaStream, downloadLink, basename)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.removeAllListeners">
            function <span class="apidocSignatureSpan">easyrtc.</span>removeAllListeners
            <span class="apidocSignatureSpan">(event)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.setOption">
            function <span class="apidocSignatureSpan">easyrtc.</span>setOption
            <span class="apidocSignatureSpan">(optionName, optionValue)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.setRecordingVideoCodec">
            function <span class="apidocSignatureSpan">easyrtc.</span>setRecordingVideoCodec
            <span class="apidocSignatureSpan">(videoCodecName)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.supportsRecording">
            function <span class="apidocSignatureSpan">easyrtc.</span>supportsRecording
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.util.ApplicationError">
            function <span class="apidocSignatureSpan">easyrtc.</span>util.ApplicationError
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.util.ApplicationWarning">
            function <span class="apidocSignatureSpan">easyrtc.</span>util.ApplicationWarning
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.util.ConnectionError">
            function <span class="apidocSignatureSpan">easyrtc.</span>util.ConnectionError
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.util.ConnectionWarning">
            function <span class="apidocSignatureSpan">easyrtc.</span>util.ConnectionWarning
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.util.ServerError">
            function <span class="apidocSignatureSpan">easyrtc.</span>util.ServerError
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.util.ServerWarning">
            function <span class="apidocSignatureSpan">easyrtc.</span>util.ServerWarning
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">easyrtc.</span>easyrtc_app</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">easyrtc.</span>easyrtc_default_event_listeners</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">easyrtc.</span>easyrtc_public_obj</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">easyrtc.</span>easyrtc_sc</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">easyrtc.</span>easyrtc_util</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">easyrtc.</span>events</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">easyrtc.</span>events.defaultListeners</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">easyrtc.</span>general_util</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">easyrtc.</span>util</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.easyrtc.easyrtc_app">module easyrtc.easyrtc_app</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_app.buildLocalSdpFilter">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_app.</span>buildLocalSdpFilter
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_app.buildRemoteSdpFilter">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_app.</span>buildRemoteSdpFilter
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_app.dontAddCloseButtons">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_app.</span>dontAddCloseButtons
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_app.easyApp">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_app.</span>easyApp
            <span class="apidocSignatureSpan">(applicationName, monitorVideoId, videoIds, onReady, onFailure)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_app.getDefaultOptions">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_app.</span>getDefaultOptions
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_app.getUserMediaConstraints">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_app.</span>getUserMediaConstraints
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_app.isRecordingTypeSupported">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_app.</span>isRecordingTypeSupported
            <span class="apidocSignatureSpan">(videoCodecName)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_app.listen">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_app.</span>listen
            <span class="apidocSignatureSpan">(httpApp, socketServer, options, listenCallback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_app.on">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_app.</span>on
            <span class="apidocSignatureSpan">(event, listener)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_app.recordToBlob">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_app.</span>recordToBlob
            <span class="apidocSignatureSpan">(mediaStream, blobCallback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_app.recordToCallback">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_app.</span>recordToCallback
            <span class="apidocSignatureSpan">(mediaStream, dataCallback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_app.recordToFile">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_app.</span>recordToFile
            <span class="apidocSignatureSpan">(mediaStream, downloadLink, basename)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_app.removeAllListeners">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_app.</span>removeAllListeners
            <span class="apidocSignatureSpan">(event)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_app.setOption">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_app.</span>setOption
            <span class="apidocSignatureSpan">(optionName, optionValue)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_app.setRecordingVideoCodec">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_app.</span>setRecordingVideoCodec
            <span class="apidocSignatureSpan">(videoCodecName)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_app.supportsRecording">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_app.</span>supportsRecording
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">easyrtc.easyrtc_app.</span>events</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">easyrtc.easyrtc_app.</span>util</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.easyrtc.easyrtc_default_event_listeners">module easyrtc.easyrtc_default_event_listeners</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_default_event_listeners.onAuthenticate">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_default_event_listeners.</span>onAuthenticate
            <span class="apidocSignatureSpan">(socket, easyrtcid, appName, username, credential, easyrtcAuthMessage, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_default_event_listeners.onAuthenticated">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_default_event_listeners.</span>onAuthenticated
            <span class="apidocSignatureSpan">(connectionObj, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_default_event_listeners.onConnection">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_default_event_listeners.</span>onConnection
            <span class="apidocSignatureSpan">(socket, easyrtcid, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_default_event_listeners.onDisconnect">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_default_event_listeners.</span>onDisconnect
            <span class="apidocSignatureSpan">(connectionObj, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_default_event_listeners.onEasyrtcAuth">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_default_event_listeners.</span>onEasyrtcAuth
            <span class="apidocSignatureSpan">(socket, easyrtcid, msg, socketCallback, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_default_event_listeners.onEasyrtcCmd">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_default_event_listeners.</span>onEasyrtcCmd
            <span class="apidocSignatureSpan">(connectionObj, msg, socketCallback, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_default_event_listeners.onEasyrtcMsg">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_default_event_listeners.</span>onEasyrtcMsg
            <span class="apidocSignatureSpan">(connectionObj, msg, socketCallback, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_default_event_listeners.onEmitEasyrtcCmd">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_default_event_listeners.</span>onEmitEasyrtcCmd
            <span class="apidocSignatureSpan">(connectionObj, msgType, msg, socketCallback, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_default_event_listeners.onEmitEasyrtcMsg">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_default_event_listeners.</span>onEmitEasyrtcMsg
            <span class="apidocSignatureSpan">(connectionObj, msgType, msg, socketCallback, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_default_event_listeners.onEmitError">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_default_event_listeners.</span>onEmitError
            <span class="apidocSignatureSpan">(connectionObj, errorCode, socketCallback, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_default_event_listeners.onEmitReturnAck">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_default_event_listeners.</span>onEmitReturnAck
            <span class="apidocSignatureSpan">(connectionObj, socketCallback, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_default_event_listeners.onEmitReturnError">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_default_event_listeners.</span>onEmitReturnError
            <span class="apidocSignatureSpan">(connectionObj, socketCallback, errorCode, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_default_event_listeners.onEmitReturnToken">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_default_event_listeners.</span>onEmitReturnToken
            <span class="apidocSignatureSpan">(connectionObj, socketCallback, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_default_event_listeners.onGetIceConfig">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_default_event_listeners.</span>onGetIceConfig
            <span class="apidocSignatureSpan">(connectionObj, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_default_event_listeners.onLog">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_default_event_listeners.</span>onLog
            <span class="apidocSignatureSpan">(level, logText, logFields, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_default_event_listeners.onMsgTypeGetIceConfig">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_default_event_listeners.</span>onMsgTypeGetIceConfig
            <span class="apidocSignatureSpan">(connectionObj, socketCallback, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_default_event_listeners.onMsgTypeGetRoomList">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_default_event_listeners.</span>onMsgTypeGetRoomList
            <span class="apidocSignatureSpan">(connectionObj, socketCallback, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_default_event_listeners.onMsgTypeRoomJoin">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_default_event_listeners.</span>onMsgTypeRoomJoin
            <span class="apidocSignatureSpan">(connectionObj, rooms, socketCallback, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_default_event_listeners.onMsgTypeRoomLeave">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_default_event_listeners.</span>onMsgTypeRoomLeave
            <span class="apidocSignatureSpan">(connectionObj, rooms, socketCallback, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_default_event_listeners.onMsgTypeSetPresence">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_default_event_listeners.</span>onMsgTypeSetPresence
            <span class="apidocSignatureSpan">(connectionObj, presenceObj, socketCallback, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_default_event_listeners.onMsgTypeSetRoomApiField">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_default_event_listeners.</span>onMsgTypeSetRoomApiField
            <span class="apidocSignatureSpan">(connectionObj, roomApiFieldObj, socketCallback, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_default_event_listeners.onRoomCreate">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_default_event_listeners.</span>onRoomCreate
            <span class="apidocSignatureSpan">(appObj, creatorConnectionObj, roomName, roomOptions, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_default_event_listeners.onRoomJoin">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_default_event_listeners.</span>onRoomJoin
            <span class="apidocSignatureSpan">(connectionObj, roomName, roomParameter, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_default_event_listeners.onRoomLeave">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_default_event_listeners.</span>onRoomLeave
            <span class="apidocSignatureSpan">(connectionObj, roomName, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_default_event_listeners.onShutdown">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_default_event_listeners.</span>onShutdown
            <span class="apidocSignatureSpan">(next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_default_event_listeners.onStartup">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_default_event_listeners.</span>onStartup
            <span class="apidocSignatureSpan">(next)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.easyrtc.easyrtc_public_obj">module easyrtc.easyrtc_public_obj</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_public_obj._getPrivateObj">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_public_obj.</span>_getPrivateObj
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_public_obj.app">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_public_obj.</span>app
            <span class="apidocSignatureSpan">(appName, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_public_obj.createApp">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_public_obj.</span>createApp
            <span class="apidocSignatureSpan">(appName, options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_public_obj.getAppNames">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_public_obj.</span>getAppNames
            <span class="apidocSignatureSpan">(callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_public_obj.getAppWithEasyrtcid">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_public_obj.</span>getAppWithEasyrtcid
            <span class="apidocSignatureSpan">(easyrtcid, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_public_obj.getConnectionCount">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_public_obj.</span>getConnectionCount
            <span class="apidocSignatureSpan">(callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_public_obj.getConnectionCountSync">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_public_obj.</span>getConnectionCountSync
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_public_obj.getConnectionWithEasyrtcid">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_public_obj.</span>getConnectionWithEasyrtcid
            <span class="apidocSignatureSpan">(easyrtcid, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_public_obj.getOption">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_public_obj.</span>getOption
            <span class="apidocSignatureSpan">(optionName)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_public_obj.getVersion">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_public_obj.</span>getVersion
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_public_obj.isApp">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_public_obj.</span>isApp
            <span class="apidocSignatureSpan">(appName, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_public_obj.setOption">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_public_obj.</span>setOption
            <span class="apidocSignatureSpan">(optionName, optionValue)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">easyrtc.easyrtc_public_obj.</span>events</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">easyrtc.easyrtc_public_obj.</span>httpApp</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">easyrtc.easyrtc_public_obj.</span>socketServer</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">easyrtc.easyrtc_public_obj.</span>util</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.easyrtc.easyrtc_sc">module easyrtc.easyrtc_sc</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_sc.chromeExtentionListener">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_sc.</span>chromeExtentionListener
            <span class="apidocSignatureSpan">(event)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_sc.getUserScreen">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_sc.</span>getUserScreen
            <span class="apidocSignatureSpan">(onSuccess, onFailure)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_sc.installChromeExtension">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_sc.</span>installChromeExtension
            <span class="apidocSignatureSpan">(appid, onSucess, onFailure)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_sc.isChrome">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_sc.</span>isChrome
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_sc.isChromeExtensionAvailable">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_sc.</span>isChromeExtensionAvailable
            <span class="apidocSignatureSpan">(callback)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">easyrtc.easyrtc_sc.</span>chromeMedia</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">easyrtc.easyrtc_sc.</span>chromeMediaExtention</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">easyrtc.easyrtc_sc.</span>chromeMediaSourceId</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">easyrtc.easyrtc_sc.</span>chromeMediaSource</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.easyrtc.easyrtc_util">module easyrtc.easyrtc_util</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_util.ApplicationError">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_util.</span>ApplicationError
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_util.ApplicationWarning">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_util.</span>ApplicationWarning
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_util.ConnectionError">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_util.</span>ConnectionError
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_util.ConnectionWarning">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_util.</span>ConnectionWarning
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_util.ServerError">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_util.</span>ServerError
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_util.ServerWarning">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_util.</span>ServerWarning
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_util.getAvailableEasyrtcid">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_util.</span>getAvailableEasyrtcid
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_util.isError">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_util.</span>isError
            <span class="apidocSignatureSpan">(err)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_util.isWarning">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_util.</span>isWarning
            <span class="apidocSignatureSpan">(err)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.easyrtc_util.socketDisconnect">
            function <span class="apidocSignatureSpan">easyrtc.easyrtc_util.</span>socketDisconnect
            <span class="apidocSignatureSpan">(socket)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.easyrtc.events">module easyrtc.events</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.events.emit">
            function <span class="apidocSignatureSpan">easyrtc.events.</span>emit
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.events.emitDefault">
            function <span class="apidocSignatureSpan">easyrtc.events.</span>emitDefault
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.events.on">
            function <span class="apidocSignatureSpan">easyrtc.events.</span>on
            <span class="apidocSignatureSpan">(eventName, listener)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.events.removeAllListeners">
            function <span class="apidocSignatureSpan">easyrtc.events.</span>removeAllListeners
            <span class="apidocSignatureSpan">(eventName)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.events.setDefaultListener">
            function <span class="apidocSignatureSpan">easyrtc.events.</span>setDefaultListener
            <span class="apidocSignatureSpan">(eventName)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.events.setDefaultListeners">
            function <span class="apidocSignatureSpan">easyrtc.events.</span>setDefaultListeners
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">easyrtc.events.</span>_eventListener</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">easyrtc.events.</span>defaultListeners</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.easyrtc.events.defaultListeners">module easyrtc.events.defaultListeners</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.events.defaultListeners.authenticate">
            function <span class="apidocSignatureSpan">easyrtc.events.defaultListeners.</span>authenticate
            <span class="apidocSignatureSpan">(socket, easyrtcid, appName, username, credential, easyrtcAuthMessage, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.events.defaultListeners.authenticated">
            function <span class="apidocSignatureSpan">easyrtc.events.defaultListeners.</span>authenticated
            <span class="apidocSignatureSpan">(connectionObj, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.events.defaultListeners.connection">
            function <span class="apidocSignatureSpan">easyrtc.events.defaultListeners.</span>connection
            <span class="apidocSignatureSpan">(socket, easyrtcid, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.events.defaultListeners.disconnect">
            function <span class="apidocSignatureSpan">easyrtc.events.defaultListeners.</span>disconnect
            <span class="apidocSignatureSpan">(connectionObj, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.events.defaultListeners.easyrtcAuth">
            function <span class="apidocSignatureSpan">easyrtc.events.defaultListeners.</span>easyrtcAuth
            <span class="apidocSignatureSpan">(socket, easyrtcid, msg, socketCallback, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.events.defaultListeners.easyrtcCmd">
            function <span class="apidocSignatureSpan">easyrtc.events.defaultListeners.</span>easyrtcCmd
            <span class="apidocSignatureSpan">(connectionObj, msg, socketCallback, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.events.defaultListeners.easyrtcMsg">
            function <span class="apidocSignatureSpan">easyrtc.events.defaultListeners.</span>easyrtcMsg
            <span class="apidocSignatureSpan">(connectionObj, msg, socketCallback, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.events.defaultListeners.emitEasyrtcCmd">
            function <span class="apidocSignatureSpan">easyrtc.events.defaultListeners.</span>emitEasyrtcCmd
            <span class="apidocSignatureSpan">(connectionObj, msgType, msg, socketCallback, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.events.defaultListeners.emitEasyrtcMsg">
            function <span class="apidocSignatureSpan">easyrtc.events.defaultListeners.</span>emitEasyrtcMsg
            <span class="apidocSignatureSpan">(connectionObj, msgType, msg, socketCallback, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.events.defaultListeners.emitError">
            function <span class="apidocSignatureSpan">easyrtc.events.defaultListeners.</span>emitError
            <span class="apidocSignatureSpan">(connectionObj, errorCode, socketCallback, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.events.defaultListeners.emitReturnAck">
            function <span class="apidocSignatureSpan">easyrtc.events.defaultListeners.</span>emitReturnAck
            <span class="apidocSignatureSpan">(connectionObj, socketCallback, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.events.defaultListeners.emitReturnError">
            function <span class="apidocSignatureSpan">easyrtc.events.defaultListeners.</span>emitReturnError
            <span class="apidocSignatureSpan">(connectionObj, socketCallback, errorCode, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.events.defaultListeners.emitReturnToken">
            function <span class="apidocSignatureSpan">easyrtc.events.defaultListeners.</span>emitReturnToken
            <span class="apidocSignatureSpan">(connectionObj, socketCallback, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.events.defaultListeners.getIceConfig">
            function <span class="apidocSignatureSpan">easyrtc.events.defaultListeners.</span>getIceConfig
            <span class="apidocSignatureSpan">(connectionObj, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.events.defaultListeners.log">
            function <span class="apidocSignatureSpan">easyrtc.events.defaultListeners.</span>log
            <span class="apidocSignatureSpan">(level, logText, logFields, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.events.defaultListeners.msgTypeGetIceConfig">
            function <span class="apidocSignatureSpan">easyrtc.events.defaultListeners.</span>msgTypeGetIceConfig
            <span class="apidocSignatureSpan">(connectionObj, socketCallback, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.events.defaultListeners.msgTypeGetRoomList">
            function <span class="apidocSignatureSpan">easyrtc.events.defaultListeners.</span>msgTypeGetRoomList
            <span class="apidocSignatureSpan">(connectionObj, socketCallback, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.events.defaultListeners.msgTypeRoomJoin">
            function <span class="apidocSignatureSpan">easyrtc.events.defaultListeners.</span>msgTypeRoomJoin
            <span class="apidocSignatureSpan">(connectionObj, rooms, socketCallback, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.events.defaultListeners.msgTypeRoomLeave">
            function <span class="apidocSignatureSpan">easyrtc.events.defaultListeners.</span>msgTypeRoomLeave
            <span class="apidocSignatureSpan">(connectionObj, rooms, socketCallback, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.events.defaultListeners.msgTypeSetPresence">
            function <span class="apidocSignatureSpan">easyrtc.events.defaultListeners.</span>msgTypeSetPresence
            <span class="apidocSignatureSpan">(connectionObj, presenceObj, socketCallback, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.events.defaultListeners.msgTypeSetRoomApiField">
            function <span class="apidocSignatureSpan">easyrtc.events.defaultListeners.</span>msgTypeSetRoomApiField
            <span class="apidocSignatureSpan">(connectionObj, roomApiFieldObj, socketCallback, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.events.defaultListeners.roomCreate">
            function <span class="apidocSignatureSpan">easyrtc.events.defaultListeners.</span>roomCreate
            <span class="apidocSignatureSpan">(appObj, creatorConnectionObj, roomName, roomOptions, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.events.defaultListeners.roomJoin">
            function <span class="apidocSignatureSpan">easyrtc.events.defaultListeners.</span>roomJoin
            <span class="apidocSignatureSpan">(connectionObj, roomName, roomParameter, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.events.defaultListeners.roomLeave">
            function <span class="apidocSignatureSpan">easyrtc.events.defaultListeners.</span>roomLeave
            <span class="apidocSignatureSpan">(connectionObj, roomName, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.events.defaultListeners.shutdown">
            function <span class="apidocSignatureSpan">easyrtc.events.defaultListeners.</span>shutdown
            <span class="apidocSignatureSpan">(next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.events.defaultListeners.startup">
            function <span class="apidocSignatureSpan">easyrtc.events.defaultListeners.</span>startup
            <span class="apidocSignatureSpan">(next)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.easyrtc.general_util">module easyrtc.general_util</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.general_util.AbstractError">
            function <span class="apidocSignatureSpan">easyrtc.general_util.</span>AbstractError
            <span class="apidocSignatureSpan">(msg, constr)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.general_util.checkModules">
            function <span class="apidocSignatureSpan">easyrtc.general_util.</span>checkModules
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.general_util.deepCopy">
            function <span class="apidocSignatureSpan">easyrtc.general_util.</span>deepCopy
            <span class="apidocSignatureSpan">(input)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.general_util.getPackageData">
            function <span class="apidocSignatureSpan">easyrtc.general_util.</span>getPackageData
            <span class="apidocSignatureSpan">(fieldName)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.general_util.randomString">
            function <span class="apidocSignatureSpan">easyrtc.general_util.</span>randomString
            <span class="apidocSignatureSpan">(stringLength, chars)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.easyrtc.util">module easyrtc.util</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.util.ApplicationError">
            function <span class="apidocSignatureSpan">easyrtc.util.</span>ApplicationError
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.util.ApplicationWarning">
            function <span class="apidocSignatureSpan">easyrtc.util.</span>ApplicationWarning
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.util.ConnectionError">
            function <span class="apidocSignatureSpan">easyrtc.util.</span>ConnectionError
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.util.ConnectionWarning">
            function <span class="apidocSignatureSpan">easyrtc.util.</span>ConnectionWarning
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.util.ServerError">
            function <span class="apidocSignatureSpan">easyrtc.util.</span>ServerError
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.util.ServerWarning">
            function <span class="apidocSignatureSpan">easyrtc.util.</span>ServerWarning
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.util.deepCopy">
            function <span class="apidocSignatureSpan">easyrtc.util.</span>deepCopy
            <span class="apidocSignatureSpan">(input)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.util.getAvailableEasyrtcid">
            function <span class="apidocSignatureSpan">easyrtc.util.</span>getAvailableEasyrtcid
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.util.getErrorMsg">
            function <span class="apidocSignatureSpan">easyrtc.util.</span>getErrorMsg
            <span class="apidocSignatureSpan">(errorCode)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.util.getErrorText">
            function <span class="apidocSignatureSpan">easyrtc.util.</span>getErrorText
            <span class="apidocSignatureSpan">(errorCode)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.util.isError">
            function <span class="apidocSignatureSpan">easyrtc.util.</span>isError
            <span class="apidocSignatureSpan">(err)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.util.isValidIncomingMessage">
            function <span class="apidocSignatureSpan">easyrtc.util.</span>isValidIncomingMessage
            <span class="apidocSignatureSpan">(type, msg, appObj, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.util.isWarning">
            function <span class="apidocSignatureSpan">easyrtc.util.</span>isWarning
            <span class="apidocSignatureSpan">(err)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.util.log">
            function <span class="apidocSignatureSpan">easyrtc.util.</span>log
            <span class="apidocSignatureSpan">(level, logText, logFields)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.util.logDebug">
            function <span class="apidocSignatureSpan">easyrtc.util.</span>logDebug
            <span class="apidocSignatureSpan">(logText, logFields)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.util.logError">
            function <span class="apidocSignatureSpan">easyrtc.util.</span>logError
            <span class="apidocSignatureSpan">(logText, logFields)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.util.logInfo">
            function <span class="apidocSignatureSpan">easyrtc.util.</span>logInfo
            <span class="apidocSignatureSpan">(logText, logFields)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.util.logWarning">
            function <span class="apidocSignatureSpan">easyrtc.util.</span>logWarning
            <span class="apidocSignatureSpan">(logText, logFields)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.util.nextToNowhere">
            function <span class="apidocSignatureSpan">easyrtc.util.</span>nextToNowhere
            <span class="apidocSignatureSpan">(err)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.util.sendSessionCookie">
            function <span class="apidocSignatureSpan">easyrtc.util.</span>sendSessionCookie
            <span class="apidocSignatureSpan">(req, res)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.util.sendSocketCallbackAck">
            function <span class="apidocSignatureSpan">easyrtc.util.</span>sendSocketCallbackAck
            <span class="apidocSignatureSpan">(easyrtcid, socketCallback, appObj)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.util.sendSocketCallbackMsg">
            function <span class="apidocSignatureSpan">easyrtc.util.</span>sendSocketCallbackMsg
            <span class="apidocSignatureSpan">(easyrtcid, socketCallback, msg, appObj)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.util.updateCheck">
            function <span class="apidocSignatureSpan">easyrtc.util.</span>updateCheck
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.easyrtc.util.ApplicationError">module easyrtc.util.ApplicationError</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.util.ApplicationError.ApplicationError">
            function <span class="apidocSignatureSpan">easyrtc.util.</span>ApplicationError
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.util.ApplicationError.super_">
            function <span class="apidocSignatureSpan">easyrtc.util.ApplicationError.</span>super_
            <span class="apidocSignatureSpan">(msg, constr)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.easyrtc.util.ApplicationWarning">module easyrtc.util.ApplicationWarning</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.util.ApplicationWarning.ApplicationWarning">
            function <span class="apidocSignatureSpan">easyrtc.util.</span>ApplicationWarning
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.util.ApplicationWarning.super_">
            function <span class="apidocSignatureSpan">easyrtc.util.ApplicationWarning.</span>super_
            <span class="apidocSignatureSpan">(msg, constr)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.easyrtc.util.ConnectionError">module easyrtc.util.ConnectionError</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.util.ConnectionError.ConnectionError">
            function <span class="apidocSignatureSpan">easyrtc.util.</span>ConnectionError
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.util.ConnectionError.super_">
            function <span class="apidocSignatureSpan">easyrtc.util.ConnectionError.</span>super_
            <span class="apidocSignatureSpan">(msg, constr)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.easyrtc.util.ConnectionWarning">module easyrtc.util.ConnectionWarning</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.util.ConnectionWarning.ConnectionWarning">
            function <span class="apidocSignatureSpan">easyrtc.util.</span>ConnectionWarning
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.util.ConnectionWarning.super_">
            function <span class="apidocSignatureSpan">easyrtc.util.ConnectionWarning.</span>super_
            <span class="apidocSignatureSpan">(msg, constr)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.easyrtc.util.ServerError">module easyrtc.util.ServerError</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.util.ServerError.ServerError">
            function <span class="apidocSignatureSpan">easyrtc.util.</span>ServerError
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.util.ServerError.super_">
            function <span class="apidocSignatureSpan">easyrtc.util.ServerError.</span>super_
            <span class="apidocSignatureSpan">(msg, constr)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.easyrtc.util.ServerWarning">module easyrtc.util.ServerWarning</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.util.ServerWarning.ServerWarning">
            function <span class="apidocSignatureSpan">easyrtc.util.</span>ServerWarning
            <span class="apidocSignatureSpan">(msg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.easyrtc.util.ServerWarning.super_">
            function <span class="apidocSignatureSpan">easyrtc.util.ServerWarning.</span>super_
            <span class="apidocSignatureSpan">(msg, constr)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.easyrtc" id="apidoc.module.easyrtc">module easyrtc</a></h1>


    <h2>
        <a href="#apidoc.element.easyrtc.buildLocalSdpFilter" id="apidoc.element.easyrtc.buildLocalSdpFilter">
        function <span class="apidocSignatureSpan">easyrtc.</span>buildLocalSdpFilter
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">buildLocalSdpFilter = function (options) {
    return buildSdpFilter(options, true);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...


var selfEasyrtcid = &#x22;&#x22;;


function connect() {

var localFilter = easyrtc.<span class="apidocCodeKeywordSpan">buildLocalSdpFilter</span>( {
    audioRecvBitrate:20, videoRecvBitrate:30
});
var remoteFilter = easyrtc.buildRemoteSdpFilter({
    audioSendBitrate: 20, videoSendBitrate:30
});
easyrtc.setSdpFilters(localFilter, remoteFilter);
easyrtc.setRoomOccupantListener(convertListToButtons);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.buildRemoteSdpFilter" id="apidoc.element.easyrtc.buildRemoteSdpFilter">
        function <span class="apidocSignatureSpan">easyrtc.</span>buildRemoteSdpFilter
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">buildRemoteSdpFilter = function (options) {
    return buildSdpFilter(options, false);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...


function connect() {

   var localFilter = easyrtc.buildLocalSdpFilter( {
       audioRecvBitrate:20, videoRecvBitrate:30
   });
   var remoteFilter = easyrtc.<span class="apidocCodeKeywordSpan">buildRemoteSdpFilter</span>({
       audioSendBitrate: 20, videoSendBitrate:30
   });
   easyrtc.setSdpFilters(localFilter, remoteFilter);
   easyrtc.setRoomOccupantListener(convertListToButtons);
   easyrtc.easyApp(&#x22;easyrtc.lowbandwidth&#x22;, &#x22;selfVideo&#x22;, [&#x22;callerVideo&#x22;], loginSuccess, loginFailure
);
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.dontAddCloseButtons" id="apidoc.element.easyrtc.dontAddCloseButtons">
        function <span class="apidocSignatureSpan">easyrtc.</span>dontAddCloseButtons
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">dontAddCloseButtons = function () {
    autoAddCloseButtons = false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var autoAddCloseButtons = true;

/** By default, the easyApp routine sticks a &#x22;close&#x22; button on top of each caller
 * video object that it manages. Call this function(before calling easyApp) to disable that particular feature.
 * @function
 * @memberOf Easyrtc_App
 * @example
 *    easyrtc.<span class="apidocCodeKeywordSpan">dontAddCloseButtons</span>();
 */
easyrtc.dontAddCloseButtons = function() {
    autoAddCloseButtons = false;
};

/**
 * This is a helper function for the easyApp method. It manages the assignment of video streams
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyApp" id="apidoc.element.easyrtc.easyApp">
        function <span class="apidocSignatureSpan">easyrtc.</span>easyApp
        <span class="apidocSignatureSpan">(applicationName, monitorVideoId, videoIds, onReady, onFailure)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">easyApp = function (applicationName, monitorVideoId, videoIds, onReady, onFailure) {

    var gotMediaCallback = null,
        gotConnectionCallback = null;

    easyAppBody(monitorVideoId, videoIds);

    easyrtc.setGotMedia = function(gotMediaCB) {
        gotMediaCallback = gotMediaCB;
    };

    //
    // try to restablish broken connections that weren&#x27;t caused by a hangup
    //
    easyrtc.setPeerClosedListener( function(easyrtcid) {
       setTimeout( function() {
           if( easyrtc.getSlotOfCaller(easyrtcid)  &#x3e;= 0 &#x26;&#x26; easyrtc.isPeerInAnyRoom(easyrtcid)) {
                easyrtc.call(easyrtcid, function(){}, function() {}, function(){});
           }
       }, 1000);
    });

<span class="apidocCodeCommentSpan">    /** Sets an event handler that gets called when a connection to the signaling
     * server has or has not been made. Can only be called after calling easyrtc.easyApp.
     * @function
     * @memberOf Easyrtc_App
     * @param {Function} gotConnectionCB has the signature (gotConnection, errorText)
     * @example
     *    easyrtc.setGotConnection( function(gotConnection, errorText){
     *        if( gotConnection ){
     *            console.log(&#x22;Successfully connected to signaling server&#x22;);
     *        }
     *        else{
     *            console.log(&#x22;Failed to connect to signaling server because: &#x22; + errorText);
     *        }
     *    });
     */
</span>    easyrtc.setGotConnection = function(gotConnectionCB) {
        gotConnectionCallback = gotConnectionCB;
    };

    function nextInitializationStep(/* token */) {
        if (gotConnectionCallback) {
            gotConnectionCallback(true, &#x22;&#x22;);
        }
        onReady(easyrtc.myEasyrtcid);
    }

    function postGetUserMedia() {
        if (gotMediaCallback) {
            gotMediaCallback(true, null);
        }
        if (monitorVideoId !== null) {
            easyrtc.setVideoObjectSrc(document.getElementById(monitorVideoId), easyrtc.getLocalStream());
        }
        function connectError(errorCode, errorText) {
            if (gotConnectionCallback) {
                gotConnectionCallback(false, errorText);
            }
            else if (onFailure) {
                onFailure(easyrtc.errCodes.CONNECT_ERR, errorText);
            }
            else {
                easyrtc.showError(easyrtc.errCodes.CONNECT_ERR, errorText);
            }
        }

        easyrtc.connect(applicationName, nextInitializationStep, connectError);
    }

    var stream = easyrtc.getLocalStream(null);
    if (stream) {
        postGetUserMedia();
    }
    else {
        easyrtc.initMediaSource(
                postGetUserMedia,
                function(errorCode, errorText) {
                    if (gotMediaCallback) {
                        gotMediaCallback(false, errorText);
                    }
                    else if (onFailure) {
                        onFailure(easyrtc.errCodes.MEDIA_ERR, errorText);
                    }
                    else {
                        easyrtc.showError(easyrtc.errCodes.MEDIA_ERR, errorText);
                    }
                },
                null // default stream
            );
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* @memberOf Easyrtc_App
*  @param {String} applicationName - name of the application.
*  @param {String} monitorVideoId - the id of the video object used for monitoring the local stream.
*  @param {Array} videoIds - an array of video object ids (strings)
*  @param {Function} onReady - a callback function used on success. It is called with the easyrtcId this peer is known to the server
 as.
*  @param {Function} onFailure - a callback function used on failure (failed to get local media or a connection of the signaling
 server).
*  @example
*     easyrtc.<span class="apidocCodeKeywordSpan">easyApp</span>(&#x27;multiChat&#x27;, &#x27;selfVideo&#x27;, [&#x27;remote1&#x27
;, &#x27;remote2&#x27;, &#x27;remote3&#x27;],
*              function(easyrtcId){
*                  console.log(&#x22;successfully connected, I am &#x22; + easyrtcId);
*              },
*              function(errorCode, errorText){
*                  console.log(errorText);
*              });
*/
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.getDefaultOptions" id="apidoc.element.easyrtc.getDefaultOptions">
        function <span class="apidocSignatureSpan">easyrtc.</span>getDefaultOptions
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getDefaultOptions = function () {
    var defaultOptions = require(&#x22;./easyrtc_default_options&#x22;);
    return g.deepCopy(defaultOptions);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.getUserMediaConstraints" id="apidoc.element.easyrtc.getUserMediaConstraints">
        function <span class="apidocSignatureSpan">easyrtc.</span>getUserMediaConstraints
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getUserMediaConstraints = function () {

    var constraints = getUserMediaConstraints();

    // Apply screen constraints
    if (
        constraints.video &#x26;&#x26;
            constraints.video.mandatory &#x26;&#x26;
                constraints.video.mandatory.chromeMediaSource === &#x27;screen&#x27; &#x26;&#x26;
                    easyrtc_sc.chromeMediaSource === &#x27;desktop&#x27;
    ) {
        constraints.video.mandatory.chromeMediaSource = easyrtc_sc.chromeMediaSource;
        constraints.video.mandatory.chromeMediaSourceId = easyrtc_sc.chromeMediaSourceId;
    }

    return constraints;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

if (!successCallback) {
    self.showError(self.errCodes.DEVELOPER_ERR,
            &#x22;easyrtc.initMediaSource not supplied a successCallback&#x22;);
    return;
}

var mode = self.<span class="apidocCodeKeywordSpan">getUserMediaConstraints</span>();
/** @private
 * @param {Object} stream - A mediaStream object.
 *  */
var onUserMediaSuccess = function(stream) {
    logDebug(&#x22;getUserMedia success callback entered&#x22;);
    logDebug(&#x22;successfully got local media&#x22;);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.isRecordingTypeSupported" id="apidoc.element.easyrtc.isRecordingTypeSupported">
        function <span class="apidocSignatureSpan">easyrtc.</span>isRecordingTypeSupported
        <span class="apidocSignatureSpan">(videoCodecName)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isRecordingTypeSupported = function (videoCodecName) {
    var mimeType = &#x22;video/webm;codecs=&#x22; + videoCodecName;
    if( MediaRecorder.isTypeSupported ) {
        // chrome definitely, maybe firefox
        return MediaRecorder.isTypeSupported(mimeType);
    }
    else if( MediaRecorder.isMimeTypeSupported ) {
        // maybe firefox
        return MediaRecorder.isMimeTypeSupported(mimeType);
    }
    else {
       if( typeof easyrtc.hasNoRecordTypeCheck === &#x22;undefined&#x22;) {
          easyrtc.hasNoRecordTypeCheck = true;
          window.alert(&#x22;This browser doesn&#x27;t know what media types it supports. Assuming all types.&#x22;);
       }
       return true;
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  * @param {String} codecName, either &#x22;vp8&#x22; or &#x22;vp9 or &#x22;h264&#x22;
  * @returns true if the type can be used.
  */
easyrtc.setRecordingVideoCodec = function(videoCodecName) {
    if( !easyrtc.supportsRecording ) {
        return false;
    }
    if(easyrtc.<span class="apidocCodeKeywordSpan">isRecordingTypeSupported</span>(videoCodecName)) {
        mimeType = &#x22;video/webm;codecs=&#x22; + videoCodecName;
        return true;
    }
    else {
       return false;
    }
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.listen" id="apidoc.element.easyrtc.listen">
        function <span class="apidocSignatureSpan">easyrtc.</span>listen
        <span class="apidocSignatureSpan">(httpApp, socketServer, options, listenCallback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">listen = function (httpApp, socketServer, options, listenCallback) {
    pub.util.logInfo(&#x22;Starting EasyRTC Server (v&#x22; + pub.getVersion() +&#x22;) on Node (&#x22; + process.version + &#x22;)&#x22;);

    // Set server object references in public object
    pub.httpApp         = httpApp;
    pub.socketServer    = socketServer;

    if (options){
        pub.util.logDebug(&#x22;Overriding options&#x22;, options);

        for (var optionName in options) {
            pub.setOption(optionName, options[optionName]);
        }
    }

    pub.util.logDebug(&#x22;Emitting event &#x27;startup&#x27;&#x22;);
    pub.events.emit(&#x22;startup&#x22;, function(err) {
        if (err) {
            pub.util.logError(&#x22;Error occurred upon startup&#x22;, err);
            if(_.isFunction(listenCallback)) {
                listenCallback(err, null);
            }
        }
        else {
            pub.util.logInfo(&#x22;EasyRTC Server Ready For Connections (v&#x22;+ pub.getVersion() + &#x22;)&#x22;);
            if(_.isFunction(listenCallback)) {
                listenCallback(err, pub);
            }
        }
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

EasyRTC allows management of configuration options at the server, application and room level. This will allow different rooms in
 the same application, or different applications in the same server to run with customized options.


Setting Server Options
----------------------

Options can be set prior, during, or after the easyrtc.<span class="apidocCodeKeywordSpan">listen</span>() function has been run
.

**Seperate**
- easyrtc.setOption(optionName, optionValue)

**Within Listen()**
- easyrtc.listen(httpApp, socketServer, options, listenCallback)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.on" id="apidoc.element.easyrtc.on">
        function <span class="apidocSignatureSpan">easyrtc.</span>on
        <span class="apidocSignatureSpan">(event, listener)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">on = function (event, listener) {
    if (event &#x26;&#x26; _.isFunction(listener)) {
        pub.events.removeAllListeners(event);
        pub.events.on(event, listener);
    }
    else {
        pub.util.logError(&#x22;Unable to add listener to event &#x27;&#x22; + event + &#x22;&#x27;&#x22;);
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
                self.websocketListeners[i].handler);
    }
}

self.websocketListeners = [];

function addSocketListener(event, handler) {
    self.webSocket.<span class="apidocCodeKeywordSpan">on</span>(event, handler);
    self.websocketListeners.push({event: event, handler: handler});
}

addSocketListener(&#x22;close&#x22;, function(event) {
    logDebug(&#x22;the web socket closed&#x22;);
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.recordToBlob" id="apidoc.element.easyrtc.recordToBlob">
        function <span class="apidocSignatureSpan">easyrtc.</span>recordToBlob
        <span class="apidocSignatureSpan">(mediaStream, blobCallback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">recordToBlob = function (mediaStream, blobCallback) {
    var chunks = [];

    function dataConsumer(chunk) {
       chunks.push(chunk);
    }

    var mediaRecorder = easyrtc.recordToCallback(mediaStream,
           dataConsumer);

    if( !mediaRecorder) {
        return null;
    }

    mediaRecorder.onstop = function() {
         blobCallback( new Blob(chunks, {type:&#x22;video/webm&#x22;}));
         chunks = [];
    }
    return mediaRecorder;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

           var name = basename + ((basename.indexOf(&#x22;.webm&#x22;)&#x3e;0)?&#x22;&#x22;: &#x22;.webm&#x22;) ;
           downloadLink.setAttribute( &#x22;download&#x22;, name);
           downloadLink.setAttribute( &#x22;name&#x22;, name);
       }

       downloadLink.innerHTML = &#x22;&#x22;;
       var mediaRecorder = easyrtc.<span class="apidocCodeKeywordSpan">recordToBlob</span>(mediaStream, blobCallback);
       return mediaRecorder;
   };

return easyrtc;

}));
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.recordToCallback" id="apidoc.element.easyrtc.recordToCallback">
        function <span class="apidocSignatureSpan">easyrtc.</span>recordToCallback
        <span class="apidocSignatureSpan">(mediaStream, dataCallback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">recordToCallback = function (mediaStream, dataCallback) {
    var mediaRecorder = startRecording(mediaStream);
    if( !mediaRecorder) {
        return null;
    }
    mediaRecorder.ondataavailable = function(e) {
        dataCallback(e.data);
    }
    return mediaRecorder;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   easyrtc.recordToBlob = function(mediaStream, blobCallback) {
var chunks = [];

function dataConsumer(chunk) {
   chunks.push(chunk);
}

var mediaRecorder = easyrtc.<span class="apidocCodeKeywordSpan">recordToCallback</span>(mediaStream,
       dataConsumer);

if( !mediaRecorder) {
    return null;
}

mediaRecorder.onstop = function() {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.recordToFile" id="apidoc.element.easyrtc.recordToFile">
        function <span class="apidocSignatureSpan">easyrtc.</span>recordToFile
        <span class="apidocSignatureSpan">(mediaStream, downloadLink, basename)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">recordToFile = function (mediaStream, downloadLink, basename) {
    function blobCallback( blob ) {
        var videoURL = window.URL.createObjectURL(blob);

        downloadLink.href = videoURL;
        downloadLink.appendChild(document.createTextNode(basename));

        var name = basename + ((basename.indexOf(&#x22;.webm&#x22;)&#x3e;0)?&#x22;&#x22;: &#x22;.webm&#x22;) ;
        downloadLink.setAttribute( &#x22;download&#x22;, name);
        downloadLink.setAttribute( &#x22;name&#x22;, name);
    }

    downloadLink.innerHTML = &#x22;&#x22;;
    var mediaRecorder = easyrtc.recordToBlob(mediaStream, blobCallback);
    return mediaRecorder;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var selfRecorder = null;
var callerRecorder = null;

function startRecording() {
var selfLink = document.getElementById(&#x22;selfDownloadLink&#x22;);
selfLink.innerText = &#x22;&#x22;;

selfRecorder = easyrtc.<span class="apidocCodeKeywordSpan">recordToFile</span>( easyrtc.getLocalStream(),
           selfLink, &#x22;selfVideo&#x22;);
if( selfRecorder ) {
   document.getElementById(&#x22;startRecording&#x22;).disabled = true;
   document.getElementById(&#x22;stopRecording&#x22;).disabled = false;
}
else {
   window.alert(&#x22;failed to start recorder for self&#x22;);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.removeAllListeners" id="apidoc.element.easyrtc.removeAllListeners">
        function <span class="apidocSignatureSpan">easyrtc.</span>removeAllListeners
        <span class="apidocSignatureSpan">(event)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">removeAllListeners = function (event) {
    if (event) {
        pub.events.removeAllListeners(event);
        pub.events.setDefaultListener(event);
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    }catch(e){}
    pub.util.logWarning(&#x22;[&#x22;+easyrtcid+&#x22;] EasyRTC Auth message received with invalid message format [&#x22; + msgErrorCode
 + &#x22;]. Disconnecting socket.&#x22;, msg);
    callback(new pub.util.ConnectionError(&#x22;[&#x22;+easyrtcid+&#x22;] EasyRTC Auth message received with invalid message format
 [&#x22; + msgErrorCode + &#x22;]. Disconnecting socket.&#x22;));
    return;
}

// Remove any old listeners
socket.<span class="apidocCodeKeywordSpan">removeAllListeners</span>(&#x22;easyrtcCmd&#x22;);
socket.removeAllListeners(&#x22;easyrtcMsg&#x22;);
socket.removeAllListeners(&#x22;disconnect&#x22;); // TODO: Come up with alternative to removing all disconnect listeners

pub.util.logDebug(&#x22;Emitting Authenticate&#x22;);

var username    = (msg.msgData.username     ? msg.msgData.username  : null);
var credential  = (msg.msgData.credential   ? msg.msgData.credential: null);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.setOption" id="apidoc.element.easyrtc.setOption">
        function <span class="apidocSignatureSpan">easyrtc.</span>setOption
        <span class="apidocSignatureSpan">(optionName, optionValue)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setOption = function (optionName, optionValue) {
    // Can only set options which currently exist
    if (typeof e.option[optionName] == &#x22;undefined&#x22;) {
        pub.util.logError(&#x22;Error setting option. Unrecognised option name &#x27;&#x22; + optionName + &#x22;&#x27;.&#x22;);
        return false;
    }

    e.option[optionName] = pub.util.deepCopy(optionValue);
    return true;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

Setting Server Options
----------------------

Options can be set prior, during, or after the easyrtc.listen() function has been run.

**Seperate**
- easyrtc.<span class="apidocCodeKeywordSpan">setOption</span>(optionName, optionValue)

**Within Listen()**
- easyrtc.listen(httpApp, socketServer, options, listenCallback)

**Afterwards with resulting EasyRTC interface function**
- ei.setOption(optionName, optionValue)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.setRecordingVideoCodec" id="apidoc.element.easyrtc.setRecordingVideoCodec">
        function <span class="apidocSignatureSpan">easyrtc.</span>setRecordingVideoCodec
        <span class="apidocSignatureSpan">(videoCodecName)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setRecordingVideoCodec = function (videoCodecName) {
    if( !easyrtc.supportsRecording ) {
        return false;
    }
    if(easyrtc.isRecordingTypeSupported(videoCodecName)) {
        mimeType = &#x22;video/webm;codecs=&#x22; + videoCodecName;
        return true;
    }
    else {
       return false;
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    &#x3c;video autoplay=&#x22;autoplay&#x22; class=&#x22;easyrtcMirror&#x22; id=&#x22;selfVideo&#x22; muted=&#x22;muted&#x22; volume
=&#x22;0&#x22; &#x3e;&#x3c;/video&#x3e;
    &#x3c;div style=&#x22;position:relative;float:left;&#x22;&#x3e;
    &#x3c;video autoplay=&#x22;autoplay&#x22; id=&#x22;callerVideo&#x22;&#x3e;&#x3c;/video&#x3e;
    &#x3c;/div&#x3e;
    &#x3c;!-- each caller video needs to be in it&#x27;s own div so it&#x27;s close button can be positioned correctly --&#x3e;
&#x3c;/div&#x3e;
&#x3c;div id=&#x22;recordButtons&#x22;&#x3e;
    &#x3c;input type=&#x22;radio&#x22; onclick=&#x22;easyrtc.<span class="apidocCodeKeywordSpan">setRecordingVideoCodec</span>(&#
x27;vp8&#x27;);&#x22; checked=&#x22;checked&#x22; id=&#x22;useVP8&#x22; name=&#x22;codecUsed&#x22;&#x3e; VP8 &#x3c;/input&#x3e;
    &#x3c;input type=&#x22;radio&#x22; onclick=&#x22;easyrtc.setRecordingVideoCodec(&#x27;vp9&#x27;);&#x22; id=&#x22;useVP9&#x22
; name=&#x22;codecUsed&#x22;&#x3e; VP9 &#x3c;/input&#x3e;
    &#x3c;input type=&#x22;radio&#x22; onclick=&#x22;easyrtc.setRecordingVideoCodec(&#x27;h264&#x27;);&#x22; id=&#x22;useH264&#x22
; name=&#x22;codecUsed&#x22;&#x3e; H264 &#x3c;/input&#x3e;
    &#x3c;br&#x3e;
    &#x3c;button id=&#x22;startRecording&#x22; disabled=&#x22;disabled&#x22; onclick=&#x22;startRecording();&#x22; &#x3e;Start recording
&#x3c;/button&#x3e;
    &#x3c;button id=&#x22;stopRecording&#x22; disabled=&#x22;disabled&#x22; onclick=&#x22;endRecording();&#x22; &#x3e;End/finish
 recording&#x3c;/button&#x3e;
   &#x3c;br&#x3e;
   download links for videos: self:&#x3c;a id=&#x22;selfDownloadLink&#x22;&#x3e;&#x3c;/a&#x3e;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.supportsRecording" id="apidoc.element.easyrtc.supportsRecording">
        function <span class="apidocSignatureSpan">easyrtc.</span>supportsRecording
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">supportsRecording = function () {
     return (typeof MediaRecorder !== &#x22;undefined&#x22; &#x26;&#x26; navigator.getUserMedia );
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
        return true;
    }
    else {
       return false;
    }
};

if( easyrtc.<span class="apidocCodeKeywordSpan">supportsRecording</span>()) {
    easyrtc.setRecordingVideoCodec(&#x22;vp8&#x22;);
}

/**
  * Create a recording object and attach a media stream to it.
  * @function
  * @memberOf Easyrtc_Recorder
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.util.ApplicationError" id="apidoc.element.easyrtc.util.ApplicationError">
        function <span class="apidocSignatureSpan">easyrtc.</span>util.ApplicationError
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">util.ApplicationError = function (msg) {
    eu.ApplicationError.super_.call(this, msg, this.constructor);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// Set all options in options object. If any fail, an error will be sent to the callback.
async.each(Object.keys(options), function(currentOptionName, asyncCallback) {
    appObj.setOption(currentOptionName, options[currentOptionName]);
    asyncCallback(null);
},
        function(err) {
            if (err) {
                callback(new pub.<span class="apidocCodeKeywordSpan">util.ApplicationError</span>(&#x22;Could not set options when
 creating application: &#x27;&#x22; + appName + &#x22;&#x27;&#x22;, err));
                return;
            }
            // Set default application fields
            var appDefaultFieldObj = appObj.getOption(&#x22;appDefaultFieldObj&#x22;);
            if (_.isObject(appDefaultFieldObj)) {
                for (var currentFieldName in appDefaultFieldObj) {
                    appObj.setField(
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.util.ApplicationWarning" id="apidoc.element.easyrtc.util.ApplicationWarning">
        function <span class="apidocSignatureSpan">easyrtc.</span>util.ApplicationWarning
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">util.ApplicationWarning = function (msg) {
    eu.ApplicationWarning.super_.call(this, msg, this.constructor);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
pub.createApp = function(appName, options, callback) {
if (!_.isFunction(callback)) {
    callback = function(err, appObj) {
    };
}
if (!appName || !pub.getOption(&#x22;appNameRegExp&#x22;).test(appName)) {
    pub.util.logWarning(&#x22;Can not create application with improper name: &#x27;&#x22; + appName + &#x22;&#x27;&#x22;);
    callback(new pub.<span class="apidocCodeKeywordSpan">util.ApplicationWarning</span>(&#x22;Can not create application with improper
 name: &#x27;&#x22; + appName + &#x22;&#x27;&#x22;));
    return;
}
if (e.app[appName]) {
    pub.util.logWarning(&#x22;Can not create application which already exists: &#x27;&#x22; + appName + &#x22;&#x27;&#x22;);
    callback(new pub.util.ApplicationWarning(&#x22;Can not create application which already exists: &#x27;&#x22; + appName + &#x22
;&#x27;&#x22;));
    return;
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.util.ConnectionError" id="apidoc.element.easyrtc.util.ConnectionError">
        function <span class="apidocSignatureSpan">easyrtc.</span>util.ConnectionError
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">util.ConnectionError = function (msg) {
    eu.ConnectionError.super_.call(this, msg, this.constructor);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
The &#x22;authenticate&#x22; event is fired during the initial connection. The listener is provided with full details about the
connection, so it may decide whether to authenticate or disconnect them.

In this simplistic example, any clients connecting to the adminSite application will be denied unless they have a username of &#
x22;handsomeJack&#x22;. Any clients connecting to any other application will be let through.


var onAuthenticate = function(socket, easyrtcid, appName, username, credential, easyrtcAuthMessage, next){
  if (appName == &#x22;adminSite&#x22; &#x26;&#x26; username != &#x22;handsomeJack&#x22;){
    next(new easyrtc.<span class="apidocCodeKeywordSpan">util.ConnectionError</span>(&#x22;Failed our private auth.&#x22;));
  }
  else {
    next(null);
  }
};

easyrtc.events.on(&#x22;authenticate&#x22;, onAuthenticate);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.util.ConnectionWarning" id="apidoc.element.easyrtc.util.ConnectionWarning">
        function <span class="apidocSignatureSpan">easyrtc.</span>util.ConnectionWarning
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">util.ConnectionWarning = function (msg) {
    eu.ConnectionWarning.super_.call(this, msg, this.constructor);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   for (var key in e.app) {
       if (e.app[key].connection[easyrtcid] &#x26;&#x26; e.app[key].connection[easyrtcid].isAuthenticated) {
           pub.app(key, callback);
           return;
       }
   }
   pub.util.logWarning(&#x22;Can not find connection [&#x22; + easyrtcid + &#x22;]&#x22;);
   callback(new pub.<span class="apidocCodeKeywordSpan">util.ConnectionWarning</span>(&#x22;Can not find connection [&#x22; + easyrtcid
 + &#x22;]&#x22;));
};


/**
* Sends the count of the number of connections to the server to a provided callback.
*
* @param       {function(?Error, Number)} callback Callback with error and array containing all easyrtcids.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.util.ServerError" id="apidoc.element.easyrtc.util.ServerError">
        function <span class="apidocSignatureSpan">easyrtc.</span>util.ServerError
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">util.ServerError = function (msg) {
    eu.ServerError.super_.call(this, msg, this.constructor);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
*/
pub.events.setDefaultListeners = function() {
   pub.events._eventListener.removeAllListeners();
   for (var currentEventName in pub.events.defaultListeners) {
       if (_.isFunction(pub.events.defaultListeners[currentEventName])) {
           pub.events._eventListener.on(currentEventName, pub.events.defaultListeners[currentEventName]);
       } else {
           throw new pub.<span class="apidocCodeKeywordSpan">util.ServerError</span>(&#x22;Error setting default listener. No default
 for event &#x27;&#x22; + currentEventName + &#x22;&#x27; exists.&#x22;);
       }
   }
};


/**
* Map of EasyRTC event listener names to their default functions. This map can be used to run a default function manually.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.util.ServerWarning" id="apidoc.element.easyrtc.util.ServerWarning">
        function <span class="apidocSignatureSpan">easyrtc.</span>util.ServerWarning
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">util.ServerWarning = function (msg) {
    eu.ServerWarning.super_.call(this, msg, this.constructor);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




















</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.easyrtc.easyrtc_app" id="apidoc.module.easyrtc.easyrtc_app">module easyrtc.easyrtc_app</a></h1>


    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_app.buildLocalSdpFilter" id="apidoc.element.easyrtc.easyrtc_app.buildLocalSdpFilter">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_app.</span>buildLocalSdpFilter
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">buildLocalSdpFilter = function (options) {
    return buildSdpFilter(options, true);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...


var selfEasyrtcid = &#x22;&#x22;;


function connect() {

var localFilter = easyrtc.<span class="apidocCodeKeywordSpan">buildLocalSdpFilter</span>( {
    audioRecvBitrate:20, videoRecvBitrate:30
});
var remoteFilter = easyrtc.buildRemoteSdpFilter({
    audioSendBitrate: 20, videoSendBitrate:30
});
easyrtc.setSdpFilters(localFilter, remoteFilter);
easyrtc.setRoomOccupantListener(convertListToButtons);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_app.buildRemoteSdpFilter" id="apidoc.element.easyrtc.easyrtc_app.buildRemoteSdpFilter">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_app.</span>buildRemoteSdpFilter
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">buildRemoteSdpFilter = function (options) {
    return buildSdpFilter(options, false);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...


function connect() {

   var localFilter = easyrtc.buildLocalSdpFilter( {
       audioRecvBitrate:20, videoRecvBitrate:30
   });
   var remoteFilter = easyrtc.<span class="apidocCodeKeywordSpan">buildRemoteSdpFilter</span>({
       audioSendBitrate: 20, videoSendBitrate:30
   });
   easyrtc.setSdpFilters(localFilter, remoteFilter);
   easyrtc.setRoomOccupantListener(convertListToButtons);
   easyrtc.easyApp(&#x22;easyrtc.lowbandwidth&#x22;, &#x22;selfVideo&#x22;, [&#x22;callerVideo&#x22;], loginSuccess, loginFailure
);
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_app.dontAddCloseButtons" id="apidoc.element.easyrtc.easyrtc_app.dontAddCloseButtons">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_app.</span>dontAddCloseButtons
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">dontAddCloseButtons = function () {
    autoAddCloseButtons = false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var autoAddCloseButtons = true;

/** By default, the easyApp routine sticks a &#x22;close&#x22; button on top of each caller
 * video object that it manages. Call this function(before calling easyApp) to disable that particular feature.
 * @function
 * @memberOf Easyrtc_App
 * @example
 *    easyrtc.<span class="apidocCodeKeywordSpan">dontAddCloseButtons</span>();
 */
easyrtc.dontAddCloseButtons = function() {
    autoAddCloseButtons = false;
};

/**
 * This is a helper function for the easyApp method. It manages the assignment of video streams
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_app.easyApp" id="apidoc.element.easyrtc.easyrtc_app.easyApp">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_app.</span>easyApp
        <span class="apidocSignatureSpan">(applicationName, monitorVideoId, videoIds, onReady, onFailure)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">easyApp = function (applicationName, monitorVideoId, videoIds, onReady, onFailure) {

    var gotMediaCallback = null,
        gotConnectionCallback = null;

    easyAppBody(monitorVideoId, videoIds);

    easyrtc.setGotMedia = function(gotMediaCB) {
        gotMediaCallback = gotMediaCB;
    };

    //
    // try to restablish broken connections that weren&#x27;t caused by a hangup
    //
    easyrtc.setPeerClosedListener( function(easyrtcid) {
       setTimeout( function() {
           if( easyrtc.getSlotOfCaller(easyrtcid)  &#x3e;= 0 &#x26;&#x26; easyrtc.isPeerInAnyRoom(easyrtcid)) {
                easyrtc.call(easyrtcid, function(){}, function() {}, function(){});
           }
       }, 1000);
    });

<span class="apidocCodeCommentSpan">    /** Sets an event handler that gets called when a connection to the signaling
     * server has or has not been made. Can only be called after calling easyrtc.easyApp.
     * @function
     * @memberOf Easyrtc_App
     * @param {Function} gotConnectionCB has the signature (gotConnection, errorText)
     * @example
     *    easyrtc.setGotConnection( function(gotConnection, errorText){
     *        if( gotConnection ){
     *            console.log(&#x22;Successfully connected to signaling server&#x22;);
     *        }
     *        else{
     *            console.log(&#x22;Failed to connect to signaling server because: &#x22; + errorText);
     *        }
     *    });
     */
</span>    easyrtc.setGotConnection = function(gotConnectionCB) {
        gotConnectionCallback = gotConnectionCB;
    };

    function nextInitializationStep(/* token */) {
        if (gotConnectionCallback) {
            gotConnectionCallback(true, &#x22;&#x22;);
        }
        onReady(easyrtc.myEasyrtcid);
    }

    function postGetUserMedia() {
        if (gotMediaCallback) {
            gotMediaCallback(true, null);
        }
        if (monitorVideoId !== null) {
            easyrtc.setVideoObjectSrc(document.getElementById(monitorVideoId), easyrtc.getLocalStream());
        }
        function connectError(errorCode, errorText) {
            if (gotConnectionCallback) {
                gotConnectionCallback(false, errorText);
            }
            else if (onFailure) {
                onFailure(easyrtc.errCodes.CONNECT_ERR, errorText);
            }
            else {
                easyrtc.showError(easyrtc.errCodes.CONNECT_ERR, errorText);
            }
        }

        easyrtc.connect(applicationName, nextInitializationStep, connectError);
    }

    var stream = easyrtc.getLocalStream(null);
    if (stream) {
        postGetUserMedia();
    }
    else {
        easyrtc.initMediaSource(
                postGetUserMedia,
                function(errorCode, errorText) {
                    if (gotMediaCallback) {
                        gotMediaCallback(false, errorText);
                    }
                    else if (onFailure) {
                        onFailure(easyrtc.errCodes.MEDIA_ERR, errorText);
                    }
                    else {
                        easyrtc.showError(easyrtc.errCodes.MEDIA_ERR, errorText);
                    }
                },
                null // default stream
            );
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* @memberOf Easyrtc_App
*  @param {String} applicationName - name of the application.
*  @param {String} monitorVideoId - the id of the video object used for monitoring the local stream.
*  @param {Array} videoIds - an array of video object ids (strings)
*  @param {Function} onReady - a callback function used on success. It is called with the easyrtcId this peer is known to the server
 as.
*  @param {Function} onFailure - a callback function used on failure (failed to get local media or a connection of the signaling
 server).
*  @example
*     easyrtc.<span class="apidocCodeKeywordSpan">easyApp</span>(&#x27;multiChat&#x27;, &#x27;selfVideo&#x27;, [&#x27;remote1&#x27
;, &#x27;remote2&#x27;, &#x27;remote3&#x27;],
*              function(easyrtcId){
*                  console.log(&#x22;successfully connected, I am &#x22; + easyrtcId);
*              },
*              function(errorCode, errorText){
*                  console.log(errorText);
*              });
*/
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_app.getDefaultOptions" id="apidoc.element.easyrtc.easyrtc_app.getDefaultOptions">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_app.</span>getDefaultOptions
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getDefaultOptions = function () {
    var defaultOptions = require(&#x22;./easyrtc_default_options&#x22;);
    return g.deepCopy(defaultOptions);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_app.getUserMediaConstraints" id="apidoc.element.easyrtc.easyrtc_app.getUserMediaConstraints">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_app.</span>getUserMediaConstraints
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getUserMediaConstraints = function () {

    var constraints = getUserMediaConstraints();

    // Apply screen constraints
    if (
        constraints.video &#x26;&#x26;
            constraints.video.mandatory &#x26;&#x26;
                constraints.video.mandatory.chromeMediaSource === &#x27;screen&#x27; &#x26;&#x26;
                    easyrtc_sc.chromeMediaSource === &#x27;desktop&#x27;
    ) {
        constraints.video.mandatory.chromeMediaSource = easyrtc_sc.chromeMediaSource;
        constraints.video.mandatory.chromeMediaSourceId = easyrtc_sc.chromeMediaSourceId;
    }

    return constraints;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

if (!successCallback) {
    self.showError(self.errCodes.DEVELOPER_ERR,
            &#x22;easyrtc.initMediaSource not supplied a successCallback&#x22;);
    return;
}

var mode = self.<span class="apidocCodeKeywordSpan">getUserMediaConstraints</span>();
/** @private
 * @param {Object} stream - A mediaStream object.
 *  */
var onUserMediaSuccess = function(stream) {
    logDebug(&#x22;getUserMedia success callback entered&#x22;);
    logDebug(&#x22;successfully got local media&#x22;);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_app.isRecordingTypeSupported" id="apidoc.element.easyrtc.easyrtc_app.isRecordingTypeSupported">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_app.</span>isRecordingTypeSupported
        <span class="apidocSignatureSpan">(videoCodecName)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isRecordingTypeSupported = function (videoCodecName) {
    var mimeType = &#x22;video/webm;codecs=&#x22; + videoCodecName;
    if( MediaRecorder.isTypeSupported ) {
        // chrome definitely, maybe firefox
        return MediaRecorder.isTypeSupported(mimeType);
    }
    else if( MediaRecorder.isMimeTypeSupported ) {
        // maybe firefox
        return MediaRecorder.isMimeTypeSupported(mimeType);
    }
    else {
       if( typeof easyrtc.hasNoRecordTypeCheck === &#x22;undefined&#x22;) {
          easyrtc.hasNoRecordTypeCheck = true;
          window.alert(&#x22;This browser doesn&#x27;t know what media types it supports. Assuming all types.&#x22;);
       }
       return true;
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
  * @param {String} codecName, either &#x22;vp8&#x22; or &#x22;vp9 or &#x22;h264&#x22;
  * @returns true if the type can be used.
  */
easyrtc.setRecordingVideoCodec = function(videoCodecName) {
    if( !easyrtc.supportsRecording ) {
        return false;
    }
    if(easyrtc.<span class="apidocCodeKeywordSpan">isRecordingTypeSupported</span>(videoCodecName)) {
        mimeType = &#x22;video/webm;codecs=&#x22; + videoCodecName;
        return true;
    }
    else {
       return false;
    }
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_app.listen" id="apidoc.element.easyrtc.easyrtc_app.listen">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_app.</span>listen
        <span class="apidocSignatureSpan">(httpApp, socketServer, options, listenCallback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">listen = function (httpApp, socketServer, options, listenCallback) {
    pub.util.logInfo(&#x22;Starting EasyRTC Server (v&#x22; + pub.getVersion() +&#x22;) on Node (&#x22; + process.version + &#x22;)&#x22;);

    // Set server object references in public object
    pub.httpApp         = httpApp;
    pub.socketServer    = socketServer;

    if (options){
        pub.util.logDebug(&#x22;Overriding options&#x22;, options);

        for (var optionName in options) {
            pub.setOption(optionName, options[optionName]);
        }
    }

    pub.util.logDebug(&#x22;Emitting event &#x27;startup&#x27;&#x22;);
    pub.events.emit(&#x22;startup&#x22;, function(err) {
        if (err) {
            pub.util.logError(&#x22;Error occurred upon startup&#x22;, err);
            if(_.isFunction(listenCallback)) {
                listenCallback(err, null);
            }
        }
        else {
            pub.util.logInfo(&#x22;EasyRTC Server Ready For Connections (v&#x22;+ pub.getVersion() + &#x22;)&#x22;);
            if(_.isFunction(listenCallback)) {
                listenCallback(err, pub);
            }
        }
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

EasyRTC allows management of configuration options at the server, application and room level. This will allow different rooms in
 the same application, or different applications in the same server to run with customized options.


Setting Server Options
----------------------

Options can be set prior, during, or after the easyrtc.<span class="apidocCodeKeywordSpan">listen</span>() function has been run
.

**Seperate**
- easyrtc.setOption(optionName, optionValue)

**Within Listen()**
- easyrtc.listen(httpApp, socketServer, options, listenCallback)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_app.on" id="apidoc.element.easyrtc.easyrtc_app.on">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_app.</span>on
        <span class="apidocSignatureSpan">(event, listener)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">on = function (event, listener) {
    if (event &#x26;&#x26; _.isFunction(listener)) {
        pub.events.removeAllListeners(event);
        pub.events.on(event, listener);
    }
    else {
        pub.util.logError(&#x22;Unable to add listener to event &#x27;&#x22; + event + &#x22;&#x27;&#x22;);
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
                self.websocketListeners[i].handler);
    }
}

self.websocketListeners = [];

function addSocketListener(event, handler) {
    self.webSocket.<span class="apidocCodeKeywordSpan">on</span>(event, handler);
    self.websocketListeners.push({event: event, handler: handler});
}

addSocketListener(&#x22;close&#x22;, function(event) {
    logDebug(&#x22;the web socket closed&#x22;);
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_app.recordToBlob" id="apidoc.element.easyrtc.easyrtc_app.recordToBlob">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_app.</span>recordToBlob
        <span class="apidocSignatureSpan">(mediaStream, blobCallback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">recordToBlob = function (mediaStream, blobCallback) {
    var chunks = [];

    function dataConsumer(chunk) {
       chunks.push(chunk);
    }

    var mediaRecorder = easyrtc.recordToCallback(mediaStream,
           dataConsumer);

    if( !mediaRecorder) {
        return null;
    }

    mediaRecorder.onstop = function() {
         blobCallback( new Blob(chunks, {type:&#x22;video/webm&#x22;}));
         chunks = [];
    }
    return mediaRecorder;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

           var name = basename + ((basename.indexOf(&#x22;.webm&#x22;)&#x3e;0)?&#x22;&#x22;: &#x22;.webm&#x22;) ;
           downloadLink.setAttribute( &#x22;download&#x22;, name);
           downloadLink.setAttribute( &#x22;name&#x22;, name);
       }

       downloadLink.innerHTML = &#x22;&#x22;;
       var mediaRecorder = easyrtc.<span class="apidocCodeKeywordSpan">recordToBlob</span>(mediaStream, blobCallback);
       return mediaRecorder;
   };

return easyrtc;

}));
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_app.recordToCallback" id="apidoc.element.easyrtc.easyrtc_app.recordToCallback">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_app.</span>recordToCallback
        <span class="apidocSignatureSpan">(mediaStream, dataCallback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">recordToCallback = function (mediaStream, dataCallback) {
    var mediaRecorder = startRecording(mediaStream);
    if( !mediaRecorder) {
        return null;
    }
    mediaRecorder.ondataavailable = function(e) {
        dataCallback(e.data);
    }
    return mediaRecorder;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   easyrtc.recordToBlob = function(mediaStream, blobCallback) {
var chunks = [];

function dataConsumer(chunk) {
   chunks.push(chunk);
}

var mediaRecorder = easyrtc.<span class="apidocCodeKeywordSpan">recordToCallback</span>(mediaStream,
       dataConsumer);

if( !mediaRecorder) {
    return null;
}

mediaRecorder.onstop = function() {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_app.recordToFile" id="apidoc.element.easyrtc.easyrtc_app.recordToFile">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_app.</span>recordToFile
        <span class="apidocSignatureSpan">(mediaStream, downloadLink, basename)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">recordToFile = function (mediaStream, downloadLink, basename) {
    function blobCallback( blob ) {
        var videoURL = window.URL.createObjectURL(blob);

        downloadLink.href = videoURL;
        downloadLink.appendChild(document.createTextNode(basename));

        var name = basename + ((basename.indexOf(&#x22;.webm&#x22;)&#x3e;0)?&#x22;&#x22;: &#x22;.webm&#x22;) ;
        downloadLink.setAttribute( &#x22;download&#x22;, name);
        downloadLink.setAttribute( &#x22;name&#x22;, name);
    }

    downloadLink.innerHTML = &#x22;&#x22;;
    var mediaRecorder = easyrtc.recordToBlob(mediaStream, blobCallback);
    return mediaRecorder;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var selfRecorder = null;
var callerRecorder = null;

function startRecording() {
var selfLink = document.getElementById(&#x22;selfDownloadLink&#x22;);
selfLink.innerText = &#x22;&#x22;;

selfRecorder = easyrtc.<span class="apidocCodeKeywordSpan">recordToFile</span>( easyrtc.getLocalStream(),
           selfLink, &#x22;selfVideo&#x22;);
if( selfRecorder ) {
   document.getElementById(&#x22;startRecording&#x22;).disabled = true;
   document.getElementById(&#x22;stopRecording&#x22;).disabled = false;
}
else {
   window.alert(&#x22;failed to start recorder for self&#x22;);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_app.removeAllListeners" id="apidoc.element.easyrtc.easyrtc_app.removeAllListeners">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_app.</span>removeAllListeners
        <span class="apidocSignatureSpan">(event)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">removeAllListeners = function (event) {
    if (event) {
        pub.events.removeAllListeners(event);
        pub.events.setDefaultListener(event);
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    }catch(e){}
    pub.util.logWarning(&#x22;[&#x22;+easyrtcid+&#x22;] EasyRTC Auth message received with invalid message format [&#x22; + msgErrorCode
 + &#x22;]. Disconnecting socket.&#x22;, msg);
    callback(new pub.util.ConnectionError(&#x22;[&#x22;+easyrtcid+&#x22;] EasyRTC Auth message received with invalid message format
 [&#x22; + msgErrorCode + &#x22;]. Disconnecting socket.&#x22;));
    return;
}

// Remove any old listeners
socket.<span class="apidocCodeKeywordSpan">removeAllListeners</span>(&#x22;easyrtcCmd&#x22;);
socket.removeAllListeners(&#x22;easyrtcMsg&#x22;);
socket.removeAllListeners(&#x22;disconnect&#x22;); // TODO: Come up with alternative to removing all disconnect listeners

pub.util.logDebug(&#x22;Emitting Authenticate&#x22;);

var username    = (msg.msgData.username     ? msg.msgData.username  : null);
var credential  = (msg.msgData.credential   ? msg.msgData.credential: null);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_app.setOption" id="apidoc.element.easyrtc.easyrtc_app.setOption">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_app.</span>setOption
        <span class="apidocSignatureSpan">(optionName, optionValue)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setOption = function (optionName, optionValue) {
    // Can only set options which currently exist
    if (typeof e.option[optionName] == &#x22;undefined&#x22;) {
        pub.util.logError(&#x22;Error setting option. Unrecognised option name &#x27;&#x22; + optionName + &#x22;&#x27;.&#x22;);
        return false;
    }

    e.option[optionName] = pub.util.deepCopy(optionValue);
    return true;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

Setting Server Options
----------------------

Options can be set prior, during, or after the easyrtc.listen() function has been run.

**Seperate**
- easyrtc.<span class="apidocCodeKeywordSpan">setOption</span>(optionName, optionValue)

**Within Listen()**
- easyrtc.listen(httpApp, socketServer, options, listenCallback)

**Afterwards with resulting EasyRTC interface function**
- ei.setOption(optionName, optionValue)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_app.setRecordingVideoCodec" id="apidoc.element.easyrtc.easyrtc_app.setRecordingVideoCodec">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_app.</span>setRecordingVideoCodec
        <span class="apidocSignatureSpan">(videoCodecName)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setRecordingVideoCodec = function (videoCodecName) {
    if( !easyrtc.supportsRecording ) {
        return false;
    }
    if(easyrtc.isRecordingTypeSupported(videoCodecName)) {
        mimeType = &#x22;video/webm;codecs=&#x22; + videoCodecName;
        return true;
    }
    else {
       return false;
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    &#x3c;video autoplay=&#x22;autoplay&#x22; class=&#x22;easyrtcMirror&#x22; id=&#x22;selfVideo&#x22; muted=&#x22;muted&#x22; volume
=&#x22;0&#x22; &#x3e;&#x3c;/video&#x3e;
    &#x3c;div style=&#x22;position:relative;float:left;&#x22;&#x3e;
    &#x3c;video autoplay=&#x22;autoplay&#x22; id=&#x22;callerVideo&#x22;&#x3e;&#x3c;/video&#x3e;
    &#x3c;/div&#x3e;
    &#x3c;!-- each caller video needs to be in it&#x27;s own div so it&#x27;s close button can be positioned correctly --&#x3e;
&#x3c;/div&#x3e;
&#x3c;div id=&#x22;recordButtons&#x22;&#x3e;
    &#x3c;input type=&#x22;radio&#x22; onclick=&#x22;easyrtc.<span class="apidocCodeKeywordSpan">setRecordingVideoCodec</span>(&#
x27;vp8&#x27;);&#x22; checked=&#x22;checked&#x22; id=&#x22;useVP8&#x22; name=&#x22;codecUsed&#x22;&#x3e; VP8 &#x3c;/input&#x3e;
    &#x3c;input type=&#x22;radio&#x22; onclick=&#x22;easyrtc.setRecordingVideoCodec(&#x27;vp9&#x27;);&#x22; id=&#x22;useVP9&#x22
; name=&#x22;codecUsed&#x22;&#x3e; VP9 &#x3c;/input&#x3e;
    &#x3c;input type=&#x22;radio&#x22; onclick=&#x22;easyrtc.setRecordingVideoCodec(&#x27;h264&#x27;);&#x22; id=&#x22;useH264&#x22
; name=&#x22;codecUsed&#x22;&#x3e; H264 &#x3c;/input&#x3e;
    &#x3c;br&#x3e;
    &#x3c;button id=&#x22;startRecording&#x22; disabled=&#x22;disabled&#x22; onclick=&#x22;startRecording();&#x22; &#x3e;Start recording
&#x3c;/button&#x3e;
    &#x3c;button id=&#x22;stopRecording&#x22; disabled=&#x22;disabled&#x22; onclick=&#x22;endRecording();&#x22; &#x3e;End/finish
 recording&#x3c;/button&#x3e;
   &#x3c;br&#x3e;
   download links for videos: self:&#x3c;a id=&#x22;selfDownloadLink&#x22;&#x3e;&#x3c;/a&#x3e;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_app.supportsRecording" id="apidoc.element.easyrtc.easyrtc_app.supportsRecording">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_app.</span>supportsRecording
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">supportsRecording = function () {
     return (typeof MediaRecorder !== &#x22;undefined&#x22; &#x26;&#x26; navigator.getUserMedia );
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
        return true;
    }
    else {
       return false;
    }
};

if( easyrtc.<span class="apidocCodeKeywordSpan">supportsRecording</span>()) {
    easyrtc.setRecordingVideoCodec(&#x22;vp8&#x22;);
}

/**
  * Create a recording object and attach a media stream to it.
  * @function
  * @memberOf Easyrtc_Recorder
...</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.easyrtc.easyrtc_default_event_listeners" id="apidoc.module.easyrtc.easyrtc_default_event_listeners">module easyrtc.easyrtc_default_event_listeners</a></h1>


    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_default_event_listeners.onAuthenticate" id="apidoc.element.easyrtc.easyrtc_default_event_listeners.onAuthenticate">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_default_event_listeners.</span>onAuthenticate
        <span class="apidocSignatureSpan">(socket, easyrtcid, appName, username, credential, easyrtcAuthMessage, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onAuthenticate = function (socket, easyrtcid, appName, username, credential, easyrtcAuthMessage, next) {
    next(null);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_default_event_listeners.onAuthenticated" id="apidoc.element.easyrtc.easyrtc_default_event_listeners.onAuthenticated">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_default_event_listeners.</span>onAuthenticated
        <span class="apidocSignatureSpan">(connectionObj, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onAuthenticated = function (connectionObj, next) {
    next(null);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_default_event_listeners.onConnection" id="apidoc.element.easyrtc.easyrtc_default_event_listeners.onConnection">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_default_event_listeners.</span>onConnection
        <span class="apidocSignatureSpan">(socket, easyrtcid, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onConnection = function (socket, easyrtcid, next){
    var connectionObj = {};             // prepare variables to house the connection object

    // Initially upon a connection, we are only concerned with receiving an easyrtcAuth message
    socket.on(&#x22;easyrtcAuth&#x22;, function(msg, socketCallback) {

        if (pub.getOption(&#x22;logMessagesEnable&#x22;)) {
            try {
                pub.util.logDebug(&#x22;[&#x22;+easyrtcid+&#x22;] Incoming socket.io message: [&#x22;+JSON.stringify(msg)+&#x22;]&#x22;);
            }
            catch(err) {
                pub.util.logDebug(&#x22;[&#x22;+easyrtcid+&#x22;] Incoming socket.io message&#x22;);
            }
        }

        pub.events.emit(&#x22;easyrtcAuth&#x22;, socket, easyrtcid, msg, socketCallback, function(err, newConnectionObj){
            if(err){
                pub.util.logError(&#x22;[&#x22;+easyrtcid+&#x22;] Unhandled easyrtcCmd listener error.&#x22;, err);
                return;
            }

            connectionObj = newConnectionObj;
        });
    });

    pub.util.logDebug(&#x22;Running func &#x27;onConnection&#x27;&#x22;);
    next(null);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_default_event_listeners.onDisconnect" id="apidoc.element.easyrtc.easyrtc_default_event_listeners.onDisconnect">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_default_event_listeners.</span>onDisconnect
        <span class="apidocSignatureSpan">(connectionObj, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onDisconnect = function (connectionObj, next){
    pub.util.logDebug(&#x22;Running func &#x27;onDisconnect&#x27;&#x22;);

    async.waterfall([
        function(asyncCallback) {
            // Get array of rooms
            connectionObj.getRoomNames(asyncCallback);
        },
        function(roomNames, asyncCallback) {
            // leave all rooms
            async.each(roomNames,
                function(currentRoomName, asyncEachCallback) {
                    pub.events.emit(&#x22;roomLeave&#x22;, connectionObj, currentRoomName, function(err){asyncEachCallback(null);});
                },
                function(err){
                    asyncCallback(null);
                }
            );
        },
        function(asyncCallback) {
            // log all connections as ended
            pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] Disconnected&#x22;);
            connectionObj.removeConnection(asyncCallback);
        }
    ], function(err) {
        next(null);
    });

    next(null);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_default_event_listeners.onEasyrtcAuth" id="apidoc.element.easyrtc.easyrtc_default_event_listeners.onEasyrtcAuth">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_default_event_listeners.</span>onEasyrtcAuth
        <span class="apidocSignatureSpan">(socket, easyrtcid, msg, socketCallback, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onEasyrtcAuth = function (socket, easyrtcid, msg, socketCallback, callback){
    pub.util.logDebug(&#x22;[&#x22;+easyrtcid+&#x22;] Running func &#x27;onEasyrtcAuth&#x27;&#x22;);

    var appObj, connectionObj, sessionObj;  // prepare variables to house the application, connection, and session objects

    var tokenMsg = {
        msgType: &#x22;token&#x22;,
        msgData:{}
    };

    var appName;
    var newAppName = (_.isObject(msg.msgData) &#x26;&#x26;_.isString(msg.msgData.applicationName)) ? msg.msgData.applicationName : pub.getOption
(&#x22;appDefaultName&#x22;);

    // Ensure socketCallback is present
    if(!_.isFunction(socketCallback)) {
        pub.util.logWarning(&#x22;[&#x22;+easyrtcid+&#x22;] EasyRTC Auth message received with no callback. Disconnecting socket.&#x22;, msg);
        try{socket.disconnect();}catch(e){}
        return;
    }

    // Only accept authenticate message
    if(!_.isObject(msg) || !_.isString(msg.msgType) || msg.msgType != &#x22;authenticate&#x22;) {
        pub.util.logWarning(&#x22;[&#x22;+easyrtcid+&#x22;] EasyRTC Auth message received without msgType of &#x27;authenticate&#x27;. Disconnecting socket
.&#x22;, msg);
        pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, pub.util.getErrorMsg(&#x22;LOGIN_BAD_AUTH&#x22;), appObj);
        try{socket.disconnect();}catch(e){}
        return;
    }

    // Check msg structure.
    if(!_.isObject(msg.msgData)
        || !_.isString(msg.msgData.apiVersion)
        || (msg.msgData.roomJoin !== undefined &#x26;&#x26; !_.isObject(msg.msgData.roomJoin))
    ) {
        pub.util.logWarning(&#x22;[&#x22;+easyrtcid+&#x22;] EasyRTC Auth message received with improper msgData. Disconnecting socket.&#x22;, msg);
        pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, pub.util.getErrorMsg(&#x22;LOGIN_BAD_STRUCTURE&#x22;), appObj);
        try{socket.disconnect();}catch(e){}
        return;
    }

    async.waterfall([
        function(asyncCallback) {
            // Check message structure
            pub.util.isValidIncomingMessage(&#x22;easyrtcAuth&#x22;, msg, null, asyncCallback);
        },

        function(isMsgValid, msgErrorCode, asyncCallback) {
            // If message structure is invalid, send error, disconnect socket, and write to log
            if (!isMsgValid) {
                try{
                    pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, pub.util.getErrorMsg(msgErrorCode), appObj);
                    socket.disconnect();
                }catch(e){}
                pub.util.logWarning(&#x22;[&#x22;+easyrtcid+&#x22;] EasyRTC Auth message received with invalid message format [&#x22; + msgErrorCode
 + &#x22;]. Disconnecting socket.&#x22;, msg);
                callback(new pub.util.ConnectionError(&#x22;[&#x22;+easyrtcid+&#x22;] EasyRTC Auth message received with invalid message format
 [&#x22; + msgErrorCode + &#x22;]. Disconnecting socket.&#x22;));
                return;
            }

            // Remove any old listeners
            socket.removeAllListeners(&#x22;easyrtcCmd&#x22;);
            socket.removeAllListeners(&#x22;easyrtcMsg&#x22;);
            socket.removeAllListeners(&#x22;disconnect&#x22;); // TODO: Come up with alternative to removing all disconnect listeners

            pub.util.logDebug(&#x22;Emitting Authenticate&#x22;);

            var username    = (msg.msgData.username     ? msg.msgData.username  : null);
            var credential  = (msg.msgData.credential   ? msg.msgData.credential: null);

            // Authenticate is responsible for authenticating the connection
            pub.events.emit(&#x22;authenticate&#x22;, socket, easyrtcid, newAppName, username, credential, msg, function(err){
                if (err) {
                    try{
                        pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, pub.util.getErrorMsg(&#x22;LOGIN_BAD_AUTH&#x22;), appObj
);
                        socket.disconnect();
                        pub.util.logInfo(&#x22;[&#x22;+newAppName+&#x22;][&#x22;+easyrtcid+&#x22;] Authentication denied. Socket disconnected.&#x22;, err);
                    }catch(e){}
                } else {
                    asyncCallback(null);
                }
            });
        },

        function(asyncCallback) {
            // Check to see if the requested app currently exists.
            pub.isApp(newAppName, asyncCallback);

        },

        functi ...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_default_event_listeners.onEasyrtcCmd" id="apidoc.element.easyrtc.easyrtc_default_event_listeners.onEasyrtcCmd">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_default_event_listeners.</span>onEasyrtcCmd
        <span class="apidocSignatureSpan">(connectionObj, msg, socketCallback, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onEasyrtcCmd = function (connectionObj, msg, socketCallback, next){
    var appName = connectionObj.getAppName();
    var appObj = connectionObj.getApp();
    var easyrtcid = connectionObj.getEasyrtcid();


    pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] EasyRTC command received with msgType [&#x22; +
msg.msgType + &#x22;]&#x22;);
    if (!_.isFunction(next)) {
        next = pub.util.nextToNowhere;
    }

    if(!_.isFunction(socketCallback)) {
        pub.util.logWarning(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] EasyRTC command message received
 with no callback. Ignoring.&#x22;, msg);
        return;
    }

    async.waterfall([
        function(asyncCallback) {
            // Check message structure
            pub.util.isValidIncomingMessage(&#x22;easyrtcCmd&#x22;, msg, connectionObj.getApp(), asyncCallback);
        },

        function(isMsgValid, msgErrorCode, asyncCallback) {
            // If message structure is invalid, send error, and write to log
            if (!isMsgValid) {
                try{
                    pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, pub.util.getErrorMsg(msgErrorCode), appObj);
                }catch(e){}
                pub.util.logWarning(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] EasyRTC Auth message received
 with invalid message format [&#x22; + msgErrorCode + &#x22;]. Disconnecting socket.&#x22;, msg);
                return;
            }
            asyncCallback(null);
        },
        function(asyncCallback) {
            // The msgType controls how each message is handled
            switch(msg.msgType) {
                case &#x22;setUserCfg&#x22;:
                    pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] WebRTC setUserCfg command
 received. This feature is not yet complete.&#x22;);
                    pub.util.sendSocketCallbackAck(easyrtcid, socketCallback, appObj);
                    next(null);
                    break;

                case &#x22;setPresence&#x22;:
                    pub.events.emit(&#x22;msgTypeSetPresence&#x22;, connectionObj, msg.msgData.setPresence, socketCallback, next);
                    break;

                case &#x22;setRoomApiField&#x22;:
                    pub.events.emit(&#x22;msgTypeSetRoomApiField&#x22;, connectionObj, msg.msgData.setRoomApiField, socketCallback, next);
                    break;

                case &#x22;roomJoin&#x22;:
                    pub.events.emit(&#x22;msgTypeRoomJoin&#x22;, connectionObj, msg.msgData.roomJoin, socketCallback, next);
                    break;

                case &#x22;roomLeave&#x22;:
                    pub.events.emit(&#x22;msgTypeRoomLeave&#x22;, connectionObj, msg.msgData.roomLeave, socketCallback, next);
                    break;

                case &#x22;getIceConfig&#x22;:
                    pub.events.emit(&#x22;msgTypeGetIceConfig&#x22;, connectionObj, socketCallback, next);
                    break;

                case &#x22;getRoomList&#x22;:
                    pub.events.emit(&#x22;msgTypeGetRoomList&#x22;, connectionObj, socketCallback, next);
                    break;

                case &#x22;candidate&#x22;:
                case &#x22;offer&#x22;:
                case &#x22;answer&#x22;:
                case &#x22;reject&#x22;:
                case &#x22;hangup&#x22;:
                    // Relay message to targetEasyrtcid
                    var outgoingMsg = {senderEasyrtcid: connectionObj.getEasyrtcid(), msgData:msg.msgData};

                    connectionObj.getApp().connection(msg.targetEasyrtcid, function(err,targetConnectionObj){
                        if (err){
                            pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, pub.util.getErrorMsg(&#x22;MSG_REJECT_TARGET_EASYRTCID
&#x22;), appObj);
                            pub.util.logWarning(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] Could not send
 WebRTC signal to client [&#x22; + msg.targetEasyrtcid + &#x22;]. They may no longer be online.&#x22;);
                            return;
                        }
                        pub.events.emit(&#x22;emitEasyrtcCmd&#x22;, targetConnectionObj, msg.msgType, outgoingMsg, null, next);
                        pub ...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_default_event_listeners.onEasyrtcMsg" id="apidoc.element.easyrtc.easyrtc_default_event_listeners.onEasyrtcMsg">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_default_event_listeners.</span>onEasyrtcMsg
        <span class="apidocSignatureSpan">(connectionObj, msg, socketCallback, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onEasyrtcMsg = function (connectionObj, msg, socketCallback, next){
    var easyrtcid = connectionObj.getEasyrtcid();
    var appObj = connectionObj.getApp();


    pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] EasyRTC message received of type [&#x22; +
msg.msgType + &#x22;]&#x22;);

    if (!_.isFunction(next)) {
        next = pub.util.nextToNowhere;
    }

    if(!_.isFunction(socketCallback)) {
        pub.util.logWarning(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] EasyRTC message received with no
 callback. Ignoring message.&#x22;, msg);
        return;
    }

    async.waterfall([
        function(asyncCallback) {
            // Check message structure
            pub.util.isValidIncomingMessage(&#x22;easyrtcMsg&#x22;, msg, connectionObj.getApp(), asyncCallback);
        },

        function(isMsgValid, msgErrorCode, asyncCallback) {
            // If message structure is invalid, send error, and write to log
            if (!isMsgValid) {
                pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, pub.util.getErrorMsg(msgErrorCode), appObj);
                pub.util.logWarning(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] EasyRTC message received
 with invalid message format [&#x22; + msgErrorCode + &#x22;].&#x22;, msg);
                return;
            }
            asyncCallback(null);
        },
        function(asyncCallback) {

            // test targetEasyrtcid (if defined). Will prevent client from sending to themselves
            if (msg.targetEasyrtcid  !== undefined &#x26;&#x26; msg.targetEasyrtcid == connectionObj.getEasyrtcid()) {
                pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, pub.util.getErrorMsg(&#x22;MSG_REJECT_TARGET_EASYRTCID&#x22;), appObj
);
                pub.util.logWarning(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] EasyRTC message received
 with improper targetEasyrtcid&#x22;, msg);
                return;
            }

            // Determine if sending message to single client, an entire room, or an entire group
            if (msg.targetEasyrtcid !== undefined) {
                // Relay a message to a single client
                var outgoingMsg = {
                    senderEasyrtcid: connectionObj.getEasyrtcid(),
                    targetEasyrtcid: msg.targetEasyrtcid,
                    msgType: msg.msgType,
                    msgData: msg.msgData
                };
                var targetConnectionObj = {};

                async.waterfall([
                    function(asyncCallback) {
                        // getting connection object for targetEasyrtcid
                        connectionObj.getApp().connection(msg.targetEasyrtcid, asyncCallback);
                    },
                    function(newTargetConnectionObj, asyncCallback) {
                        targetConnectionObj = newTargetConnectionObj;

                        // TODO: Add option to restrict users not in same room from sending messages to users in room

                        // Handle targetRoom (if present)
                        if (msg.targetRoom) {
                            targetConnectionObj.isInRoom(msg.targetRoom, function(err, isAllowed){
                                if (err || !isAllowed) {
                                    pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, pub.util.getErrorMsg(&#x22;MSG_REJECT_TARGET_ROOM
&#x22;), appObj);
                                    pub.util.logWarning(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] EasyRTC
 message received with improper target room&#x22;, msg);
                                    return;
                                }
                                outgoingMsg.targetRoom = msg.targetRoom;
                                asyncCallback(null);
                            });
                        }
                        else {
                            asyncCallback(null);
                        }
                    },

                    function(asyncCallback) {
                        // Handle targetGroup (if present) ...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_default_event_listeners.onEmitEasyrtcCmd" id="apidoc.element.easyrtc.easyrtc_default_event_listeners.onEmitEasyrtcCmd">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_default_event_listeners.</span>onEmitEasyrtcCmd
        <span class="apidocSignatureSpan">(connectionObj, msgType, msg, socketCallback, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onEmitEasyrtcCmd = function (connectionObj, msgType, msg, socketCallback, next){
    if (!_.isObject(connectionObj)){
        next(new pub.util.ConnectionError(&#x22;Connection object invalid. Client may have disconnected.&#x22;));
        return;
    }

    var easyrtcid = connectionObj.getEasyrtcid();
    var appName = connectionObj.getAppName();

    pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] Running func &#x27;onEmitEasyrtcCmd&#x27; with msgType
 [&#x22;+msgType+&#x22;]&#x22;);
    if (!msg) {
        msg = {};
    }
    if(!_.isFunction(socketCallback)) {
        socketCallback = function(returnMsg) {
            if (_.isObject(returnMsg) &#x26;&#x26; _.isString(returnMsg.msgType) &#x26;&#x26; returnMsg.msgType == &#x22;ack&#x22;){
                // pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] EasyRTC message: unhandled
 Ack return message.&#x22;);
            }
            else {
                pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] EasyRTC message: unhandled
 return message.&#x22;, returnMsg);
            }
        };
    }

    msg.easyrtcid   = connectionObj.getEasyrtcid();
    msg.msgType     = msgType;
    msg.serverTime  = Date.now();

    connectionObj.socket.emit( &#x22;easyrtcCmd&#x22;, msg, socketCallback);

    if (pub.getOption(&#x22;logMessagesEnable&#x22;)) {
        try {
            pub.util.logDebug(&#x22;[&#x22;+appName+&#x22;][&#x22;+easyrtcid+&#x22;] Sending socket.io message: [&#x22;+JSON.stringify(msg)+&#x22;]&#x22;);
        }
        catch(err) {
            pub.util.logDebug(&#x22;[&#x22;+appName+&#x22;][&#x22;+easyrtcid+&#x22;] Sending socket.io message&#x22;);
        }
    }

    next(null);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_default_event_listeners.onEmitEasyrtcMsg" id="apidoc.element.easyrtc.easyrtc_default_event_listeners.onEmitEasyrtcMsg">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_default_event_listeners.</span>onEmitEasyrtcMsg
        <span class="apidocSignatureSpan">(connectionObj, msgType, msg, socketCallback, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onEmitEasyrtcMsg = function (connectionObj, msgType, msg, socketCallback, next){
    if (!_.isObject(connectionObj)){
        next(new pub.util.ConnectionError(&#x22;Connection object invalid. Client may have disconnected.&#x22;));
        return;
    }

    var easyrtcid = connectionObj.getEasyrtcid();
    var appName = connectionObj.getAppName();

    pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] Running func &#x27;onEmitEasyrtcMsg&#x27; with msgType
 [&#x22;+msgType+&#x22;]&#x22;);


    if (!msg) {
        msg = {};
    }
    if(!_.isFunction(socketCallback)) {
        socketCallback = function(returnMsg) {
            if (_.isObject(returnMsg) &#x26;&#x26; _.isString(returnMsg.msgType) &#x26;&#x26; returnMsg.msgType == &#x22;ack&#x22;){
                // pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] EasyRTC message: unhandled
 Ack return message.&#x22;);
            }
            else {
                pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] EasyRTC message: unhandled
 return message.&#x22;, returnMsg);
            }
        };
    }
    msg.easyrtcid   = connectionObj.getEasyrtcid();
    msg.msgType     = msgType;
    msg.serverTime  = Date.now();

    connectionObj.socket.emit( &#x22;easyrtcMsg&#x22;, msg, socketCallback);

    if (pub.getOption(&#x22;logMessagesEnable&#x22;)) {
        try {
            pub.util.logDebug(&#x22;[&#x22;+appName+&#x22;][&#x22;+easyrtcid+&#x22;] Sending socket.io message: [&#x22;+JSON.stringify(msg)+&#x22;]&#x22;);
        }
        catch(err) {
            pub.util.logDebug(&#x22;[&#x22;+appName+&#x22;][&#x22;+easyrtcid+&#x22;] Sending socket.io message&#x22;);
        }
    }

    next(null);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_default_event_listeners.onEmitError" id="apidoc.element.easyrtc.easyrtc_default_event_listeners.onEmitError">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_default_event_listeners.</span>onEmitError
        <span class="apidocSignatureSpan">(connectionObj, errorCode, socketCallback, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onEmitError = function (connectionObj, errorCode, socketCallback, next){
    pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] Running func &#x27;onEmitError&#x27;&#x22;);
    if(!_.isFunction(socketCallback)) {
        socketCallback = function(returnMsg) {
            pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] EasyRTC info: unhandled ACK return
 message.&#x22;, returnMsg);
        };
    }
    if(!_.isFunction(next)) {
        next = pub.util.nextToNowhere;
    }

    pub.events.emit(&#x22;emitEasyrtcCmd&#x22;, connectionObj, &#x22;error&#x22;, pub.util.getErrorMsg(errorCode), socketCallback, next);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_default_event_listeners.onEmitReturnAck" id="apidoc.element.easyrtc.easyrtc_default_event_listeners.onEmitReturnAck">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_default_event_listeners.</span>onEmitReturnAck
        <span class="apidocSignatureSpan">(connectionObj, socketCallback, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onEmitReturnAck = function (connectionObj, socketCallback, next){
    var easyrtcid = connectionObj.getEasyrtcid();
    var appObj = connectionObj.getApp();

    pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] Running func &#x27;onEmitReturnAck&#x27;&#x22;);
    if(!_.isFunction(socketCallback)) {
        pub.util.logWarning(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] EasyRTC: unable to return ack to
 socket.&#x22;);
        return;
    }
    if(!_.isFunction(next)) {
        next = pub.util.nextToNowhere;
    }

    var msg = {
        msgType: &#x22;ack&#x22;,
        msgData:{}
    };

    pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, msg, appObj);

    next(null);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_default_event_listeners.onEmitReturnError" id="apidoc.element.easyrtc.easyrtc_default_event_listeners.onEmitReturnError">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_default_event_listeners.</span>onEmitReturnError
        <span class="apidocSignatureSpan">(connectionObj, socketCallback, errorCode, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onEmitReturnError = function (connectionObj, socketCallback, errorCode, next){
    var easyrtcid = connectionObj.getEasyrtcid();
    var appObj = connectionObj.getApp();

    pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] Running func &#x27;onEmitReturnError&#x27;&#x22;);
    if(!_.isFunction(socketCallback)) {
        pub.util.logWarning(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] EasyRTC: unable to return error
to socket. Error code was [&#x22; + errorCode + &#x22;]&#x22;);

        next(new pub.util.ConnectionError(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] Unable to return error
 to socket. Error code was [&#x22; + errorCode + &#x22;]&#x22;));
        return;
    }
    if(!_.isFunction(next)) {
        next = pub.util.nextToNowhere;
    }

    var msg = pub.util.getErrorMsg(errorCode);

    pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, msg, appObj);

    next(null);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_default_event_listeners.onEmitReturnToken" id="apidoc.element.easyrtc.easyrtc_default_event_listeners.onEmitReturnToken">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_default_event_listeners.</span>onEmitReturnToken
        <span class="apidocSignatureSpan">(connectionObj, socketCallback, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onEmitReturnToken = function (connectionObj, socketCallback, next){
    var easyrtcid = connectionObj.getEasyrtcid();
    var appObj = connectionObj.getApp();

    pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] Running func &#x27;onSendToken&#x27;&#x22;);

    var tokenMsg = {
        msgType: &#x22;token&#x22;,
        msgData:{}
    };

    // Ensure socketCallback is present
    if(!_.isFunction(socketCallback)) {
        pub.util.logWarning(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] EasyRTC onSendToken called with
no socketCallback.&#x22;);
        try{connectionObj.socket.disconnect();}catch(e){}
        return;
    }

    async.waterfall([
        function(asyncCallback){
            // Get rooms user is in along with list
            connectionObj.generateRoomClientList(&#x22;join&#x22;, null, asyncCallback);
        },
        function(roomData, asyncCallback) {
            // Set roomData
            tokenMsg.msgData.roomData = roomData;

            // Retrieve ice config
            connectionObj.events.emit(&#x22;getIceConfig&#x22;, connectionObj, asyncCallback);
        },

        function(iceServers, asyncCallback) {
            tokenMsg.msgData.application        = {applicationName:connectionObj.getAppName()};
            tokenMsg.msgData.easyrtcid          = connectionObj.getEasyrtcid();
            tokenMsg.msgData.iceConfig          = {iceServers: iceServers};
            tokenMsg.msgData.serverTime         = Date.now();

            easyrtcid = tokenMsg.msgData.easyrtcid;

            // Get Application fields
            appObj.getFields(true, asyncCallback);
        },

        function(fieldObj, asyncCallback) {
            if (!_.isEmpty(fieldObj)){
                tokenMsg.msgData.application.field = fieldObj;
            }

            // Get Connection fields
            connectionObj.getFields(true, asyncCallback);
        },

        function(fieldObj, asyncCallback) {
            if (!_.isEmpty(fieldObj)){
                tokenMsg.msgData.field = fieldObj;
            }

            // get session object
            connectionObj.getSessionObj(asyncCallback);
        },

        function(sessionObj, asyncCallback) {
            if (sessionObj) {
                tokenMsg.msgData.sessionData = {&#x22;easyrtcsid&#x22;:sessionObj.getEasyrtcsid()};

                // Get session fields
                sessionObj.getFields(true, asyncCallback);
            }
            else {
                asyncCallback(null, null);
            }
        },

        function(fieldObj, asyncCallback) {
            // Set session field (if present)
            if (fieldObj &#x26;&#x26; !_.isEmpty(fieldObj)){
                tokenMsg.msgData.sessionData.field = fieldObj;
            }

            // Emit token back to socket (SUCCESS!)
            pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, tokenMsg, appObj);

            asyncCallback(null);
        }

    ],
    // This function is called upon completion of the async waterfall, or upon an error being thrown.
    function (err) {
        if (err){
            next(err);
        } else {
            next(null);
        }
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_default_event_listeners.onGetIceConfig" id="apidoc.element.easyrtc.easyrtc_default_event_listeners.onGetIceConfig">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_default_event_listeners.</span>onGetIceConfig
        <span class="apidocSignatureSpan">(connectionObj, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onGetIceConfig = function (connectionObj, callback){
    pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] Running func &#x27;onGetIceConfig&#x27;&#x22;);
    callback(null, connectionObj.getApp().getOption(&#x22;appIceServers&#x22;));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_default_event_listeners.onLog" id="apidoc.element.easyrtc.easyrtc_default_event_listeners.onLog">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_default_event_listeners.</span>onLog
        <span class="apidocSignatureSpan">(level, logText, logFields, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onLog = function (level, logText, logFields, next) {
    if(!_.isFunction(next)) {
        next = pub.util.nextToNowhere;
    }

    var consoleText = &#x22;&#x22;;

    var currentDate = new Date();
    if (pub.getOption(&#x22;logColorEnable&#x22;)) {
        var colors = require(&#x22;colors&#x22;);
        if(pub.getOption(&#x22;logDateEnable&#x22;)) {
            consoleText += currentDate.toISOString().grey + &#x22; - &#x22;;
        }
        switch (level) {
            case &#x22;debug&#x22;:
                consoleText += &#x22;debug  &#x22;.bold.blue;
                break;
            case &#x22;info&#x22;:
                consoleText += &#x22;info   &#x22;.bold.green;
                break;
            case &#x22;warning&#x22;:
                consoleText += &#x22;warning&#x22;.bold.yellow;
                break;
            case &#x22;error&#x22;:
                consoleText += &#x22;error  &#x22;.bold.red;
                break;
            default:
                consoleText += level.bold;
        }
        consoleText += &#x22; - &#x22; + &#x22;EasyRTC: &#x22;.bold + logText;
    }
    else {
        if(pub.getOption(&#x22;logDateEnable&#x22;)) {
            consoleText += currentDate.toISOString() + &#x22; - &#x22;;
        }
        consoleText += level;
        consoleText += &#x22; - &#x22; + &#x22;EasyRTC: &#x22; + logText;
    }

    if (logFields != undefined &#x26;&#x26; logFields != null) {
        if (pub.getOption(&#x22;logErrorStackEnable&#x22;) &#x26;&#x26; pub.util.isError(logFields)) {
            console.log(consoleText, ((pub.getOption(&#x22;logColorEnable&#x22;))? &#x22;\nStack Trace:\n------------\n&#x22;.bold + logFields.stack
.magenta + &#x22;\n------------&#x22;.bold : &#x22;\nStack Trace:\n------------\n&#x22; + logFields.stack + &#x22;\n------------&#x22;));
        }
        else if (pub.getOption(&#x22;logWarningStackEnable&#x22;) &#x26;&#x26; pub.util.isWarning(logFields)) {
            console.log(consoleText, ((pub.getOption(&#x22;logColorEnable&#x22;))? &#x22;\nStack Trace:\n------------\n&#x22;.bold + logFields.stack
.cyan + &#x22;\n------------&#x22;.bold : &#x22;\nStack Trace:\n------------\n&#x22; + logFields.stack + &#x22;\n------------&#x22;));
        }
        else {
            console.log(consoleText, util.inspect(logFields, {colors:pub.getOption(&#x22;logColorEnable&#x22;), showHidden:false, depth:pub
.getOption(&#x22;logObjectDepth&#x22;)}));
        }
    } else {
        console.log(consoleText);
    }
    next(null);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_default_event_listeners.onMsgTypeGetIceConfig" id="apidoc.element.easyrtc.easyrtc_default_event_listeners.onMsgTypeGetIceConfig">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_default_event_listeners.</span>onMsgTypeGetIceConfig
        <span class="apidocSignatureSpan">(connectionObj, socketCallback, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onMsgTypeGetIceConfig = function (connectionObj, socketCallback, next){
    var easyrtcid = connectionObj.getEasyrtcid();
    var appObj = connectionObj.getApp();

    pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] Running func &#x27;onMsgTypeGetIceConfig&#x27;&#x22;);

    if(!_.isFunction(socketCallback)) {
        socketCallback = function(returnMsg) {
            pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] EasyRTC info: unhandled ACK return
 message.&#x22;, returnMsg);
        };
    }

    if(!_.isFunction(next)) {
        next = pub.util.nextToNowhere;
    }

    connectionObj.events.emit(&#x22;getIceConfig&#x22;, connectionObj, function(err, iceConfigObj){
        if (err) {
            pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, pub.util.getErrorMsg(&#x22;MSG_REJECT_GEN_FAIL&#x22;), appObj);
        }
        else {
            pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, {&#x22;msgType&#x22;:&#x22;iceConfig&#x22;, &#x22;msgData&#x22;:{&#x22;iceConfig&#x22;:{&#x22;iceServers
&#x22;:iceConfigObj}}}, appObj);
        }
        next(null);
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_default_event_listeners.onMsgTypeGetRoomList" id="apidoc.element.easyrtc.easyrtc_default_event_listeners.onMsgTypeGetRoomList">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_default_event_listeners.</span>onMsgTypeGetRoomList
        <span class="apidocSignatureSpan">(connectionObj, socketCallback, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onMsgTypeGetRoomList = function (connectionObj, socketCallback, next){
    var easyrtcid = connectionObj.getEasyrtcid();
    var appObj = connectionObj.getApp();

    pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] Running func &#x27;onMsgTypeGetRoomList&#x27;&#x22;);

    if(!_.isFunction(socketCallback)) {
        socketCallback = function(returnMsg) {
            pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] EasyRTC info: unhandled ACK return
 message.&#x22;, returnMsg);
        };
    }

    if(!_.isFunction(next)) {
        next = pub.util.nextToNowhere;
    }

    connectionObj.generateRoomList(
        function(err, roomList) {
            if(err) {
                pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, pub.util.getErrorMsg(&#x22;MSG_REJECT_NO_ROOM_LIST&#x22;), appObj
);
            }
            else {
                pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, {&#x22;msgType&#x22;:&#x22;roomList&#x22;, &#x22;msgData&#x22;:{&#x22;roomList&#x22;:roomList}},
appObj);
            }
            next(null);
        }
    );
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_default_event_listeners.onMsgTypeRoomJoin" id="apidoc.element.easyrtc.easyrtc_default_event_listeners.onMsgTypeRoomJoin">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_default_event_listeners.</span>onMsgTypeRoomJoin
        <span class="apidocSignatureSpan">(connectionObj, rooms, socketCallback, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onMsgTypeRoomJoin = function (connectionObj, rooms, socketCallback, next){
    var easyrtcid = connectionObj.getEasyrtcid();
    var appObj = connectionObj.getApp();

    pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] Running func &#x27;onMsgTypeRoomJoin&#x27;&#x22;);
    if(!_.isFunction(socketCallback)) {
        pub.util.logWarning(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] EasyRTC info: unhandled socket message
 callback.&#x22;);
        return;
    }

    if(!_.isFunction(next)) {
        next = pub.util.nextToNowhere;
    }

    if(!_.isObject(rooms) || _.isEmpty(rooms)) {
        pub.events.emit(&#x22;emitReturnError&#x22;, socketCallback, &#x22;MSG_REJECT_BAD_STRUCTURE&#x22;, pub.util.nextToNowhere);
        return;
    }

    for (var currentRoomName in rooms) {
        if (!_.isString(currentRoomName) || !connectionObj.getApp().getOption(&#x22;roomNameRegExp&#x22;).test(currentRoomName)) {
            pub.events.emit(&#x22;emitReturnError&#x22;, socketCallback, &#x22;MSG_REJECT_TARGET_ROOM&#x22;, pub.util.nextToNowhere);
            return;
        }
    }

    async.each(Object.keys(rooms), function(currentRoomName, roomCallback) {
        appObj.isRoom(currentRoomName, function(err, isRoom){

            // Set roomParameter map. This may be used by custom listeners.
            var currentRoomParameter;
            if (rooms[currentRoomName] &#x26;&#x26; _.isObject(rooms[currentRoomName].roomParameter)){
                currentRoomParameter = rooms[currentRoomName].roomParameter;
            }

            if (isRoom) {
                pub.events.emit(&#x22;roomJoin&#x22;, connectionObj, currentRoomName, currentRoomParameter, roomCallback);
            }
            else if (appObj.getOption(&#x22;roomAutoCreateEnable&#x22;)) {
                pub.events.emit(&#x22;roomCreate&#x22;, appObj, connectionObj, currentRoomName, null, function(err, roomObj){
                    if (err) {
                        roomCallback(err);
                        return;
                    }
                    pub.events.emit(&#x22;roomJoin&#x22;, connectionObj, currentRoomName, currentRoomParameter, roomCallback);
                });
            }
            else {
                pub.util.logWarning(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;][&#x22;+currentRoomName+&#x22;] Unable
 to join non-existent room.&#x22;);
                roomCallback(new pub.util.ConnectionError(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;][&#x22;+
currentRoomName+&#x22;] Unable to join room.&#x22;));
            }
        });
    }, function(err, newRoomObj) {
        if (err) {
            pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, pub.util.getErrorMsg(&#x22;MSG_REJECT_BAD_ROOM&#x22;), appObj);
            next(null); // Error has been handled
            return;
        }

        connectionObj.generateRoomClientList(&#x22;join&#x22;, rooms, function(err, roomData){
            if (err) {
                pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, pub.util.getErrorMsg(&#x22;MSG_REJECT_BAD_ROOM&#x22;), appObj);
                next(null); // Error has been handled
            }
            else {
                pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, {&#x22;msgType&#x22;:&#x22;roomData&#x22;, &#x22;msgData&#x22;:{&#x22;roomData&#x22;:roomData}},
appObj);
            }
        });
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_default_event_listeners.onMsgTypeRoomLeave" id="apidoc.element.easyrtc.easyrtc_default_event_listeners.onMsgTypeRoomLeave">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_default_event_listeners.</span>onMsgTypeRoomLeave
        <span class="apidocSignatureSpan">(connectionObj, rooms, socketCallback, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onMsgTypeRoomLeave = function (connectionObj, rooms, socketCallback, next){
    var easyrtcid = connectionObj.getEasyrtcid();
    var appObj = connectionObj.getApp();

    pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] Running func &#x27;onMsgTypeRoomLeave&#x27; with
 rooms: &#x22;,rooms);
    if(!_.isFunction(socketCallback)) {
        socketCallback = function(returnMsg) {
            pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] EasyRTC info: unhandled ACK return
 message.&#x22;, returnMsg);
        };
    }

    if(!_.isFunction(next)) {
        next = pub.util.nextToNowhere;
    }

    // Loop through each room in the rooms object. Emit the leaveRoom event for each one.
    async.each(Object.keys(rooms), function(currentRoomName, asyncCallback) {
        connectionObj.events.emit(&#x22;roomLeave&#x22;, connectionObj, currentRoomName, function(err){
            if (err) {
                pub.util.logWarning(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] Error leaving room [&#x22;+currentRoomName
+&#x22;].&#x22;, err);
            }
            asyncCallback(null);
        });
    }, function(err, newRoomObj) {
        var roomData = {};
        for (var currentRoomName in rooms) {
            roomData[currentRoomName]={
                &#x22;roomName&#x22;:     currentRoomName,
                &#x22;roomStatus&#x22;:   &#x22;leave&#x22;
            };
        }
        pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, {&#x22;msgType&#x22;:&#x22;roomData&#x22;, &#x22;msgData&#x22;:{&#x22;roomData&#x22;:roomData}}, appObj
);
        next(null);
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_default_event_listeners.onMsgTypeSetPresence" id="apidoc.element.easyrtc.easyrtc_default_event_listeners.onMsgTypeSetPresence">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_default_event_listeners.</span>onMsgTypeSetPresence
        <span class="apidocSignatureSpan">(connectionObj, presenceObj, socketCallback, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onMsgTypeSetPresence = function (connectionObj, presenceObj, socketCallback, next){
    var easyrtcid = connectionObj.getEasyrtcid();
    var appObj = connectionObj.getApp();

    pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] Running func &#x27;onMsgTypeSetPresence&#x27; with
 setPresence: &#x22;,presenceObj);
    if(!_.isFunction(socketCallback)) {
        socketCallback = function(returnMsg) {
            pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] EasyRTC info: unhandled ACK return
 message.&#x22;, returnMsg);
        };
    }

    if(!_.isFunction(next)) {
        next = pub.util.nextToNowhere;
    }

    connectionObj.setPresence(
        presenceObj,
        function(err){
            if (err) {
                pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, pub.util.getErrorMsg(&#x22;MSG_REJECT_PRESENCE&#x22;), appObj);
            }
            else {
                connectionObj.emitRoomDataDelta(false, function(err, roomDataObj){
                    if (err) {
                        pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, pub.util.getErrorMsg(&#x22;MSG_REJECT_PRESENCE&#x22;), appObj
);
                    }
                    else {
                        pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, {&#x22;msgType&#x22;:&#x22;roomData&#x22;, &#x22;msgData&#x22;:{&#x22;roomData&#x22;:roomDataObj
}}, appObj);
                    }
                });
            }
            next(null);
        }
    );
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_default_event_listeners.onMsgTypeSetRoomApiField" id="apidoc.element.easyrtc.easyrtc_default_event_listeners.onMsgTypeSetRoomApiField">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_default_event_listeners.</span>onMsgTypeSetRoomApiField
        <span class="apidocSignatureSpan">(connectionObj, roomApiFieldObj, socketCallback, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onMsgTypeSetRoomApiField = function (connectionObj, roomApiFieldObj, socketCallback, next){
    var easyrtcid = connectionObj.getEasyrtcid();
    var appObj = connectionObj.getApp();

    pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] Running func &#x27;onMsgTypeSetRoomApiField
&#x27; with apiFieldObj: &#x22;,roomApiFieldObj);
    if(!_.isFunction(socketCallback)) {
        socketCallback = function(returnMsg) {
            pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] EasyRTC info: unhandled ACK return
 message.&#x22;, returnMsg);
        };
    }

    if(!_.isFunction(next)) {
        next = pub.util.nextToNowhere;
    }

    connectionObj.room(roomApiFieldObj.roomName, function(err, connectionRoomObj){
        if (err) {
            pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, pub.util.getErrorMsg(&#x22;MSG_REJECT_BAD_ROOM&#x22;), appObj);
            next(null);
            return;
        }
        connectionRoomObj.setApiField(roomApiFieldObj.field, function(err){
            if (err) {
                pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, pub.util.getErrorMsg(&#x22;MSG_REJECT_BAD_FIELD&#x22;), appObj);
                next(null);
                return;
            }
            connectionRoomObj.emitRoomDataDelta(false, function(err, roomDataDelta){
                if (err) {
                    pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, pub.util.getErrorMsg(&#x22;MSG_REJECT_GEN_FAIL&#x22;), appObj
);
                    next(null);
                    return;
                }

                var msg = {&#x22;msgType&#x22;:&#x22;roomData&#x22;, &#x22;msgData&#x22;: {&#x22;roomData&#x22;: {}}};
                msg.msgData.roomData[roomApiFieldObj.roomName] = roomDataDelta;
                pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, msg, appObj);
            });
        });
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_default_event_listeners.onRoomCreate" id="apidoc.element.easyrtc.easyrtc_default_event_listeners.onRoomCreate">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_default_event_listeners.</span>onRoomCreate
        <span class="apidocSignatureSpan">(appObj, creatorConnectionObj, roomName, roomOptions, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onRoomCreate = function (appObj, creatorConnectionObj, roomName, roomOptions, callback){
    pub.util.logDebug(&#x22;[&#x22;+appObj.getAppName()+&#x22;]&#x22; + (creatorConnectionObj?&#x22;[&#x22;+creatorConnectionObj.getEasyrtcid()+&#x22;]&#x22;:&#x22;&#x22;) +  &#x22; Room
 [&#x22;+ roomName +&#x22;] Running func &#x27;onRoomCreate&#x27;&#x22;);
    appObj.createRoom(roomName, roomOptions, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_default_event_listeners.onRoomJoin" id="apidoc.element.easyrtc.easyrtc_default_event_listeners.onRoomJoin">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_default_event_listeners.</span>onRoomJoin
        <span class="apidocSignatureSpan">(connectionObj, roomName, roomParameter, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onRoomJoin = function (connectionObj, roomName, roomParameter, callback){
    pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] Running func &#x27;onRoomJoin&#x27;&#x22;);

    // roomParameter is a new field. To ease upgrading we&#x27;ll just show a warning to server applications which haven&#x27;t updated
    if (_.isFunction(roomParameter)){
        pub.util.logWarning(&#x22;Upgrade notice: EasyRTC roomJoin event called without roomParameter object.&#x22;);
        callback = roomParameter;
        roomParameter = null;
    }

    connectionObj.joinRoom(roomName, function(err, connectionRoomObj){
        if (err) {
            callback(err);
            return;
        }
        connectionRoomObj.emitRoomDataDelta(false, function(err, roomDataDelta){
            // Return connectionRoomObj regardless of if there was a problem sending out the deltas
            callback(null, connectionRoomObj);
        });
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_default_event_listeners.onRoomLeave" id="apidoc.element.easyrtc.easyrtc_default_event_listeners.onRoomLeave">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_default_event_listeners.</span>onRoomLeave
        <span class="apidocSignatureSpan">(connectionObj, roomName, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onRoomLeave = function (connectionObj, roomName, next){
    pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] Running func &#x27;onRoomLeave&#x27; with rooms [&#x22;+
roomName+&#x22;]&#x22;);

    if(!_.isFunction(next)) {
        next = pub.util.nextToNowhere;
    }

    connectionObj.room(roomName, function(err, connectionRoomObj){
        if (err) {
            pub.util.logWarning(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] Couldn&#x27;t leave room [&#x22; + roomName
 + &#x22;]&#x22;);
            next(err);
            return;
        }

        pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] Leave room [&#x22; + roomName + &#x22;]&#x22;);
        connectionRoomObj.leaveRoom(next);
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_default_event_listeners.onShutdown" id="apidoc.element.easyrtc.easyrtc_default_event_listeners.onShutdown">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_default_event_listeners.</span>onShutdown
        <span class="apidocSignatureSpan">(next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onShutdown = function (next){
    pub.util.logDebug(&#x22;Running func &#x27;onShutdown&#x27;&#x22;);
    next(null);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_default_event_listeners.onStartup" id="apidoc.element.easyrtc.easyrtc_default_event_listeners.onStartup">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_default_event_listeners.</span>onStartup
        <span class="apidocSignatureSpan">(next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onStartup = function (next){
    if (!_.isFunction(next)) {
        next = pub.util.nextToNowhere;
    }

    pub.util.logDebug(&#x22;Running func &#x27;onStartup&#x27;&#x22;);
    async.waterfall([
        function(callback) {
            pub.util.logDebug(&#x22;Configuring Http server&#x22;);

            // Set the EasyRTC demos
            if (pub.getOption(&#x22;demosEnable&#x22;)) {
                pub.util.logDebug(&#x22;Setting up demos to be accessed from &#x27;&#x22; + pub.getOption(&#x22;demosPublicFolder&#x22;) + &#x22;/&#x27;&#x22;);
                pub.httpApp.get(pub.getOption(&#x22;demosPublicFolder&#x22;) + &#x22;/*&#x22;, function(req, res) {
                    (res.sendFile||res.sendfile).call(res,
                        &#x22;./demos/&#x22; + (req.params[0] ? req.params[0] : &#x22;index.html&#x22;),
                        // TODO security check
                        {root:__dirname + &#x22;/../&#x22;},
                        function(err) {
                            try{if (err &#x26;&#x26; err.status &#x26;&#x26; res &#x26;&#x26; !res._headerSent) {
                                res.status(404);
                                var body =    &#x22;&#x3c;html&#x3e;&#x3c;head&#x3e;&#x3c;title&#x3e;File Not Found&#x3c;/title&#x3e;&#x3c;/head&#x3e;&#x3c;body&#x3e;&#x3c;h1&#x3e;File Not Found&#x3c;/h1&#x3e;&#x3c;/body
&#x3e;&#x3c;/html&#x3e;&#x22;;
                                res.setHeader(&#x22;Content-Type&#x22;, &#x22;text/html&#x22;);
                                res.setHeader(&#x22;Content-Length&#x22;, body.length);
                                res.end(body);
                            }}catch(e){}
                        }
                    );
                });
                // Forward people who forget the trailing slash to the folder.
                pub.httpApp.get(pub.getOption(&#x22;demosPublicFolder&#x22;), function(req, res) {res.redirect(pub.getOption(&#x22;demosPublicFolder
&#x22;) + &#x22;/&#x22;);});
            }

            if (pub.getOption(&#x22;apiEnable&#x22;)) {
                // Set the EasyRTC API files
                pub.util.logDebug(&#x22;Setting up API files to be accessed from &#x27;&#x22; + pub.getOption(&#x22;apiPublicFolder&#x22;) + &#x22;/&#x27;&#x22;);
                pub.httpApp.get(pub.getOption(&#x22;apiPublicFolder&#x22;) + &#x22;/easyrtc.js&#x22;,                  function(req, res) {pub.util.
sendSessionCookie(req, res); (res.sendFile||res.sendfile).call(res,&#x22;api/easyrtc.js&#x22;,                   {root:__dirname + &#x22;/../&#x22;});});
                pub.httpApp.get(pub.getOption(&#x22;apiPublicFolder&#x22;) + &#x22;/easyrtc_ft.js&#x22;,               function(req, res) {pub.util.
sendSessionCookie(req, res); (res.sendFile||res.sendfile).call(res,&#x22;api/easyrtc_ft.js&#x22;,                {root:__dirname + &#x22;/../&#x22;});});
                pub.httpApp.get(pub.getOption(&#x22;apiPublicFolder&#x22;) + &#x22;/easyrtc.css&#x22;,                 function(req, res) {pub.util.
sendSessionCookie(req, res); (res.sendFile||res.sendfile).call(res,&#x22;api/easyrtc.css&#x22;,                  {root:__dirname + &#x22;/../&#x22;});});
                pub.httpApp.get(pub.getOption(&#x22;apiPublicFolder&#x22;) + &#x22;/easyrtc.min.js&#x22;,              function(req, res) {pub.util.
sendSessionCookie(req, res); (res.sendFile||res.sendfile).call(res,&#x22;open_source/api/easyrtc.min.js&#x22;,   {root:__dirname + &#x22;/../&#x22;});});
                pub.httpApp.get(pub.getOption(&#x22;apiPublicFolder&#x22;) + &#x22;/easyrtc_ft.min.js&#x22;,           function(req, res) {pub.util.
sendSessionCookie(req, res); (res.sendFile||res.sendfile).call(res,&#x22;api/easyrtc_ft.min.js&#x22;,            {root:__dirname + &#x22;/../&#x22;});});
                pub.httpApp.get(pub.getOption(&#x22;apiPublicFolder&#x22;) + &#x22;/easyrtc.min.css&#x22;,             function(req, res) {pub.util.
sendSessionCookie(req, res); (res.sendFile||res.sendfile).call(res,&#x22;open_source/api/easyrtc.min.css&#x22;,  {root:__dirname + &#x22;/../&#x22;});});
                pub.httpApp.get(pub.getOption(&#x22;apiPublicFolder&#x22;) + &#x22;/img/*&#x22;, function(req, res) {
                    pub.util.sendSessionCookie(req, res);
                    (res.sendFile||res.sendfile).call(res,
                        &#x22;./api/img/&#x22; + (req.params[0] ? req.params[0] : &#x22;index.html&#x22;),
                        {root:__dirname + &#x22;/../&#x22;},
                        function(err) {
                            try{if (err &#x26;&#x26; err.status &#x26;&#x26; res &#x26;&#x26; !res._headerSent) {
                                res.status(404);
                                var body =    &#x22;&#x3c;html&#x3e;&#x3c;head&#x3e;&#x3c;title&#x3e;File Not Found&#x3c;/title&#x3e;&#x3c;/head&#x3e;&#x3c;body&#x3e;&#x3c;h1&#x3e;File ...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.easyrtc.easyrtc_public_obj" id="apidoc.module.easyrtc.easyrtc_public_obj">module easyrtc.easyrtc_public_obj</a></h1>


    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_public_obj._getPrivateObj" id="apidoc.element.easyrtc.easyrtc_public_obj._getPrivateObj">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_public_obj.</span>_getPrivateObj
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_getPrivateObj = function () {
    return e;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_public_obj.app" id="apidoc.element.easyrtc.easyrtc_public_obj.app">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_public_obj.</span>app
        <span class="apidocSignatureSpan">(appName, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">app = function (appName, callback) {

    /**
     * The primary method for interfacing with an EasyRTC application.
     *
     * @class       appObj
     * @memberof    pub
     */
    var appObj = {};
    if (!appName) {
        appName = pub.getOption(&#x22;appDefaultName&#x22;);
    }
    if (!_.isFunction(callback)) {
        callback = function(err, appObj) {
        };
    }
    if (!e.app[appName]) {
        pub.util.logDebug(&#x22;Attempt to request non-existent application name: &#x27;&#x22; + appName + &#x22;&#x27;&#x22;);
        callback(new pub.util.ApplicationWarning(&#x22;Attempt to request non-existent application name: &#x27;&#x22; + appName + &#x22;&#x27;&#x22;));
        return;
    }


    /**
     * Expose all event functions
     *
     * @memberof    pub.appObj
     */
    appObj.events = pub.events;


    /**
     * Expose all utility functions
     *
     * @memberof    pub.appObj
     */
    appObj.util = pub.util;


    /**
     * Returns the application name for the application. Note that unlike most EasyRTC functions, this returns a value and does
not use a callback.
     *
     * @memberof    pub.appObj
     * @return      {string}    The application name.
     */
    appObj.getAppName = function() {
        return appName;
    };


    /**
     * Sends the count of the number of connections in the app to a provided callback.
     *
     * @memberof    pub.appObj
     * @param       {function(?Error, Number)} callback Callback with error and array containing all easyrtcids.
     */
    appObj.getConnectionCount = function(callback) {
        callback(null, appObj.getConnectionCountSync());
    };


    /**
     * Sends the count of the number of connections in the app to a provided callback.
     *
     * @memberof    pub.appObj
     * @returns     {Number} The current number of connections in a room.
     */
    appObj.getConnectionCountSync = function() {
        return _.size(e.app[appName].connection);
    };


    /**
     * Returns an array of all easyrtcids connected to the application
     *
     * @memberof    pub.appObj
     * @param       {function(?Error, Array.&#x3c;string&#x3e;)} callback Callback with error and array of easyrtcids.
     */
    appObj.getConnectionEasyrtcids = function(callback) {
        var easyrtcids = [];
        for (var key in e.app[appName].connection) {
            easyrtcids.push(key);
        }
        callback(null, easyrtcids);
    };


    /**
     * Returns application level field object for a given field name to a provided callback.
     *
     * @memberof    pub.appObj
     * @param       {string}        fieldName   Field name
     * @param       {function(?Error, Object=)} callback Callback with error and field object (any type)
     */
    appObj.getField = function(fieldName, callback) {
        if (!e.app[appName].field[fieldName]) {
            pub.util.logDebug(&#x22;Can not find app field: &#x27;&#x22; + fieldName + &#x22;&#x27;&#x22;);
            callback(new pub.util.ApplicationWarning(&#x22;Can not find app field: &#x27;&#x22; + fieldName + &#x22;&#x27;&#x22;));
            return;
        }
        callback(null, pub.util.deepCopy(e.app[appName].field[fieldName]));
    };


    /**
     * Returns application level field object for a given field name. If the field is not set, it will return a field object will
 a null field value.  This is a synchronous function, thus may not be available in custom cases where state is not kept in memory
.
     *
     * @memberof    pub.appObj
     * @param       {string}        fieldName   Field name
     * @returns     {Object}        Field object
     */
    appObj.getFieldSync = function(fieldName) {
        if (!e.app[appName].field[fieldName]) {
            return {&#x22;fieldName&#x22;: fieldName, &#x22;fieldOption&#x22;: {}, &#x22;fieldValue&#x22;: null};
        }
        return pub.util.deepCopy(e.app[appName].field[fieldName]);
    };


    /**
     * Returns application level field value for a given field name. If the field is not set, it will return a null field value.
This is a synchronous function, thus may not be available in custom ca ...</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    pub.isApp(newAppName, asyncCallback);

},

function(isApp, asyncCallback) {
    // If requested app exists, then call it, otherwise create it.
    if (isApp) {
        pub.<span class="apidocCodeKeywordSpan">app</span>(newAppName, asyncCallback);
    } else {
        // if appAutoCreateEnable is true, then a new app will be created using the default options
        if(pub.getOption(&#x22;appAutoCreateEnable&#x22;)) {
            pub.createApp(newAppName, null, asyncCallback);
        } else {
            pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, pub.util.getErrorMsg(&#x22;LOGIN_APP_AUTH_FAIL&#x22;), appObj
);
            socket.disconnect();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_public_obj.createApp" id="apidoc.element.easyrtc.easyrtc_public_obj.createApp">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_public_obj.</span>createApp
        <span class="apidocSignatureSpan">(appName, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">createApp = function (appName, options, callback) {
    if (!_.isFunction(callback)) {
        callback = function(err, appObj) {
        };
    }
    if (!appName || !pub.getOption(&#x22;appNameRegExp&#x22;).test(appName)) {
        pub.util.logWarning(&#x22;Can not create application with improper name: &#x27;&#x22; + appName + &#x22;&#x27;&#x22;);
        callback(new pub.util.ApplicationWarning(&#x22;Can not create application with improper name: &#x27;&#x22; + appName + &#x22;&#x27;&#x22;));
        return;
    }
    if (e.app[appName]) {
        pub.util.logWarning(&#x22;Can not create application which already exists: &#x27;&#x22; + appName + &#x22;&#x27;&#x22;);
        callback(new pub.util.ApplicationWarning(&#x22;Can not create application which already exists: &#x27;&#x22; + appName + &#x22;&#x27;&#x22;));
        return;
    }
    if (!_.isObject(options)) {
        options = {};
    }

    pub.util.logDebug(&#x22;Creating application: &#x27;&#x22; + appName + &#x22;&#x27;&#x22;);

    e.app[appName] = {
        appName: appName,
        connection: {},
        field: {},
        group: {},
        option: {},
        room: {},
        session: {}
    };

    // Get the new app object
    pub.app(appName, function(err, appObj) {
        if (err) {
            callback(err);
            return;
        }

        // Set all options in options object. If any fail, an error will be sent to the callback.
        async.each(Object.keys(options), function(currentOptionName, asyncCallback) {
            appObj.setOption(currentOptionName, options[currentOptionName]);
            asyncCallback(null);
        },
                function(err) {
                    if (err) {
                        callback(new pub.util.ApplicationError(&#x22;Could not set options when creating application: &#x27;&#x22; + appName + &#x22;&#x27;&#x22;,
err));
                        return;
                    }
                    // Set default application fields
                    var appDefaultFieldObj = appObj.getOption(&#x22;appDefaultFieldObj&#x22;);
                    if (_.isObject(appDefaultFieldObj)) {
                        for (var currentFieldName in appDefaultFieldObj) {
                            appObj.setField(
                                    currentFieldName,
                                    appDefaultFieldObj[currentFieldName].fieldValue,
                                    appDefaultFieldObj[currentFieldName].fieldOption,
                                    null
                                    );
                        }
                    }

                    if (appObj.getOption(&#x22;roomDefaultEnable&#x22;)) {
                        pub.events.emit(&#x22;roomCreate&#x22;, appObj, null, appObj.getOption(&#x22;roomDefaultName&#x22;), null, function(err, roomObj
){
                            if (err) {
                                callback(err);
                                return;
                            }
                            // Return app object to callback
                            callback(null, appObj);
                        });
                    }
                    else {
                        // Return app object to callback
                        callback(null, appObj);
                    }
                });
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
        {logLevel:&#x22;debug&#x22;, logDateEnable:true},
        function(err, rtc) {

            // After the server has started, we can still change the default room name
            rtc.setOption(&#x22;roomDefaultName&#x22;, &#x22;SectorZero&#x22;);

            // Creates a new application called MyApp with a default room named &#x22;SectorOne&#x22;.
            rtc.<span class="apidocCodeKeywordSpan">createApp</span>(
                &#x22;easyrtc.instantMessaging&#x22;,
                {&#x22;roomDefaultName&#x22;:&#x22;SectorOne&#x22;},
                myEasyrtcApp
            );
        }
);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_public_obj.getAppNames" id="apidoc.element.easyrtc.easyrtc_public_obj.getAppNames">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_public_obj.</span>getAppNames
        <span class="apidocSignatureSpan">(callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getAppNames = function (callback) {
    var appNames = [];
    for (var key in e.app) {
        appNames.push(key);
    }
    callback(null, appNames);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_public_obj.getAppWithEasyrtcid" id="apidoc.element.easyrtc.easyrtc_public_obj.getAppWithEasyrtcid">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_public_obj.</span>getAppWithEasyrtcid
        <span class="apidocSignatureSpan">(easyrtcid, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getAppWithEasyrtcid = function (easyrtcid, callback) {
    for (var key in e.app) {
        if (e.app[key].connection[easyrtcid] &#x26;&#x26; e.app[key].connection[easyrtcid].isAuthenticated) {
            pub.app(key, callback);
            return;
        }
    }
    pub.util.logWarning(&#x22;Can not find connection [&#x22; + easyrtcid + &#x22;]&#x22;);
    callback(new pub.util.ConnectionWarning(&#x22;Can not find connection [&#x22; + easyrtcid + &#x22;]&#x22;));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_public_obj.getConnectionCount" id="apidoc.element.easyrtc.easyrtc_public_obj.getConnectionCount">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_public_obj.</span>getConnectionCount
        <span class="apidocSignatureSpan">(callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getConnectionCount = function (callback) {
    callback(null, pub.getConnectionCountSync());
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    onCall = cb;
};

/** Sets an event handler that gets called when a call is ended.
 * it&#x27;s only purpose (so far) is to support transitions on video elements.
 x     * this function is only defined after easyrtc.easyApp is called.
 * The slot is parameter is the index into the array of video ids.
 * Note: if you call easyrtc.<span class="apidocCodeKeywordSpan">getConnectionCount</span>() from inside your callback
 * it&#x27;s count will reflect the number of connections before the hangup started.
 * @function
 * @memberOf Easyrtc_App
 * @param {Function} cb has the signature function(easyrtcid, slot){}
 * @example
 *   easyrtc.setOnHangup( function(easyrtcid, slot){
 *      console.log(&#x22;call with &#x22; + easyrtcid + &#x22;ended&#x22;);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_public_obj.getConnectionCountSync" id="apidoc.element.easyrtc.easyrtc_public_obj.getConnectionCountSync">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_public_obj.</span>getConnectionCountSync
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getConnectionCountSync = function () {
    var connectionCount = 0;
    for (var key in e.app) {
        connectionCount = connectionCount + _.size(e.app[key].connection);
    }
    return connectionCount;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

/**
* Sends the count of the number of connections to the server to a provided callback.
*
* @param       {function(?Error, Number)} callback Callback with error and array containing all easyrtcids.
*/
pub.getConnectionCount = function(callback) {
   callback(null, pub.<span class="apidocCodeKeywordSpan">getConnectionCountSync</span>());
};


/**
* Sends the count of the number of connections to the server to a provided callback.
*
* @returns     {Number} The current number of connections in a room.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_public_obj.getConnectionWithEasyrtcid" id="apidoc.element.easyrtc.easyrtc_public_obj.getConnectionWithEasyrtcid">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_public_obj.</span>getConnectionWithEasyrtcid
        <span class="apidocSignatureSpan">(easyrtcid, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getConnectionWithEasyrtcid = function (easyrtcid, callback) {
    for (var key in e.app) {
        if (e.app[key].connection[easyrtcid] &#x26;&#x26; e.app[key].connection[easyrtcid].isAuthenticated) {
            pub.app(key, function(err, appObj) {
                if (err) {
                    callback(err);
                    return;
                }
                appObj.connection(easyrtcid, callback);
            });
            return;
        }
    }
    pub.util.logWarning(&#x22;Can not find connection [&#x22; + easyrtcid + &#x22;]&#x22;);
    callback(new pub.util.ConnectionWarning(&#x22;Can not find connection [&#x22; + easyrtcid + &#x22;]&#x22;));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_public_obj.getOption" id="apidoc.element.easyrtc.easyrtc_public_obj.getOption">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_public_obj.</span>getOption
        <span class="apidocSignatureSpan">(optionName)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getOption = function (optionName) {
    if(typeof e.option[optionName] === &#x22;undefined&#x22;){
        pub.util.logError(&#x22;Unknown option requested. Unrecognised option name &#x27;&#x22; + optionName + &#x22;&#x27;.&#x22;);
        return null;
    }
    return e.option[optionName];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 */
eventListener.onConnection = function(socket, easyrtcid, next){
    var connectionObj = {};             // prepare variables to house the connection object

    // Initially upon a connection, we are only concerned with receiving an easyrtcAuth message
    socket.on(&#x22;easyrtcAuth&#x22;, function(msg, socketCallback) {

if (pub.<span class="apidocCodeKeywordSpan">getOption</span>(&#x22;logMessagesEnable&#x22;)) {
    try {
        pub.util.logDebug(&#x22;[&#x22;+easyrtcid+&#x22;] Incoming socket.io message: [&#x22;+JSON.stringify(msg)+&#x22;]&#x22;);
    }
    catch(err) {
        pub.util.logDebug(&#x22;[&#x22;+easyrtcid+&#x22;] Incoming socket.io message&#x22;);
    }
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_public_obj.getVersion" id="apidoc.element.easyrtc.easyrtc_public_obj.getVersion">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_public_obj.</span>getVersion
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getVersion = function () {
    return e.version;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
return true;
};

/**
 *  Checks with EasyRTC site for latest version. Writes to the log if a version can be found. If connection cannot be established
 than no error will be shown.
 */
pub.util.updateCheck = function() {
var easyrtcVersion = pub.<span class="apidocCodeKeywordSpan">getVersion</span>();

require(&#x22;http&#x22;).get(&#x22;http://easyrtc.com/version/?app=easyrtc&#x26;ver=&#x22; + easyrtcVersion + &#x22;&#x26;platform
=&#x22; + process.platform + &#x22;&#x26;nodever=&#x22; + process.version, function(res) {
    if (res.statusCode == 200)
        res.on(&#x27;data&#x27;, function(latestVersion) {
            latestVersion = (latestVersion + &#x22;&#x22;).replace(/[^0-9a-z.]/g, &#x22;&#x22;);
            if (latestVersion != easyrtcVersion) {
                var l = latestVersion.replace(/[^0-9.]/g, &#x22;&#x22;).split(&#x22;.&#x22;, 3);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_public_obj.isApp" id="apidoc.element.easyrtc.easyrtc_public_obj.isApp">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_public_obj.</span>isApp
        <span class="apidocSignatureSpan">(appName, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isApp = function (appName, callback) {
    callback(null, (e.app[appName] ? true : false));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
            asyncCallback(null);
        }
    });
},

function(asyncCallback) {
    // Check to see if the requested app currently exists.
    pub.<span class="apidocCodeKeywordSpan">isApp</span>(newAppName, asyncCallback);

},

function(isApp, asyncCallback) {
    // If requested app exists, then call it, otherwise create it.
    if (isApp) {
        pub.app(newAppName, asyncCallback);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_public_obj.setOption" id="apidoc.element.easyrtc.easyrtc_public_obj.setOption">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_public_obj.</span>setOption
        <span class="apidocSignatureSpan">(optionName, optionValue)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setOption = function (optionName, optionValue) {
    // Can only set options which currently exist
    if (typeof e.option[optionName] == &#x22;undefined&#x22;) {
        pub.util.logError(&#x22;Error setting option. Unrecognised option name &#x27;&#x22; + optionName + &#x22;&#x27;.&#x22;);
        return false;
    }

    e.option[optionName] = pub.util.deepCopy(optionValue);
    return true;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

Setting Server Options
----------------------

Options can be set prior, during, or after the easyrtc.listen() function has been run.

**Seperate**
- easyrtc.<span class="apidocCodeKeywordSpan">setOption</span>(optionName, optionValue)

**Within Listen()**
- easyrtc.listen(httpApp, socketServer, options, listenCallback)

**Afterwards with resulting EasyRTC interface function**
- ei.setOption(optionName, optionValue)
...</pre></li>
    </ul>










</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.easyrtc.easyrtc_sc" id="apidoc.module.easyrtc.easyrtc_sc">module easyrtc.easyrtc_sc</a></h1>


    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_sc.chromeExtentionListener" id="apidoc.element.easyrtc.easyrtc_sc.chromeExtentionListener">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_sc.</span>chromeExtentionListener
        <span class="apidocSignatureSpan">(event)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">chromeExtentionListener = function (event) {

        if (event.origin !== window.location.origin) {
            return;
        }

        // &#x22;cancel&#x22; button is clicked
        if (event.data === &#x27;PermissionDeniedError&#x27;) {
            easyrtc_sc.chromeMediaSource = &#x27;PermissionDeniedError&#x27;;

        // extension notified his presence
        } else if (event.data === &#x27;extension-loaded&#x27;) {
            easyrtc_sc.chromeMediaSource = &#x27;desktop&#x27;;

        // extension shared temp sourceId
        } else if (event.data.chromeMediaSourceId) {
            easyrtc_sc.chromeMediaSourceId = event.data.chromeMediaSourceId;

	        // Remove listener
	        window.removeEventListener(&#x27;message&#x27;, easyrtc_sc.chromeMedia);
            easyrtc_sc.chromeMedia = null;
        }
    }</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_sc.getUserScreen" id="apidoc.element.easyrtc.easyrtc_sc.getUserScreen">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_sc.</span>getUserScreen
        <span class="apidocSignatureSpan">(onSuccess, onFailure)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getUserScreen = function (onSuccess, onFailure) {

    function requestUserScreen() {

        easyrtc.enableAudio(false);
        easyrtc.enableVideo(true);
        easyrtc.setScreenCapture();

        easyrtc.initMediaSource(
            onSuccess,
            onFailure
        );
    }

    function requestUserScreenId() {

        // Handle Permission Denied Errore
        if (easyrtc_sc.chromeMediaSource === &#x27;PermissionDeniedError&#x27;) {
            onFailure(&#x27;PermissionDeniedError&#x27;);

        } else if (easyrtc_sc.chromeMediaSourceId) {
            requestUserScreen();

        } else {

            // Request extension chromeMediaSourceId value
            if (easyrtc_sc.chromeMediaSourceId === null) {
                window.postMessage(&#x27;get-sourceId&#x27;, &#x27;*&#x27;);
                easyrtc_sc.chromeMediaSourceId = false;
            }

            setTimeout(requestUserScreenId, 1000);
        }
    }


    if (!easyrtc.supportsGetUserMedia()) {

        onFailure(&#x22;Do not support getUserMedia&#x22;);

    } else if (easyrtc.localScreenStream) {

        if (onSuccess) {
        	// Make it async anyway
            setTimeout(function () {
                onSuccess(easyrtc_sc.localScreenStream);
            });
        }

    } else {

        easyrtc_sc.isChromeExtensionAvailable(function (isAvailable) {
            if (isAvailable) {
                requestUserScreenId();
            } else {
                requestUserScreen();
            }
        });
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
        /**
* Request screenshare stream via EasyRTC chrome extension if available or
* fallback on chrome experimental screen share feature then fail if not avaialble.
* @param {function(Object)} successCallback - will be called with localmedia stream on success.
* @param {function(String,String)} errorCallback - is called with an error code and error description.
*
* @example
* easyrtc_sc.<span class="apidocCodeKeywordSpan">getUserScreen</span>(
*      function () {
*          console.log(&#x27;ok&#x27;, arguments);
*      },
*      function (error) {
*          console.log(&#x27;error&#x27;, error);
*      }
*  );
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_sc.installChromeExtension" id="apidoc.element.easyrtc.easyrtc_sc.installChromeExtension">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_sc.</span>installChromeExtension
        <span class="apidocSignatureSpan">(appid, onSucess, onFailure)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">installChromeExtension = function (appid, onSucess, onFailure) {

    window.chrome.webstore.install(
        &#x27;https://chrome.google.com/webstore/detail/&#x27;+ appid,
        onSucess,
        onFailure
    );
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* @param {String} appid - google chrome webstore unique app id.
* @param {function(Object)} successCallback - will be called with localmedia stream on success.
* @param {function(String,String)} errorCallback - is called with an error code and error description.
*
* @example
*
* document.body.addEventListener(&#x27;click&#x27;, function () {
*     easyrtc_sc.<span class="apidocCodeKeywordSpan">installChromeExtension</span>(
*          &#x27;hpmoipogpkhegoblaoomcmjiijipjnfg&#x27;,
*          function () {
*              console.log(&#x27;ok&#x27;, arguments);
*          },
*          function (error) {
*              console.log(&#x27;error&#x27;, error);
*          }
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_sc.isChrome" id="apidoc.element.easyrtc.easyrtc_sc.isChrome">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_sc.</span>isChrome
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isChrome = function () {
    return window.navigator.webkitGetUserMedia &#x26;&#x26; window.chrome &#x26;&#x26;
            window.chrome.webstore &#x26;&#x26; window.chrome.webstore.install;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
         * Check if easyRTC Chrome extension is available.
         * @param {String} callback gets boolean, true if Chrome extension is available.
         */
        isChromeExtensionAvailable: function (callback) {

            callback = callback || function () {};

            if (!easyrtc_sc.<span class="apidocCodeKeywordSpan">isChrome</span>()) {

callback(false);

            // Init postMessage listener
            } else {

if (!easyrtc_sc.chromeMedia) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_sc.isChromeExtensionAvailable" id="apidoc.element.easyrtc.easyrtc_sc.isChromeExtensionAvailable">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_sc.</span>isChromeExtensionAvailable
        <span class="apidocSignatureSpan">(callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isChromeExtensionAvailable = function (callback) {

    callback = callback || function () {};

    if (!easyrtc_sc.isChrome()) {

        callback(false);

    // Init postMessage listener
    } else {

        if (!easyrtc_sc.chromeMedia) {

            // Save listener for future CG
            easyrtc_sc.chromeMedia = easyrtc_sc.chromeExtentionListener.bind(easyrtc_sc);
            window.addEventListener(&#x27;message&#x27;, easyrtc_sc.chromeMedia);
        }

        // Check cache
        if (easyrtc_sc.chromeMediaExtention) {
            callback(true);

        // Send message to extension
        } else {

            // ask extension if it is available
           	window.postMessage(&#x27;is-extension-loaded&#x27;, &#x27;*&#x27;);

            // Under 2000 ms may create failure due chrome exention response delay.
            setTimeout(function () {
                easyrtc_sc.chromeMediaExtention = easyrtc_sc.chromeMediaSource === &#x27;desktop&#x27;;
                callback(easyrtc_sc.chromeMediaExtention);
            }, 2000);
        }
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
            }
        }
    }
};

// check if desktop-capture extension installed.
if (window.postMessage &#x26;&#x26; isChrome) {
    DetectRTC.screen.<span class="apidocCodeKeywordSpan">isChromeExtensionAvailable</span>(function(){});
}
})();

window.addEventListener(&#x27;message&#x27;, function(event) {
if (event.origin != window.location.origin) {
    return;
}
...</pre></li>
    </ul>










</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.easyrtc.easyrtc_util" id="apidoc.module.easyrtc.easyrtc_util">module easyrtc.easyrtc_util</a></h1>


    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_util.ApplicationError" id="apidoc.element.easyrtc.easyrtc_util.ApplicationError">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_util.</span>ApplicationError
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">ApplicationError = function (msg) {
    eu.ApplicationError.super_.call(this, msg, this.constructor);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// Set all options in options object. If any fail, an error will be sent to the callback.
async.each(Object.keys(options), function(currentOptionName, asyncCallback) {
    appObj.setOption(currentOptionName, options[currentOptionName]);
    asyncCallback(null);
},
        function(err) {
            if (err) {
                callback(new pub.util.<span class="apidocCodeKeywordSpan">ApplicationError</span>(&#x22;Could not set options when
 creating application: &#x27;&#x22; + appName + &#x22;&#x27;&#x22;, err));
                return;
            }
            // Set default application fields
            var appDefaultFieldObj = appObj.getOption(&#x22;appDefaultFieldObj&#x22;);
            if (_.isObject(appDefaultFieldObj)) {
                for (var currentFieldName in appDefaultFieldObj) {
                    appObj.setField(
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_util.ApplicationWarning" id="apidoc.element.easyrtc.easyrtc_util.ApplicationWarning">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_util.</span>ApplicationWarning
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">ApplicationWarning = function (msg) {
    eu.ApplicationWarning.super_.call(this, msg, this.constructor);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
pub.createApp = function(appName, options, callback) {
if (!_.isFunction(callback)) {
    callback = function(err, appObj) {
    };
}
if (!appName || !pub.getOption(&#x22;appNameRegExp&#x22;).test(appName)) {
    pub.util.logWarning(&#x22;Can not create application with improper name: &#x27;&#x22; + appName + &#x22;&#x27;&#x22;);
    callback(new pub.util.<span class="apidocCodeKeywordSpan">ApplicationWarning</span>(&#x22;Can not create application with improper
 name: &#x27;&#x22; + appName + &#x22;&#x27;&#x22;));
    return;
}
if (e.app[appName]) {
    pub.util.logWarning(&#x22;Can not create application which already exists: &#x27;&#x22; + appName + &#x22;&#x27;&#x22;);
    callback(new pub.util.ApplicationWarning(&#x22;Can not create application which already exists: &#x27;&#x22; + appName + &#x22
;&#x27;&#x22;));
    return;
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_util.ConnectionError" id="apidoc.element.easyrtc.easyrtc_util.ConnectionError">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_util.</span>ConnectionError
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">ConnectionError = function (msg) {
    eu.ConnectionError.super_.call(this, msg, this.constructor);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
The &#x22;authenticate&#x22; event is fired during the initial connection. The listener is provided with full details about the
connection, so it may decide whether to authenticate or disconnect them.

In this simplistic example, any clients connecting to the adminSite application will be denied unless they have a username of &#
x22;handsomeJack&#x22;. Any clients connecting to any other application will be let through.


var onAuthenticate = function(socket, easyrtcid, appName, username, credential, easyrtcAuthMessage, next){
  if (appName == &#x22;adminSite&#x22; &#x26;&#x26; username != &#x22;handsomeJack&#x22;){
    next(new easyrtc.util.<span class="apidocCodeKeywordSpan">ConnectionError</span>(&#x22;Failed our private auth.&#x22;));
  }
  else {
    next(null);
  }
};

easyrtc.events.on(&#x22;authenticate&#x22;, onAuthenticate);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_util.ConnectionWarning" id="apidoc.element.easyrtc.easyrtc_util.ConnectionWarning">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_util.</span>ConnectionWarning
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">ConnectionWarning = function (msg) {
    eu.ConnectionWarning.super_.call(this, msg, this.constructor);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   for (var key in e.app) {
       if (e.app[key].connection[easyrtcid] &#x26;&#x26; e.app[key].connection[easyrtcid].isAuthenticated) {
           pub.app(key, callback);
           return;
       }
   }
   pub.util.logWarning(&#x22;Can not find connection [&#x22; + easyrtcid + &#x22;]&#x22;);
   callback(new pub.util.<span class="apidocCodeKeywordSpan">ConnectionWarning</span>(&#x22;Can not find connection [&#x22; + easyrtcid
 + &#x22;]&#x22;));
};


/**
* Sends the count of the number of connections to the server to a provided callback.
*
* @param       {function(?Error, Number)} callback Callback with error and array containing all easyrtcids.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_util.ServerError" id="apidoc.element.easyrtc.easyrtc_util.ServerError">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_util.</span>ServerError
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">ServerError = function (msg) {
    eu.ServerError.super_.call(this, msg, this.constructor);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
*/
pub.events.setDefaultListeners = function() {
   pub.events._eventListener.removeAllListeners();
   for (var currentEventName in pub.events.defaultListeners) {
       if (_.isFunction(pub.events.defaultListeners[currentEventName])) {
           pub.events._eventListener.on(currentEventName, pub.events.defaultListeners[currentEventName]);
       } else {
           throw new pub.util.<span class="apidocCodeKeywordSpan">ServerError</span>(&#x22;Error setting default listener. No default
 for event &#x27;&#x22; + currentEventName + &#x22;&#x27; exists.&#x22;);
       }
   }
};


/**
* Map of EasyRTC event listener names to their default functions. This map can be used to run a default function manually.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_util.ServerWarning" id="apidoc.element.easyrtc.easyrtc_util.ServerWarning">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_util.</span>ServerWarning
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">ServerWarning = function (msg) {
    eu.ServerWarning.super_.call(this, msg, this.constructor);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_util.getAvailableEasyrtcid" id="apidoc.element.easyrtc.easyrtc_util.getAvailableEasyrtcid">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_util.</span>getAvailableEasyrtcid
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getAvailableEasyrtcid = function () {
    var newEasyrtcid = &#x22;&#x22;;
    var easyrtcidExists = false;

    do {
        newEasyrtcid = g.randomString();
        easyrtcidExists = false;
        for (var key in e.app) {
            if (e.app[key].connection[newEasyrtcid]) {
                easyrtcidExists = true;
                break;
            }
        }
    } while (easyrtcidExists);

    return newEasyrtcid;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
            callback(null);
        },

        function(callback) {
            pub.util.logDebug(&#x22;Configuring Socket server&#x22;);

            pub.socketServer.sockets.on(&#x22;connection&#x22;, function (socket) {
var easyrtcid = pub.util.<span class="apidocCodeKeywordSpan">getAvailableEasyrtcid</span>();

pub.util.logDebug(&#x22;[&#x22;+easyrtcid+&#x22;][&#x22;+socket.id+&#x22;] Socket connected&#x22;);
pub.util.logDebug(&#x22;Emitting event &#x27;connection&#x27;&#x22;);
pub.events.emit(&#x22;connection&#x22;, socket, easyrtcid, function(err){
    if(err){
        socket.disconnect();
        pub.util.logError(&#x22;[&#x22;+easyrtcid+&#x22;] Connect error&#x22;, err);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_util.isError" id="apidoc.element.easyrtc.easyrtc_util.isError">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_util.</span>isError
        <span class="apidocSignatureSpan">(err)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isError = function (err) {
    if (err &#x26;&#x26; ((err instanceof eu.ConnectionError)||(err instanceof eu.ApplicationError)||(err instanceof eu.ServerError)||(err
 instanceof Error))) {
        return true;
    } else {
        return false;
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
        consoleText += currentDate.toISOString() + &#x22; - &#x22;;
    }
    consoleText += level;
    consoleText += &#x22; - &#x22; + &#x22;EasyRTC: &#x22; + logText;
}

if (logFields != undefined &#x26;&#x26; logFields != null) {
    if (pub.getOption(&#x22;logErrorStackEnable&#x22;) &#x26;&#x26; pub.util.<span class="apidocCodeKeywordSpan">isError</span>(
logFields)) {
        console.log(consoleText, ((pub.getOption(&#x22;logColorEnable&#x22;))? &#x22;\nStack Trace:\n------------\n&#x22;.bold +
logFields.stack.magenta + &#x22;\n------------&#x22;.bold : &#x22;\nStack Trace:\n------------\n&#x22; + logFields.stack + &#x22;\n------------&#x22;));
    }
    else if (pub.getOption(&#x22;logWarningStackEnable&#x22;) &#x26;&#x26; pub.util.isWarning(logFields)) {
        console.log(consoleText, ((pub.getOption(&#x22;logColorEnable&#x22;))? &#x22;\nStack Trace:\n------------\n&#x22;.bold +
logFields.stack.cyan + &#x22;\n------------&#x22;.bold : &#x22;\nStack Trace:\n------------\n&#x22; + logFields.stack + &#x22;\n------------&#x22;));
    }
    else {
        console.log(consoleText, util.inspect(logFields, {colors:pub.getOption(&#x22;logColorEnable&#x22;), showHidden:false, depth
:pub.getOption(&#x22;logObjectDepth&#x22;)}));
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_util.isWarning" id="apidoc.element.easyrtc.easyrtc_util.isWarning">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_util.</span>isWarning
        <span class="apidocSignatureSpan">(err)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isWarning = function (err) {
    if (err &#x26;&#x26; ((err instanceof eu.ConnectionWarning)||(err instanceof eu.ApplicationWarning)||(err instanceof eu.ServerWarning))) {
        return true;
    } else {
        return false;
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    consoleText += &#x22; - &#x22; + &#x22;EasyRTC: &#x22; + logText;
}

if (logFields != undefined &#x26;&#x26; logFields != null) {
    if (pub.getOption(&#x22;logErrorStackEnable&#x22;) &#x26;&#x26; pub.util.isError(logFields)) {
        console.log(consoleText, ((pub.getOption(&#x22;logColorEnable&#x22;))? &#x22;\nStack Trace:\n------------\n&#x22;.bold +
logFields.stack.magenta + &#x22;\n------------&#x22;.bold : &#x22;\nStack Trace:\n------------\n&#x22; + logFields.stack + &#x22;\n------------&#x22;));
    }
    else if (pub.getOption(&#x22;logWarningStackEnable&#x22;) &#x26;&#x26; pub.util.<span class="apidocCodeKeywordSpan">isWarning
</span>(logFields)) {
        console.log(consoleText, ((pub.getOption(&#x22;logColorEnable&#x22;))? &#x22;\nStack Trace:\n------------\n&#x22;.bold +
logFields.stack.cyan + &#x22;\n------------&#x22;.bold : &#x22;\nStack Trace:\n------------\n&#x22; + logFields.stack + &#x22;\n------------&#x22;));
    }
    else {
        console.log(consoleText, util.inspect(logFields, {colors:pub.getOption(&#x22;logColorEnable&#x22;), showHidden:false, depth
:pub.getOption(&#x22;logObjectDepth&#x22;)}));
    }
} else {
    console.log(consoleText);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.easyrtc_util.socketDisconnect" id="apidoc.element.easyrtc.easyrtc_util.socketDisconnect">
        function <span class="apidocSignatureSpan">easyrtc.easyrtc_util.</span>socketDisconnect
        <span class="apidocSignatureSpan">(socket)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">socketDisconnect = function (socket) {
    try {
        socket.disconnect();
    } catch(err) {
        eu.log(&#x22;debug&#x22;, &#x22;Socket disconnection command failed. Socket may already be disconnected.&#x22;);
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.easyrtc.events" id="apidoc.module.easyrtc.events">module easyrtc.events</a></h1>


    <h2>
        <a href="#apidoc.element.easyrtc.events.emit" id="apidoc.element.easyrtc.events.emit">
        function <span class="apidocSignatureSpan">easyrtc.events.</span>emit
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">emit = function () { [native code] }</pre></li>
    <li>example usage<pre class="apidocCodePre">...
        msgData: {
            setRoomApiField: {
                roomName: roomName,
                field: fields
            }
        }
    };
    self.webSocket.json.<span class="apidocCodeKeywordSpan">emit</span>(&#x22;easyrtcCmd&#x22;, dataToShip,
            function(ackMsg) {
                if (ackMsg.msgType === &#x22;error&#x22;) {
                    self.showError(ackMsg.msgData.errorCode, ackMsg.msgData.errorText);
                }
            }
    );
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.events.emitDefault" id="apidoc.element.easyrtc.events.emitDefault">
        function <span class="apidocSignatureSpan">easyrtc.events.</span>emitDefault
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">emitDefault = function () {
    if (!pub.events.defaultListeners[arguments[&#x27;0&#x27;]]) {
        console.error(&#x22;Error emitting listener. No default for event &#x27;&#x22; + arguments[&#x27;0&#x27;] + &#x22;&#x27; exists.&#x22;);
        return;
    }
    pub.events.defaultListeners[Array.prototype.shift.call(arguments)].apply(this, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

New Features:

 - JS Client + Server - API fields. These are basically variables which are set by the client and shared to others in the room.
Many possibilities!
 - JS Client + Server - ICE Config improvements. Client can now request an updated ICE configuration from the server, or server
can force new one on client.
 - Server - isConnected() function added to connection object.
 - Server - Added convenience functions to several objects such as getAppName()
 - Server - Added pub.events.<span class="apidocCodeKeywordSpan">emitDefault</span>() method. The previous method of finding the
 default listener in an object was clunky.

Changes:

 - JS Client + Demos - Renaming initManaged() to easyApp(). Old name remains for the time being
 - Server - isAuthenticated() now a synchronous function and returns a boolean

Fixes:
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.events.on" id="apidoc.element.easyrtc.events.on">
        function <span class="apidocSignatureSpan">easyrtc.events.</span>on
        <span class="apidocSignatureSpan">(eventName, listener)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">on = function (eventName, listener) {
    if (eventName &#x26;&#x26; _.isFunction(listener)) {
        pub.events._eventListener.removeAllListeners(eventName);
        pub.events._eventListener.on(eventName, listener);
    }
    else {
        pub.util.logError(&#x22;Unable to add listener to event &#x27;&#x22; + eventName + &#x22;&#x27;&#x22;);
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
                self.websocketListeners[i].handler);
    }
}

self.websocketListeners = [];

function addSocketListener(event, handler) {
    self.webSocket.<span class="apidocCodeKeywordSpan">on</span>(event, handler);
    self.websocketListeners.push({event: event, handler: handler});
}

addSocketListener(&#x22;close&#x22;, function(event) {
    logDebug(&#x22;the web socket closed&#x22;);
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.events.removeAllListeners" id="apidoc.element.easyrtc.events.removeAllListeners">
        function <span class="apidocSignatureSpan">easyrtc.events.</span>removeAllListeners
        <span class="apidocSignatureSpan">(eventName)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">removeAllListeners = function (eventName) {
    if (eventName) {
        pub.events.setDefaultListener(eventName);
    } else {
        pub.events.setDefaultListeners();
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    }catch(e){}
    pub.util.logWarning(&#x22;[&#x22;+easyrtcid+&#x22;] EasyRTC Auth message received with invalid message format [&#x22; + msgErrorCode
 + &#x22;]. Disconnecting socket.&#x22;, msg);
    callback(new pub.util.ConnectionError(&#x22;[&#x22;+easyrtcid+&#x22;] EasyRTC Auth message received with invalid message format
 [&#x22; + msgErrorCode + &#x22;]. Disconnecting socket.&#x22;));
    return;
}

// Remove any old listeners
socket.<span class="apidocCodeKeywordSpan">removeAllListeners</span>(&#x22;easyrtcCmd&#x22;);
socket.removeAllListeners(&#x22;easyrtcMsg&#x22;);
socket.removeAllListeners(&#x22;disconnect&#x22;); // TODO: Come up with alternative to removing all disconnect listeners

pub.util.logDebug(&#x22;Emitting Authenticate&#x22;);

var username    = (msg.msgData.username     ? msg.msgData.username  : null);
var credential  = (msg.msgData.credential   ? msg.msgData.credential: null);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.events.setDefaultListener" id="apidoc.element.easyrtc.events.setDefaultListener">
        function <span class="apidocSignatureSpan">easyrtc.events.</span>setDefaultListener
        <span class="apidocSignatureSpan">(eventName)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setDefaultListener = function (eventName) {
    if (!_.isFunction(pub.events.defaultListeners[eventName])) {
        console.error(&#x22;Error setting default listener. No default for event &#x27;&#x22; + eventName + &#x22;&#x27; exists.&#x22;);
    }
    pub.events._eventListener.removeAllListeners(eventName);
    pub.events._eventListener.on(eventName, pub.events.defaultListeners[eventName]);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

 - All EasyRTC events are limited to a single listener.
 - Setting a listener removes any current listeners, including default EasyRTC listeners.


### Resetting Event To Default Listener

easyrtc.events.<span class="apidocCodeKeywordSpan">setDefaultListener</span>(eventName);

 - Removes a custom listener from an event and then restores the EasyRTC default Listener

### Emit an Event

easyrtc.events.emit(event, [arg1], [arg2], [...], [callback|next]);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.events.setDefaultListeners" id="apidoc.element.easyrtc.events.setDefaultListeners">
        function <span class="apidocSignatureSpan">easyrtc.events.</span>setDefaultListeners
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setDefaultListeners = function () {
    pub.events._eventListener.removeAllListeners();
    for (var currentEventName in pub.events.defaultListeners) {
        if (_.isFunction(pub.events.defaultListeners[currentEventName])) {
            pub.events._eventListener.on(currentEventName, pub.events.defaultListeners[currentEventName]);
        } else {
            throw new pub.util.ServerError(&#x22;Error setting default listener. No default for event &#x27;&#x22; + currentEventName + &#x22;&#x27; exists
.&#x22;);
        }
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
*
* @param       {?string} eventName     Listener name. If `null`, then all events will be removed.
*/
pub.events.removeAllListeners = function(eventName) {
   if (eventName) {
       pub.events.setDefaultListener(eventName);
   } else {
       pub.events.<span class="apidocCodeKeywordSpan">setDefaultListeners</span>();
   }
};


/**
* General utility functions are grouped in this util object.  For convenience, this class has also been attached to the application
, connection, session, and room classes.
* @class
...</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.easyrtc.events.defaultListeners" id="apidoc.module.easyrtc.events.defaultListeners">module easyrtc.events.defaultListeners</a></h1>


    <h2>
        <a href="#apidoc.element.easyrtc.events.defaultListeners.authenticate" id="apidoc.element.easyrtc.events.defaultListeners.authenticate">
        function <span class="apidocSignatureSpan">easyrtc.events.defaultListeners.</span>authenticate
        <span class="apidocSignatureSpan">(socket, easyrtcid, appName, username, credential, easyrtcAuthMessage, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">authenticate = function (socket, easyrtcid, appName, username, credential, easyrtcAuthMessage, next) {
    next(null);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.events.defaultListeners.authenticated" id="apidoc.element.easyrtc.events.defaultListeners.authenticated">
        function <span class="apidocSignatureSpan">easyrtc.events.defaultListeners.</span>authenticated
        <span class="apidocSignatureSpan">(connectionObj, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">authenticated = function (connectionObj, next) {
    next(null);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.events.defaultListeners.connection" id="apidoc.element.easyrtc.events.defaultListeners.connection">
        function <span class="apidocSignatureSpan">easyrtc.events.defaultListeners.</span>connection
        <span class="apidocSignatureSpan">(socket, easyrtcid, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">connection = function (socket, easyrtcid, next){
    var connectionObj = {};             // prepare variables to house the connection object

    // Initially upon a connection, we are only concerned with receiving an easyrtcAuth message
    socket.on(&#x22;easyrtcAuth&#x22;, function(msg, socketCallback) {

        if (pub.getOption(&#x22;logMessagesEnable&#x22;)) {
            try {
                pub.util.logDebug(&#x22;[&#x22;+easyrtcid+&#x22;] Incoming socket.io message: [&#x22;+JSON.stringify(msg)+&#x22;]&#x22;);
            }
            catch(err) {
                pub.util.logDebug(&#x22;[&#x22;+easyrtcid+&#x22;] Incoming socket.io message&#x22;);
            }
        }

        pub.events.emit(&#x22;easyrtcAuth&#x22;, socket, easyrtcid, msg, socketCallback, function(err, newConnectionObj){
            if(err){
                pub.util.logError(&#x22;[&#x22;+easyrtcid+&#x22;] Unhandled easyrtcCmd listener error.&#x22;, err);
                return;
            }

            connectionObj = newConnectionObj;
        });
    });

    pub.util.logDebug(&#x22;Running func &#x27;onConnection&#x27;&#x22;);
    next(null);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
                case &#x22;offer&#x22;:
                case &#x22;answer&#x22;:
                case &#x22;reject&#x22;:
                case &#x22;hangup&#x22;:
// Relay message to targetEasyrtcid
var outgoingMsg = {senderEasyrtcid: connectionObj.getEasyrtcid(), msgData:msg.msgData};

connectionObj.getApp().<span class="apidocCodeKeywordSpan">connection</span>(msg.targetEasyrtcid, function(err,targetConnectionObj
){
    if (err){
        pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, pub.util.getErrorMsg(&#x22;MSG_REJECT_TARGET_EASYRTCID&#x22;),
appObj);
        pub.util.logWarning(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] Could not
 send WebRTC signal to client [&#x22; + msg.targetEasyrtcid + &#x22;]. They may no longer be online.&#x22;);
        return;
    }
    pub.events.emit(&#x22;emitEasyrtcCmd&#x22;, targetConnectionObj, msg.msgType, outgoingMsg, null, next);
    pub.util.sendSocketCallbackAck(easyrtcid, socketCallback, appObj);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.events.defaultListeners.disconnect" id="apidoc.element.easyrtc.events.defaultListeners.disconnect">
        function <span class="apidocSignatureSpan">easyrtc.events.defaultListeners.</span>disconnect
        <span class="apidocSignatureSpan">(connectionObj, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">disconnect = function (connectionObj, next){
    pub.util.logDebug(&#x22;Running func &#x27;onDisconnect&#x27;&#x22;);

    async.waterfall([
        function(asyncCallback) {
            // Get array of rooms
            connectionObj.getRoomNames(asyncCallback);
        },
        function(roomNames, asyncCallback) {
            // leave all rooms
            async.each(roomNames,
                function(currentRoomName, asyncEachCallback) {
                    pub.events.emit(&#x22;roomLeave&#x22;, connectionObj, currentRoomName, function(err){asyncEachCallback(null);});
                },
                function(err){
                    asyncCallback(null);
                }
            );
        },
        function(asyncCallback) {
            // log all connections as ended
            pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] Disconnected&#x22;);
            connectionObj.removeConnection(asyncCallback);
        }
    ], function(err) {
        next(null);
    });

    next(null);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
self.disconnecting = false;
oldConfig = {};
    }

    /**
     * Disconnect from the EasyRTC server.
     * @example
     *    easyrtc.<span class="apidocCodeKeywordSpan">disconnect</span>();
     */
    this.disconnect = function() {

logDebug(&#x22;attempt to disconnect from WebRTC signalling server&#x22;);

self.disconnecting = true;
self.hangupAll();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.events.defaultListeners.easyrtcAuth" id="apidoc.element.easyrtc.events.defaultListeners.easyrtcAuth">
        function <span class="apidocSignatureSpan">easyrtc.events.defaultListeners.</span>easyrtcAuth
        <span class="apidocSignatureSpan">(socket, easyrtcid, msg, socketCallback, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">easyrtcAuth = function (socket, easyrtcid, msg, socketCallback, callback){
    pub.util.logDebug(&#x22;[&#x22;+easyrtcid+&#x22;] Running func &#x27;onEasyrtcAuth&#x27;&#x22;);

    var appObj, connectionObj, sessionObj;  // prepare variables to house the application, connection, and session objects

    var tokenMsg = {
        msgType: &#x22;token&#x22;,
        msgData:{}
    };

    var appName;
    var newAppName = (_.isObject(msg.msgData) &#x26;&#x26;_.isString(msg.msgData.applicationName)) ? msg.msgData.applicationName : pub.getOption
(&#x22;appDefaultName&#x22;);

    // Ensure socketCallback is present
    if(!_.isFunction(socketCallback)) {
        pub.util.logWarning(&#x22;[&#x22;+easyrtcid+&#x22;] EasyRTC Auth message received with no callback. Disconnecting socket.&#x22;, msg);
        try{socket.disconnect();}catch(e){}
        return;
    }

    // Only accept authenticate message
    if(!_.isObject(msg) || !_.isString(msg.msgType) || msg.msgType != &#x22;authenticate&#x22;) {
        pub.util.logWarning(&#x22;[&#x22;+easyrtcid+&#x22;] EasyRTC Auth message received without msgType of &#x27;authenticate&#x27;. Disconnecting socket
.&#x22;, msg);
        pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, pub.util.getErrorMsg(&#x22;LOGIN_BAD_AUTH&#x22;), appObj);
        try{socket.disconnect();}catch(e){}
        return;
    }

    // Check msg structure.
    if(!_.isObject(msg.msgData)
        || !_.isString(msg.msgData.apiVersion)
        || (msg.msgData.roomJoin !== undefined &#x26;&#x26; !_.isObject(msg.msgData.roomJoin))
    ) {
        pub.util.logWarning(&#x22;[&#x22;+easyrtcid+&#x22;] EasyRTC Auth message received with improper msgData. Disconnecting socket.&#x22;, msg);
        pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, pub.util.getErrorMsg(&#x22;LOGIN_BAD_STRUCTURE&#x22;), appObj);
        try{socket.disconnect();}catch(e){}
        return;
    }

    async.waterfall([
        function(asyncCallback) {
            // Check message structure
            pub.util.isValidIncomingMessage(&#x22;easyrtcAuth&#x22;, msg, null, asyncCallback);
        },

        function(isMsgValid, msgErrorCode, asyncCallback) {
            // If message structure is invalid, send error, disconnect socket, and write to log
            if (!isMsgValid) {
                try{
                    pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, pub.util.getErrorMsg(msgErrorCode), appObj);
                    socket.disconnect();
                }catch(e){}
                pub.util.logWarning(&#x22;[&#x22;+easyrtcid+&#x22;] EasyRTC Auth message received with invalid message format [&#x22; + msgErrorCode
 + &#x22;]. Disconnecting socket.&#x22;, msg);
                callback(new pub.util.ConnectionError(&#x22;[&#x22;+easyrtcid+&#x22;] EasyRTC Auth message received with invalid message format
 [&#x22; + msgErrorCode + &#x22;]. Disconnecting socket.&#x22;));
                return;
            }

            // Remove any old listeners
            socket.removeAllListeners(&#x22;easyrtcCmd&#x22;);
            socket.removeAllListeners(&#x22;easyrtcMsg&#x22;);
            socket.removeAllListeners(&#x22;disconnect&#x22;); // TODO: Come up with alternative to removing all disconnect listeners

            pub.util.logDebug(&#x22;Emitting Authenticate&#x22;);

            var username    = (msg.msgData.username     ? msg.msgData.username  : null);
            var credential  = (msg.msgData.credential   ? msg.msgData.credential: null);

            // Authenticate is responsible for authenticating the connection
            pub.events.emit(&#x22;authenticate&#x22;, socket, easyrtcid, newAppName, username, credential, msg, function(err){
                if (err) {
                    try{
                        pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, pub.util.getErrorMsg(&#x22;LOGIN_BAD_AUTH&#x22;), appObj
);
                        socket.disconnect();
                        pub.util.logInfo(&#x22;[&#x22;+newAppName+&#x22;][&#x22;+easyrtcid+&#x22;] Authentication denied. Socket disconnected.&#x22;, err);
                    }catch(e){}
                } else {
                    asyncCallback(null);
                }
            });
        },

        function(asyncCallback) {
            // Check to see if the requested app currently exists.
            pub.isApp(newAppName, asyncCallback);

        },

        functi ...</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// Start Socket.io so it attaches itself to Express server
var socketServer = socketIo.listen(webServer, {&#x22;log level&#x22;:1});

easyrtc.setOption(&#x22;logLevel&#x22;, &#x22;debug&#x22;);

// Overriding the default easyrtcAuth listener, only so we can directly access its callback
easyrtc.events.on(&#x22;easyrtcAuth&#x22;, function(socket, easyrtcid, msg, socketCallback, callback) {
    easyrtc.events.defaultListeners.<span class="apidocCodeKeywordSpan">easyrtcAuth</span>(socket, easyrtcid, msg, socketCallback
, function(err, connectionObj){
if (err || !msg.msgData || !msg.msgData.credential || !connectionObj) {
    callback(err, connectionObj);
    return;
}

connectionObj.setField(&#x22;credential&#x22;, msg.msgData.credential, {&#x22;isShared&#x22;:false});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.events.defaultListeners.easyrtcCmd" id="apidoc.element.easyrtc.events.defaultListeners.easyrtcCmd">
        function <span class="apidocSignatureSpan">easyrtc.events.defaultListeners.</span>easyrtcCmd
        <span class="apidocSignatureSpan">(connectionObj, msg, socketCallback, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">easyrtcCmd = function (connectionObj, msg, socketCallback, next){
    var appName = connectionObj.getAppName();
    var appObj = connectionObj.getApp();
    var easyrtcid = connectionObj.getEasyrtcid();


    pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] EasyRTC command received with msgType [&#x22; +
msg.msgType + &#x22;]&#x22;);
    if (!_.isFunction(next)) {
        next = pub.util.nextToNowhere;
    }

    if(!_.isFunction(socketCallback)) {
        pub.util.logWarning(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] EasyRTC command message received
 with no callback. Ignoring.&#x22;, msg);
        return;
    }

    async.waterfall([
        function(asyncCallback) {
            // Check message structure
            pub.util.isValidIncomingMessage(&#x22;easyrtcCmd&#x22;, msg, connectionObj.getApp(), asyncCallback);
        },

        function(isMsgValid, msgErrorCode, asyncCallback) {
            // If message structure is invalid, send error, and write to log
            if (!isMsgValid) {
                try{
                    pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, pub.util.getErrorMsg(msgErrorCode), appObj);
                }catch(e){}
                pub.util.logWarning(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] EasyRTC Auth message received
 with invalid message format [&#x22; + msgErrorCode + &#x22;]. Disconnecting socket.&#x22;, msg);
                return;
            }
            asyncCallback(null);
        },
        function(asyncCallback) {
            // The msgType controls how each message is handled
            switch(msg.msgType) {
                case &#x22;setUserCfg&#x22;:
                    pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] WebRTC setUserCfg command
 received. This feature is not yet complete.&#x22;);
                    pub.util.sendSocketCallbackAck(easyrtcid, socketCallback, appObj);
                    next(null);
                    break;

                case &#x22;setPresence&#x22;:
                    pub.events.emit(&#x22;msgTypeSetPresence&#x22;, connectionObj, msg.msgData.setPresence, socketCallback, next);
                    break;

                case &#x22;setRoomApiField&#x22;:
                    pub.events.emit(&#x22;msgTypeSetRoomApiField&#x22;, connectionObj, msg.msgData.setRoomApiField, socketCallback, next);
                    break;

                case &#x22;roomJoin&#x22;:
                    pub.events.emit(&#x22;msgTypeRoomJoin&#x22;, connectionObj, msg.msgData.roomJoin, socketCallback, next);
                    break;

                case &#x22;roomLeave&#x22;:
                    pub.events.emit(&#x22;msgTypeRoomLeave&#x22;, connectionObj, msg.msgData.roomLeave, socketCallback, next);
                    break;

                case &#x22;getIceConfig&#x22;:
                    pub.events.emit(&#x22;msgTypeGetIceConfig&#x22;, connectionObj, socketCallback, next);
                    break;

                case &#x22;getRoomList&#x22;:
                    pub.events.emit(&#x22;msgTypeGetRoomList&#x22;, connectionObj, socketCallback, next);
                    break;

                case &#x22;candidate&#x22;:
                case &#x22;offer&#x22;:
                case &#x22;answer&#x22;:
                case &#x22;reject&#x22;:
                case &#x22;hangup&#x22;:
                    // Relay message to targetEasyrtcid
                    var outgoingMsg = {senderEasyrtcid: connectionObj.getEasyrtcid(), msgData:msg.msgData};

                    connectionObj.getApp().connection(msg.targetEasyrtcid, function(err,targetConnectionObj){
                        if (err){
                            pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, pub.util.getErrorMsg(&#x22;MSG_REJECT_TARGET_EASYRTCID
&#x22;), appObj);
                            pub.util.logWarning(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] Could not send
 WebRTC signal to client [&#x22; + msg.targetEasyrtcid + &#x22;]. They may no longer be online.&#x22;);
                            return;
                        }
                        pub.events.emit(&#x22;emitEasyrtcCmd&#x22;, targetConnectionObj, msg.msgType, outgoingMsg, null, next);
                        pub ...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.events.defaultListeners.easyrtcMsg" id="apidoc.element.easyrtc.events.defaultListeners.easyrtcMsg">
        function <span class="apidocSignatureSpan">easyrtc.events.defaultListeners.</span>easyrtcMsg
        <span class="apidocSignatureSpan">(connectionObj, msg, socketCallback, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">easyrtcMsg = function (connectionObj, msg, socketCallback, next){
    var easyrtcid = connectionObj.getEasyrtcid();
    var appObj = connectionObj.getApp();


    pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] EasyRTC message received of type [&#x22; +
msg.msgType + &#x22;]&#x22;);

    if (!_.isFunction(next)) {
        next = pub.util.nextToNowhere;
    }

    if(!_.isFunction(socketCallback)) {
        pub.util.logWarning(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] EasyRTC message received with no
 callback. Ignoring message.&#x22;, msg);
        return;
    }

    async.waterfall([
        function(asyncCallback) {
            // Check message structure
            pub.util.isValidIncomingMessage(&#x22;easyrtcMsg&#x22;, msg, connectionObj.getApp(), asyncCallback);
        },

        function(isMsgValid, msgErrorCode, asyncCallback) {
            // If message structure is invalid, send error, and write to log
            if (!isMsgValid) {
                pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, pub.util.getErrorMsg(msgErrorCode), appObj);
                pub.util.logWarning(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] EasyRTC message received
 with invalid message format [&#x22; + msgErrorCode + &#x22;].&#x22;, msg);
                return;
            }
            asyncCallback(null);
        },
        function(asyncCallback) {

            // test targetEasyrtcid (if defined). Will prevent client from sending to themselves
            if (msg.targetEasyrtcid  !== undefined &#x26;&#x26; msg.targetEasyrtcid == connectionObj.getEasyrtcid()) {
                pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, pub.util.getErrorMsg(&#x22;MSG_REJECT_TARGET_EASYRTCID&#x22;), appObj
);
                pub.util.logWarning(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] EasyRTC message received
 with improper targetEasyrtcid&#x22;, msg);
                return;
            }

            // Determine if sending message to single client, an entire room, or an entire group
            if (msg.targetEasyrtcid !== undefined) {
                // Relay a message to a single client
                var outgoingMsg = {
                    senderEasyrtcid: connectionObj.getEasyrtcid(),
                    targetEasyrtcid: msg.targetEasyrtcid,
                    msgType: msg.msgType,
                    msgData: msg.msgData
                };
                var targetConnectionObj = {};

                async.waterfall([
                    function(asyncCallback) {
                        // getting connection object for targetEasyrtcid
                        connectionObj.getApp().connection(msg.targetEasyrtcid, asyncCallback);
                    },
                    function(newTargetConnectionObj, asyncCallback) {
                        targetConnectionObj = newTargetConnectionObj;

                        // TODO: Add option to restrict users not in same room from sending messages to users in room

                        // Handle targetRoom (if present)
                        if (msg.targetRoom) {
                            targetConnectionObj.isInRoom(msg.targetRoom, function(err, isAllowed){
                                if (err || !isAllowed) {
                                    pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, pub.util.getErrorMsg(&#x22;MSG_REJECT_TARGET_ROOM
&#x22;), appObj);
                                    pub.util.logWarning(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] EasyRTC
 message received with improper target room&#x22;, msg);
                                    return;
                                }
                                outgoingMsg.targetRoom = msg.targetRoom;
                                asyncCallback(null);
                            });
                        }
                        else {
                            asyncCallback(null);
                        }
                    },

                    function(asyncCallback) {
                        // Handle targetGroup (if present) ...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.events.defaultListeners.emitEasyrtcCmd" id="apidoc.element.easyrtc.events.defaultListeners.emitEasyrtcCmd">
        function <span class="apidocSignatureSpan">easyrtc.events.defaultListeners.</span>emitEasyrtcCmd
        <span class="apidocSignatureSpan">(connectionObj, msgType, msg, socketCallback, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">emitEasyrtcCmd = function (connectionObj, msgType, msg, socketCallback, next){
    if (!_.isObject(connectionObj)){
        next(new pub.util.ConnectionError(&#x22;Connection object invalid. Client may have disconnected.&#x22;));
        return;
    }

    var easyrtcid = connectionObj.getEasyrtcid();
    var appName = connectionObj.getAppName();

    pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] Running func &#x27;onEmitEasyrtcCmd&#x27; with msgType
 [&#x22;+msgType+&#x22;]&#x22;);
    if (!msg) {
        msg = {};
    }
    if(!_.isFunction(socketCallback)) {
        socketCallback = function(returnMsg) {
            if (_.isObject(returnMsg) &#x26;&#x26; _.isString(returnMsg.msgType) &#x26;&#x26; returnMsg.msgType == &#x22;ack&#x22;){
                // pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] EasyRTC message: unhandled
 Ack return message.&#x22;);
            }
            else {
                pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] EasyRTC message: unhandled
 return message.&#x22;, returnMsg);
            }
        };
    }

    msg.easyrtcid   = connectionObj.getEasyrtcid();
    msg.msgType     = msgType;
    msg.serverTime  = Date.now();

    connectionObj.socket.emit( &#x22;easyrtcCmd&#x22;, msg, socketCallback);

    if (pub.getOption(&#x22;logMessagesEnable&#x22;)) {
        try {
            pub.util.logDebug(&#x22;[&#x22;+appName+&#x22;][&#x22;+easyrtcid+&#x22;] Sending socket.io message: [&#x22;+JSON.stringify(msg)+&#x22;]&#x22;);
        }
        catch(err) {
            pub.util.logDebug(&#x22;[&#x22;+appName+&#x22;][&#x22;+easyrtcid+&#x22;] Sending socket.io message&#x22;);
        }
    }

    next(null);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.events.defaultListeners.emitEasyrtcMsg" id="apidoc.element.easyrtc.events.defaultListeners.emitEasyrtcMsg">
        function <span class="apidocSignatureSpan">easyrtc.events.defaultListeners.</span>emitEasyrtcMsg
        <span class="apidocSignatureSpan">(connectionObj, msgType, msg, socketCallback, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">emitEasyrtcMsg = function (connectionObj, msgType, msg, socketCallback, next){
    if (!_.isObject(connectionObj)){
        next(new pub.util.ConnectionError(&#x22;Connection object invalid. Client may have disconnected.&#x22;));
        return;
    }

    var easyrtcid = connectionObj.getEasyrtcid();
    var appName = connectionObj.getAppName();

    pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] Running func &#x27;onEmitEasyrtcMsg&#x27; with msgType
 [&#x22;+msgType+&#x22;]&#x22;);


    if (!msg) {
        msg = {};
    }
    if(!_.isFunction(socketCallback)) {
        socketCallback = function(returnMsg) {
            if (_.isObject(returnMsg) &#x26;&#x26; _.isString(returnMsg.msgType) &#x26;&#x26; returnMsg.msgType == &#x22;ack&#x22;){
                // pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] EasyRTC message: unhandled
 Ack return message.&#x22;);
            }
            else {
                pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] EasyRTC message: unhandled
 return message.&#x22;, returnMsg);
            }
        };
    }
    msg.easyrtcid   = connectionObj.getEasyrtcid();
    msg.msgType     = msgType;
    msg.serverTime  = Date.now();

    connectionObj.socket.emit( &#x22;easyrtcMsg&#x22;, msg, socketCallback);

    if (pub.getOption(&#x22;logMessagesEnable&#x22;)) {
        try {
            pub.util.logDebug(&#x22;[&#x22;+appName+&#x22;][&#x22;+easyrtcid+&#x22;] Sending socket.io message: [&#x22;+JSON.stringify(msg)+&#x22;]&#x22;);
        }
        catch(err) {
            pub.util.logDebug(&#x22;[&#x22;+appName+&#x22;][&#x22;+easyrtcid+&#x22;] Sending socket.io message&#x22;);
        }
    }

    next(null);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.events.defaultListeners.emitError" id="apidoc.element.easyrtc.events.defaultListeners.emitError">
        function <span class="apidocSignatureSpan">easyrtc.events.defaultListeners.</span>emitError
        <span class="apidocSignatureSpan">(connectionObj, errorCode, socketCallback, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">emitError = function (connectionObj, errorCode, socketCallback, next){
    pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] Running func &#x27;onEmitError&#x27;&#x22;);
    if(!_.isFunction(socketCallback)) {
        socketCallback = function(returnMsg) {
            pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] EasyRTC info: unhandled ACK return
 message.&#x22;, returnMsg);
        };
    }
    if(!_.isFunction(next)) {
        next = pub.util.nextToNowhere;
    }

    pub.events.emit(&#x22;emitEasyrtcCmd&#x22;, connectionObj, &#x22;error&#x22;, pub.util.getErrorMsg(errorCode), socketCallback, next);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.events.defaultListeners.emitReturnAck" id="apidoc.element.easyrtc.events.defaultListeners.emitReturnAck">
        function <span class="apidocSignatureSpan">easyrtc.events.defaultListeners.</span>emitReturnAck
        <span class="apidocSignatureSpan">(connectionObj, socketCallback, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">emitReturnAck = function (connectionObj, socketCallback, next){
    var easyrtcid = connectionObj.getEasyrtcid();
    var appObj = connectionObj.getApp();

    pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] Running func &#x27;onEmitReturnAck&#x27;&#x22;);
    if(!_.isFunction(socketCallback)) {
        pub.util.logWarning(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] EasyRTC: unable to return ack to
 socket.&#x22;);
        return;
    }
    if(!_.isFunction(next)) {
        next = pub.util.nextToNowhere;
    }

    var msg = {
        msgType: &#x22;ack&#x22;,
        msgData:{}
    };

    pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, msg, appObj);

    next(null);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.events.defaultListeners.emitReturnError" id="apidoc.element.easyrtc.events.defaultListeners.emitReturnError">
        function <span class="apidocSignatureSpan">easyrtc.events.defaultListeners.</span>emitReturnError
        <span class="apidocSignatureSpan">(connectionObj, socketCallback, errorCode, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">emitReturnError = function (connectionObj, socketCallback, errorCode, next){
    var easyrtcid = connectionObj.getEasyrtcid();
    var appObj = connectionObj.getApp();

    pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] Running func &#x27;onEmitReturnError&#x27;&#x22;);
    if(!_.isFunction(socketCallback)) {
        pub.util.logWarning(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] EasyRTC: unable to return error
to socket. Error code was [&#x22; + errorCode + &#x22;]&#x22;);

        next(new pub.util.ConnectionError(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] Unable to return error
 to socket. Error code was [&#x22; + errorCode + &#x22;]&#x22;));
        return;
    }
    if(!_.isFunction(next)) {
        next = pub.util.nextToNowhere;
    }

    var msg = pub.util.getErrorMsg(errorCode);

    pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, msg, appObj);

    next(null);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.events.defaultListeners.emitReturnToken" id="apidoc.element.easyrtc.events.defaultListeners.emitReturnToken">
        function <span class="apidocSignatureSpan">easyrtc.events.defaultListeners.</span>emitReturnToken
        <span class="apidocSignatureSpan">(connectionObj, socketCallback, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">emitReturnToken = function (connectionObj, socketCallback, next){
    var easyrtcid = connectionObj.getEasyrtcid();
    var appObj = connectionObj.getApp();

    pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] Running func &#x27;onSendToken&#x27;&#x22;);

    var tokenMsg = {
        msgType: &#x22;token&#x22;,
        msgData:{}
    };

    // Ensure socketCallback is present
    if(!_.isFunction(socketCallback)) {
        pub.util.logWarning(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] EasyRTC onSendToken called with
no socketCallback.&#x22;);
        try{connectionObj.socket.disconnect();}catch(e){}
        return;
    }

    async.waterfall([
        function(asyncCallback){
            // Get rooms user is in along with list
            connectionObj.generateRoomClientList(&#x22;join&#x22;, null, asyncCallback);
        },
        function(roomData, asyncCallback) {
            // Set roomData
            tokenMsg.msgData.roomData = roomData;

            // Retrieve ice config
            connectionObj.events.emit(&#x22;getIceConfig&#x22;, connectionObj, asyncCallback);
        },

        function(iceServers, asyncCallback) {
            tokenMsg.msgData.application        = {applicationName:connectionObj.getAppName()};
            tokenMsg.msgData.easyrtcid          = connectionObj.getEasyrtcid();
            tokenMsg.msgData.iceConfig          = {iceServers: iceServers};
            tokenMsg.msgData.serverTime         = Date.now();

            easyrtcid = tokenMsg.msgData.easyrtcid;

            // Get Application fields
            appObj.getFields(true, asyncCallback);
        },

        function(fieldObj, asyncCallback) {
            if (!_.isEmpty(fieldObj)){
                tokenMsg.msgData.application.field = fieldObj;
            }

            // Get Connection fields
            connectionObj.getFields(true, asyncCallback);
        },

        function(fieldObj, asyncCallback) {
            if (!_.isEmpty(fieldObj)){
                tokenMsg.msgData.field = fieldObj;
            }

            // get session object
            connectionObj.getSessionObj(asyncCallback);
        },

        function(sessionObj, asyncCallback) {
            if (sessionObj) {
                tokenMsg.msgData.sessionData = {&#x22;easyrtcsid&#x22;:sessionObj.getEasyrtcsid()};

                // Get session fields
                sessionObj.getFields(true, asyncCallback);
            }
            else {
                asyncCallback(null, null);
            }
        },

        function(fieldObj, asyncCallback) {
            // Set session field (if present)
            if (fieldObj &#x26;&#x26; !_.isEmpty(fieldObj)){
                tokenMsg.msgData.sessionData.field = fieldObj;
            }

            // Emit token back to socket (SUCCESS!)
            pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, tokenMsg, appObj);

            asyncCallback(null);
        }

    ],
    // This function is called upon completion of the async waterfall, or upon an error being thrown.
    function (err) {
        if (err){
            next(err);
        } else {
            next(null);
        }
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.events.defaultListeners.getIceConfig" id="apidoc.element.easyrtc.events.defaultListeners.getIceConfig">
        function <span class="apidocSignatureSpan">easyrtc.events.defaultListeners.</span>getIceConfig
        <span class="apidocSignatureSpan">(connectionObj, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getIceConfig = function (connectionObj, callback){
    pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] Running func &#x27;onGetIceConfig&#x27;&#x22;);
    callback(null, connectionObj.getApp().getOption(&#x22;appIceServers&#x22;));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.events.defaultListeners.log" id="apidoc.element.easyrtc.events.defaultListeners.log">
        function <span class="apidocSignatureSpan">easyrtc.events.defaultListeners.</span>log
        <span class="apidocSignatureSpan">(level, logText, logFields, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">log = function (level, logText, logFields, next) {
    if(!_.isFunction(next)) {
        next = pub.util.nextToNowhere;
    }

    var consoleText = &#x22;&#x22;;

    var currentDate = new Date();
    if (pub.getOption(&#x22;logColorEnable&#x22;)) {
        var colors = require(&#x22;colors&#x22;);
        if(pub.getOption(&#x22;logDateEnable&#x22;)) {
            consoleText += currentDate.toISOString().grey + &#x22; - &#x22;;
        }
        switch (level) {
            case &#x22;debug&#x22;:
                consoleText += &#x22;debug  &#x22;.bold.blue;
                break;
            case &#x22;info&#x22;:
                consoleText += &#x22;info   &#x22;.bold.green;
                break;
            case &#x22;warning&#x22;:
                consoleText += &#x22;warning&#x22;.bold.yellow;
                break;
            case &#x22;error&#x22;:
                consoleText += &#x22;error  &#x22;.bold.red;
                break;
            default:
                consoleText += level.bold;
        }
        consoleText += &#x22; - &#x22; + &#x22;EasyRTC: &#x22;.bold + logText;
    }
    else {
        if(pub.getOption(&#x22;logDateEnable&#x22;)) {
            consoleText += currentDate.toISOString() + &#x22; - &#x22;;
        }
        consoleText += level;
        consoleText += &#x22; - &#x22; + &#x22;EasyRTC: &#x22; + logText;
    }

    if (logFields != undefined &#x26;&#x26; logFields != null) {
        if (pub.getOption(&#x22;logErrorStackEnable&#x22;) &#x26;&#x26; pub.util.isError(logFields)) {
            console.log(consoleText, ((pub.getOption(&#x22;logColorEnable&#x22;))? &#x22;\nStack Trace:\n------------\n&#x22;.bold + logFields.stack
.magenta + &#x22;\n------------&#x22;.bold : &#x22;\nStack Trace:\n------------\n&#x22; + logFields.stack + &#x22;\n------------&#x22;));
        }
        else if (pub.getOption(&#x22;logWarningStackEnable&#x22;) &#x26;&#x26; pub.util.isWarning(logFields)) {
            console.log(consoleText, ((pub.getOption(&#x22;logColorEnable&#x22;))? &#x22;\nStack Trace:\n------------\n&#x22;.bold + logFields.stack
.cyan + &#x22;\n------------&#x22;.bold : &#x22;\nStack Trace:\n------------\n&#x22; + logFields.stack + &#x22;\n------------&#x22;));
        }
        else {
            console.log(consoleText, util.inspect(logFields, {colors:pub.getOption(&#x22;logColorEnable&#x22;), showHidden:false, depth:pub
.getOption(&#x22;logObjectDepth&#x22;)}));
        }
    } else {
        console.log(consoleText);
    }
    next(null);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
//
// These options pre-define global variables that are exposed by
// popular JavaScript libraries and runtime environmentssuch as
// browser or node.js.

&#x22;browser&#x22;       : true,     // Standard browser globals e.g. `window`, `document`.
&#x22;couch&#x22;         : false,    // Enable globals exposed by CouchDB.
&#x22;devel&#x22;         : false,    // Allow development statements e.g. `console.<span class="apidocCodeKeywordSpan">log</span
>();`.
&#x22;dojo&#x22;          : false,    // Enable globals exposed by Dojo Toolkit.
&#x22;jquery&#x22;        : false,    // Enable globals exposed by jQuery JavaScript library.
&#x22;mootools&#x22;      : false,    // Enable globals exposed by MooTools JavaScript framework.
&#x22;node&#x22;          : false,    // Enable globals available when code is running inside of the NodeJS runtime environment.
&#x22;nonstandard&#x22;   : false,    // Define non-standard but widely adopted globals such as escape and unescape.
&#x22;prototypejs&#x22;   : false,    // Enable globals exposed by Prototype JavaScript framework.
&#x22;rhino&#x22;         : false,    // Enable globals available when your code is running inside of the Rhino runtime environment
.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.events.defaultListeners.msgTypeGetIceConfig" id="apidoc.element.easyrtc.events.defaultListeners.msgTypeGetIceConfig">
        function <span class="apidocSignatureSpan">easyrtc.events.defaultListeners.</span>msgTypeGetIceConfig
        <span class="apidocSignatureSpan">(connectionObj, socketCallback, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">msgTypeGetIceConfig = function (connectionObj, socketCallback, next){
    var easyrtcid = connectionObj.getEasyrtcid();
    var appObj = connectionObj.getApp();

    pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] Running func &#x27;onMsgTypeGetIceConfig&#x27;&#x22;);

    if(!_.isFunction(socketCallback)) {
        socketCallback = function(returnMsg) {
            pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] EasyRTC info: unhandled ACK return
 message.&#x22;, returnMsg);
        };
    }

    if(!_.isFunction(next)) {
        next = pub.util.nextToNowhere;
    }

    connectionObj.events.emit(&#x22;getIceConfig&#x22;, connectionObj, function(err, iceConfigObj){
        if (err) {
            pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, pub.util.getErrorMsg(&#x22;MSG_REJECT_GEN_FAIL&#x22;), appObj);
        }
        else {
            pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, {&#x22;msgType&#x22;:&#x22;iceConfig&#x22;, &#x22;msgData&#x22;:{&#x22;iceConfig&#x22;:{&#x22;iceServers
&#x22;:iceConfigObj}}}, appObj);
        }
        next(null);
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.events.defaultListeners.msgTypeGetRoomList" id="apidoc.element.easyrtc.events.defaultListeners.msgTypeGetRoomList">
        function <span class="apidocSignatureSpan">easyrtc.events.defaultListeners.</span>msgTypeGetRoomList
        <span class="apidocSignatureSpan">(connectionObj, socketCallback, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">msgTypeGetRoomList = function (connectionObj, socketCallback, next){
    var easyrtcid = connectionObj.getEasyrtcid();
    var appObj = connectionObj.getApp();

    pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] Running func &#x27;onMsgTypeGetRoomList&#x27;&#x22;);

    if(!_.isFunction(socketCallback)) {
        socketCallback = function(returnMsg) {
            pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] EasyRTC info: unhandled ACK return
 message.&#x22;, returnMsg);
        };
    }

    if(!_.isFunction(next)) {
        next = pub.util.nextToNowhere;
    }

    connectionObj.generateRoomList(
        function(err, roomList) {
            if(err) {
                pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, pub.util.getErrorMsg(&#x22;MSG_REJECT_NO_ROOM_LIST&#x22;), appObj
);
            }
            else {
                pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, {&#x22;msgType&#x22;:&#x22;roomList&#x22;, &#x22;msgData&#x22;:{&#x22;roomList&#x22;:roomList}},
appObj);
            }
            next(null);
        }
    );
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.events.defaultListeners.msgTypeRoomJoin" id="apidoc.element.easyrtc.events.defaultListeners.msgTypeRoomJoin">
        function <span class="apidocSignatureSpan">easyrtc.events.defaultListeners.</span>msgTypeRoomJoin
        <span class="apidocSignatureSpan">(connectionObj, rooms, socketCallback, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">msgTypeRoomJoin = function (connectionObj, rooms, socketCallback, next){
    var easyrtcid = connectionObj.getEasyrtcid();
    var appObj = connectionObj.getApp();

    pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] Running func &#x27;onMsgTypeRoomJoin&#x27;&#x22;);
    if(!_.isFunction(socketCallback)) {
        pub.util.logWarning(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] EasyRTC info: unhandled socket message
 callback.&#x22;);
        return;
    }

    if(!_.isFunction(next)) {
        next = pub.util.nextToNowhere;
    }

    if(!_.isObject(rooms) || _.isEmpty(rooms)) {
        pub.events.emit(&#x22;emitReturnError&#x22;, socketCallback, &#x22;MSG_REJECT_BAD_STRUCTURE&#x22;, pub.util.nextToNowhere);
        return;
    }

    for (var currentRoomName in rooms) {
        if (!_.isString(currentRoomName) || !connectionObj.getApp().getOption(&#x22;roomNameRegExp&#x22;).test(currentRoomName)) {
            pub.events.emit(&#x22;emitReturnError&#x22;, socketCallback, &#x22;MSG_REJECT_TARGET_ROOM&#x22;, pub.util.nextToNowhere);
            return;
        }
    }

    async.each(Object.keys(rooms), function(currentRoomName, roomCallback) {
        appObj.isRoom(currentRoomName, function(err, isRoom){

            // Set roomParameter map. This may be used by custom listeners.
            var currentRoomParameter;
            if (rooms[currentRoomName] &#x26;&#x26; _.isObject(rooms[currentRoomName].roomParameter)){
                currentRoomParameter = rooms[currentRoomName].roomParameter;
            }

            if (isRoom) {
                pub.events.emit(&#x22;roomJoin&#x22;, connectionObj, currentRoomName, currentRoomParameter, roomCallback);
            }
            else if (appObj.getOption(&#x22;roomAutoCreateEnable&#x22;)) {
                pub.events.emit(&#x22;roomCreate&#x22;, appObj, connectionObj, currentRoomName, null, function(err, roomObj){
                    if (err) {
                        roomCallback(err);
                        return;
                    }
                    pub.events.emit(&#x22;roomJoin&#x22;, connectionObj, currentRoomName, currentRoomParameter, roomCallback);
                });
            }
            else {
                pub.util.logWarning(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;][&#x22;+currentRoomName+&#x22;] Unable
 to join non-existent room.&#x22;);
                roomCallback(new pub.util.ConnectionError(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;][&#x22;+
currentRoomName+&#x22;] Unable to join room.&#x22;));
            }
        });
    }, function(err, newRoomObj) {
        if (err) {
            pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, pub.util.getErrorMsg(&#x22;MSG_REJECT_BAD_ROOM&#x22;), appObj);
            next(null); // Error has been handled
            return;
        }

        connectionObj.generateRoomClientList(&#x22;join&#x22;, rooms, function(err, roomData){
            if (err) {
                pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, pub.util.getErrorMsg(&#x22;MSG_REJECT_BAD_ROOM&#x22;), appObj);
                next(null); // Error has been handled
            }
            else {
                pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, {&#x22;msgType&#x22;:&#x22;roomData&#x22;, &#x22;msgData&#x22;:{&#x22;roomData&#x22;:roomData}},
appObj);
            }
        });
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.events.defaultListeners.msgTypeRoomLeave" id="apidoc.element.easyrtc.events.defaultListeners.msgTypeRoomLeave">
        function <span class="apidocSignatureSpan">easyrtc.events.defaultListeners.</span>msgTypeRoomLeave
        <span class="apidocSignatureSpan">(connectionObj, rooms, socketCallback, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">msgTypeRoomLeave = function (connectionObj, rooms, socketCallback, next){
    var easyrtcid = connectionObj.getEasyrtcid();
    var appObj = connectionObj.getApp();

    pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] Running func &#x27;onMsgTypeRoomLeave&#x27; with
 rooms: &#x22;,rooms);
    if(!_.isFunction(socketCallback)) {
        socketCallback = function(returnMsg) {
            pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] EasyRTC info: unhandled ACK return
 message.&#x22;, returnMsg);
        };
    }

    if(!_.isFunction(next)) {
        next = pub.util.nextToNowhere;
    }

    // Loop through each room in the rooms object. Emit the leaveRoom event for each one.
    async.each(Object.keys(rooms), function(currentRoomName, asyncCallback) {
        connectionObj.events.emit(&#x22;roomLeave&#x22;, connectionObj, currentRoomName, function(err){
            if (err) {
                pub.util.logWarning(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] Error leaving room [&#x22;+currentRoomName
+&#x22;].&#x22;, err);
            }
            asyncCallback(null);
        });
    }, function(err, newRoomObj) {
        var roomData = {};
        for (var currentRoomName in rooms) {
            roomData[currentRoomName]={
                &#x22;roomName&#x22;:     currentRoomName,
                &#x22;roomStatus&#x22;:   &#x22;leave&#x22;
            };
        }
        pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, {&#x22;msgType&#x22;:&#x22;roomData&#x22;, &#x22;msgData&#x22;:{&#x22;roomData&#x22;:roomData}}, appObj
);
        next(null);
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.events.defaultListeners.msgTypeSetPresence" id="apidoc.element.easyrtc.events.defaultListeners.msgTypeSetPresence">
        function <span class="apidocSignatureSpan">easyrtc.events.defaultListeners.</span>msgTypeSetPresence
        <span class="apidocSignatureSpan">(connectionObj, presenceObj, socketCallback, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">msgTypeSetPresence = function (connectionObj, presenceObj, socketCallback, next){
    var easyrtcid = connectionObj.getEasyrtcid();
    var appObj = connectionObj.getApp();

    pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] Running func &#x27;onMsgTypeSetPresence&#x27; with
 setPresence: &#x22;,presenceObj);
    if(!_.isFunction(socketCallback)) {
        socketCallback = function(returnMsg) {
            pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] EasyRTC info: unhandled ACK return
 message.&#x22;, returnMsg);
        };
    }

    if(!_.isFunction(next)) {
        next = pub.util.nextToNowhere;
    }

    connectionObj.setPresence(
        presenceObj,
        function(err){
            if (err) {
                pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, pub.util.getErrorMsg(&#x22;MSG_REJECT_PRESENCE&#x22;), appObj);
            }
            else {
                connectionObj.emitRoomDataDelta(false, function(err, roomDataObj){
                    if (err) {
                        pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, pub.util.getErrorMsg(&#x22;MSG_REJECT_PRESENCE&#x22;), appObj
);
                    }
                    else {
                        pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, {&#x22;msgType&#x22;:&#x22;roomData&#x22;, &#x22;msgData&#x22;:{&#x22;roomData&#x22;:roomDataObj
}}, appObj);
                    }
                });
            }
            next(null);
        }
    );
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.events.defaultListeners.msgTypeSetRoomApiField" id="apidoc.element.easyrtc.events.defaultListeners.msgTypeSetRoomApiField">
        function <span class="apidocSignatureSpan">easyrtc.events.defaultListeners.</span>msgTypeSetRoomApiField
        <span class="apidocSignatureSpan">(connectionObj, roomApiFieldObj, socketCallback, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">msgTypeSetRoomApiField = function (connectionObj, roomApiFieldObj, socketCallback, next){
    var easyrtcid = connectionObj.getEasyrtcid();
    var appObj = connectionObj.getApp();

    pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] Running func &#x27;onMsgTypeSetRoomApiField
&#x27; with apiFieldObj: &#x22;,roomApiFieldObj);
    if(!_.isFunction(socketCallback)) {
        socketCallback = function(returnMsg) {
            pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] EasyRTC info: unhandled ACK return
 message.&#x22;, returnMsg);
        };
    }

    if(!_.isFunction(next)) {
        next = pub.util.nextToNowhere;
    }

    connectionObj.room(roomApiFieldObj.roomName, function(err, connectionRoomObj){
        if (err) {
            pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, pub.util.getErrorMsg(&#x22;MSG_REJECT_BAD_ROOM&#x22;), appObj);
            next(null);
            return;
        }
        connectionRoomObj.setApiField(roomApiFieldObj.field, function(err){
            if (err) {
                pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, pub.util.getErrorMsg(&#x22;MSG_REJECT_BAD_FIELD&#x22;), appObj);
                next(null);
                return;
            }
            connectionRoomObj.emitRoomDataDelta(false, function(err, roomDataDelta){
                if (err) {
                    pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, pub.util.getErrorMsg(&#x22;MSG_REJECT_GEN_FAIL&#x22;), appObj
);
                    next(null);
                    return;
                }

                var msg = {&#x22;msgType&#x22;:&#x22;roomData&#x22;, &#x22;msgData&#x22;: {&#x22;roomData&#x22;: {}}};
                msg.msgData.roomData[roomApiFieldObj.roomName] = roomDataDelta;
                pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, msg, appObj);
            });
        });
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.events.defaultListeners.roomCreate" id="apidoc.element.easyrtc.events.defaultListeners.roomCreate">
        function <span class="apidocSignatureSpan">easyrtc.events.defaultListeners.</span>roomCreate
        <span class="apidocSignatureSpan">(appObj, creatorConnectionObj, roomName, roomOptions, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">roomCreate = function (appObj, creatorConnectionObj, roomName, roomOptions, callback){
    pub.util.logDebug(&#x22;[&#x22;+appObj.getAppName()+&#x22;]&#x22; + (creatorConnectionObj?&#x22;[&#x22;+creatorConnectionObj.getEasyrtcid()+&#x22;]&#x22;:&#x22;&#x22;) +  &#x22; Room
 [&#x22;+ roomName +&#x22;] Running func &#x27;onRoomCreate&#x27;&#x22;);
    appObj.createRoom(roomName, roomOptions, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// Start EasyRTC server
var rtc = easyrtc.listen(app, socketServer, null, function(err, rtcRef) {
    console.log(&#x22;Initiated&#x22;);

    rtcRef.events.on(&#x22;roomCreate&#x22;, function(appObj, creatorConnectionObj, roomName, roomOptions, callback) {
        console.log(&#x22;roomCreate fired! Trying to create: &#x22; + roomName);

        appObj.events.defaultListeners.<span class="apidocCodeKeywordSpan">roomCreate</span>(appObj, creatorConnectionObj, roomName
, roomOptions, callback);
    });
});

//listen on port 8080
webServer.listen(8080, function () {
    console.log(&#x27;listening on http://localhost:8080&#x27;);
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.events.defaultListeners.roomJoin" id="apidoc.element.easyrtc.events.defaultListeners.roomJoin">
        function <span class="apidocSignatureSpan">easyrtc.events.defaultListeners.</span>roomJoin
        <span class="apidocSignatureSpan">(connectionObj, roomName, roomParameter, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">roomJoin = function (connectionObj, roomName, roomParameter, callback){
    pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] Running func &#x27;onRoomJoin&#x27;&#x22;);

    // roomParameter is a new field. To ease upgrading we&#x27;ll just show a warning to server applications which haven&#x27;t updated
    if (_.isFunction(roomParameter)){
        pub.util.logWarning(&#x22;Upgrade notice: EasyRTC roomJoin event called without roomParameter object.&#x22;);
        callback = roomParameter;
        roomParameter = null;
    }

    connectionObj.joinRoom(roomName, function(err, connectionRoomObj){
        if (err) {
            callback(err);
            return;
        }
        connectionRoomObj.emitRoomDataDelta(false, function(err, roomDataDelta){
            // Return connectionRoomObj regardless of if there was a problem sending out the deltas
            callback(null, connectionRoomObj);
        });
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- Documentation - New guide for handling ICE configuration, including STUN and TURN
- Documentation - New guide for handling authentication.

Changes:

- JS Client - Renamed easyrtc.usernamePattern to easyrtc.usernameRegExp to align with server option name. Set the default value
to align with default server option value.
- Server - Cleanup of logging and error handling
- Server - connectionObj.<span class="apidocCodeKeywordSpan">roomJoin</span>() will no longer create a room if a room doesn&#x27
;t already exist. This logic is handled by the roomJoin event.
- Demos - General cleanup including variable renaming (Why shoeldn&#x27;t &#x22;signaling&#x22; have two L&#x27;s?)

Fixes:

- Server - Fixed issue when joining rooms when roomAutoCreateEnable option is disabled. When joining room fails, an error message
 is now returned rather than an empty roomData object. Related to issue #17
- Demos - Fixes and improvements for rooms demo.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.events.defaultListeners.roomLeave" id="apidoc.element.easyrtc.events.defaultListeners.roomLeave">
        function <span class="apidocSignatureSpan">easyrtc.events.defaultListeners.</span>roomLeave
        <span class="apidocSignatureSpan">(connectionObj, roomName, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">roomLeave = function (connectionObj, roomName, next){
    pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] Running func &#x27;onRoomLeave&#x27; with rooms [&#x22;+
roomName+&#x22;]&#x22;);

    if(!_.isFunction(next)) {
        next = pub.util.nextToNowhere;
    }

    connectionObj.room(roomName, function(err, connectionRoomObj){
        if (err) {
            pub.util.logWarning(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] Couldn&#x27;t leave room [&#x22; + roomName
 + &#x22;]&#x22;);
            next(err);
            return;
        }

        pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] Leave room [&#x22; + roomName + &#x22;]&#x22;);
        connectionRoomObj.leaveRoom(next);
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.events.defaultListeners.shutdown" id="apidoc.element.easyrtc.events.defaultListeners.shutdown">
        function <span class="apidocSignatureSpan">easyrtc.events.defaultListeners.</span>shutdown
        <span class="apidocSignatureSpan">(next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">shutdown = function (next){
    pub.util.logDebug(&#x22;Running func &#x27;onShutdown&#x27;&#x22;);
    next(null);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.events.defaultListeners.startup" id="apidoc.element.easyrtc.events.defaultListeners.startup">
        function <span class="apidocSignatureSpan">easyrtc.events.defaultListeners.</span>startup
        <span class="apidocSignatureSpan">(next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">startup = function (next){
    if (!_.isFunction(next)) {
        next = pub.util.nextToNowhere;
    }

    pub.util.logDebug(&#x22;Running func &#x27;onStartup&#x27;&#x22;);
    async.waterfall([
        function(callback) {
            pub.util.logDebug(&#x22;Configuring Http server&#x22;);

            // Set the EasyRTC demos
            if (pub.getOption(&#x22;demosEnable&#x22;)) {
                pub.util.logDebug(&#x22;Setting up demos to be accessed from &#x27;&#x22; + pub.getOption(&#x22;demosPublicFolder&#x22;) + &#x22;/&#x27;&#x22;);
                pub.httpApp.get(pub.getOption(&#x22;demosPublicFolder&#x22;) + &#x22;/*&#x22;, function(req, res) {
                    (res.sendFile||res.sendfile).call(res,
                        &#x22;./demos/&#x22; + (req.params[0] ? req.params[0] : &#x22;index.html&#x22;),
                        // TODO security check
                        {root:__dirname + &#x22;/../&#x22;},
                        function(err) {
                            try{if (err &#x26;&#x26; err.status &#x26;&#x26; res &#x26;&#x26; !res._headerSent) {
                                res.status(404);
                                var body =    &#x22;&#x3c;html&#x3e;&#x3c;head&#x3e;&#x3c;title&#x3e;File Not Found&#x3c;/title&#x3e;&#x3c;/head&#x3e;&#x3c;body&#x3e;&#x3c;h1&#x3e;File Not Found&#x3c;/h1&#x3e;&#x3c;/body
&#x3e;&#x3c;/html&#x3e;&#x22;;
                                res.setHeader(&#x22;Content-Type&#x22;, &#x22;text/html&#x22;);
                                res.setHeader(&#x22;Content-Length&#x22;, body.length);
                                res.end(body);
                            }}catch(e){}
                        }
                    );
                });
                // Forward people who forget the trailing slash to the folder.
                pub.httpApp.get(pub.getOption(&#x22;demosPublicFolder&#x22;), function(req, res) {res.redirect(pub.getOption(&#x22;demosPublicFolder
&#x22;) + &#x22;/&#x22;);});
            }

            if (pub.getOption(&#x22;apiEnable&#x22;)) {
                // Set the EasyRTC API files
                pub.util.logDebug(&#x22;Setting up API files to be accessed from &#x27;&#x22; + pub.getOption(&#x22;apiPublicFolder&#x22;) + &#x22;/&#x27;&#x22;);
                pub.httpApp.get(pub.getOption(&#x22;apiPublicFolder&#x22;) + &#x22;/easyrtc.js&#x22;,                  function(req, res) {pub.util.
sendSessionCookie(req, res); (res.sendFile||res.sendfile).call(res,&#x22;api/easyrtc.js&#x22;,                   {root:__dirname + &#x22;/../&#x22;});});
                pub.httpApp.get(pub.getOption(&#x22;apiPublicFolder&#x22;) + &#x22;/easyrtc_ft.js&#x22;,               function(req, res) {pub.util.
sendSessionCookie(req, res); (res.sendFile||res.sendfile).call(res,&#x22;api/easyrtc_ft.js&#x22;,                {root:__dirname + &#x22;/../&#x22;});});
                pub.httpApp.get(pub.getOption(&#x22;apiPublicFolder&#x22;) + &#x22;/easyrtc.css&#x22;,                 function(req, res) {pub.util.
sendSessionCookie(req, res); (res.sendFile||res.sendfile).call(res,&#x22;api/easyrtc.css&#x22;,                  {root:__dirname + &#x22;/../&#x22;});});
                pub.httpApp.get(pub.getOption(&#x22;apiPublicFolder&#x22;) + &#x22;/easyrtc.min.js&#x22;,              function(req, res) {pub.util.
sendSessionCookie(req, res); (res.sendFile||res.sendfile).call(res,&#x22;open_source/api/easyrtc.min.js&#x22;,   {root:__dirname + &#x22;/../&#x22;});});
                pub.httpApp.get(pub.getOption(&#x22;apiPublicFolder&#x22;) + &#x22;/easyrtc_ft.min.js&#x22;,           function(req, res) {pub.util.
sendSessionCookie(req, res); (res.sendFile||res.sendfile).call(res,&#x22;api/easyrtc_ft.min.js&#x22;,            {root:__dirname + &#x22;/../&#x22;});});
                pub.httpApp.get(pub.getOption(&#x22;apiPublicFolder&#x22;) + &#x22;/easyrtc.min.css&#x22;,             function(req, res) {pub.util.
sendSessionCookie(req, res); (res.sendFile||res.sendfile).call(res,&#x22;open_source/api/easyrtc.min.css&#x22;,  {root:__dirname + &#x22;/../&#x22;});});
                pub.httpApp.get(pub.getOption(&#x22;apiPublicFolder&#x22;) + &#x22;/img/*&#x22;, function(req, res) {
                    pub.util.sendSessionCookie(req, res);
                    (res.sendFile||res.sendfile).call(res,
                        &#x22;./api/img/&#x22; + (req.params[0] ? req.params[0] : &#x22;index.html&#x22;),
                        {root:__dirname + &#x22;/../&#x22;},
                        function(err) {
                            try{if (err &#x26;&#x26; err.status &#x26;&#x26; res &#x26;&#x26; !res._headerSent) {
                                res.status(404);
                                var body =    &#x22;&#x3c;html&#x3e;&#x3c;head&#x3e;&#x3c;title&#x3e;File Not Found&#x3c;/title&#x3e;&#x3c;/head&#x3e;&#x3c;body&#x3e;&#x3c;h1&#x3e;File ...</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.easyrtc.general_util" id="apidoc.module.easyrtc.general_util">module easyrtc.general_util</a></h1>


    <h2>
        <a href="#apidoc.element.easyrtc.general_util.AbstractError" id="apidoc.element.easyrtc.general_util.AbstractError">
        function <span class="apidocSignatureSpan">easyrtc.general_util.</span>AbstractError
        <span class="apidocSignatureSpan">(msg, constr)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">AbstractError = function (msg, constr){
    Error.captureStackTrace(this, constr || this);
    this.message = msg || &#x22;Error&#x22;;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.general_util.checkModules" id="apidoc.element.easyrtc.general_util.checkModules">
        function <span class="apidocSignatureSpan">easyrtc.general_util.</span>checkModules
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">checkModules = function () {

    var easyrtcPackage;

    try {
        easyrtcPackage = require(&#x22;../package&#x22;);
    }
    catch( e ) {
        console.log(&#x22;ERROR: Could not load package.json from project root. This file is required for reading project properties.&#x22;);
        process.exit(1);
    }

    var moduleExists = function (modName) {
        try { return require.resolve(modName); }
        catch( e ) { return false; }
    };

    var isModuleMissing = false;
    for (var key in easyrtcPackage.dependencies) {
        if (!moduleExists(key)) {
            isModuleMissing = true;
            console.log(&#x22;ERROR: Missing module &#x27;&#x22; + key + &#x22;&#x27;&#x22;);
        }
    }

    if (isModuleMissing) {
        console.log(&#x22;ERROR: Required modules are not installed. Run &#x27;npm install&#x27; from command line.&#x22;);
        process.exit(1);
    }

    delete require.cache[easyrtcPackage];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * @file        Entry library for EasyRTC server. Houses the primary listen function.
 * @author      Priologic Software, info@easyrtc.com
 * @copyright   Copyright 2016 Priologic Software. All rights reserved.
 * @license     BSD v2, see LICENSE file in module root folder.
 */

var g           = require(&#x22;./general_util&#x22;);        // General utility functions local module
g.<span class="apidocCodeKeywordSpan">checkModules</span>(); // Check to ensure all required modules are available

var _           = require(&#x22;underscore&#x22;);            // General utility functions external module
var pub         = require(&#x22;./easyrtc_public_obj&#x22;);  // EasyRTC public object


var server = module.exports;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.general_util.deepCopy" id="apidoc.element.easyrtc.general_util.deepCopy">
        function <span class="apidocSignatureSpan">easyrtc.general_util.</span>deepCopy
        <span class="apidocSignatureSpan">(input)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">deepCopy = function (input) {

    if (
        input === null || input === undefined ||
            typeof input !== &#x22;object&#x22; ||
                (input.constructor !== Object &#x26;&#x26; input.constructor !== Array)
    ) {
        return input;
    }

    if (
        input.constructor === Boolean ||
            input.constructor === Date ||
                input.constructor === Function ||
                    input.constructor === Number ||
                        input.constructor === RegExp ||
                            input.constructor === String
    ) {
        return new input.constructor(input);
    }

    var copy;
    if (input instanceof Array) {
        copy = [];
        for (var i = 0, len = input.length; i &#x3c; len; i++) {
            copy[i] = g.deepCopy(input[i]);
        }
        return copy;
    }

    if (input instanceof Object) {
        copy = {};
        for (var key in input) {
            if (input.hasOwnProperty(key)) {
                copy[key] = g.deepCopy(input[key]);
            }
        }
        return copy;
    }
    return null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
pub.setOption = function(optionName, optionValue) {
   // Can only set options which currently exist
   if (typeof e.option[optionName] == &#x22;undefined&#x22;) {
       pub.util.logError(&#x22;Error setting option. Unrecognised option name &#x27;&#x22; + optionName + &#x22;&#x27;.&#x22;);
       return false;
   }

   e.option[optionName] = pub.util.<span class="apidocCodeKeywordSpan">deepCopy</span>(optionValue);
   return true;
};


/**
* EasyRTC Event handling object which contain most methods for interacting with EasyRTC events. For convenience, this class has
also been attached to the application, connection, session, and room classes.
* @class
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.general_util.getPackageData" id="apidoc.element.easyrtc.general_util.getPackageData">
        function <span class="apidocSignatureSpan">easyrtc.general_util.</span>getPackageData
        <span class="apidocSignatureSpan">(fieldName)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getPackageData = function (fieldName) {
    var packageFile = require(&#x22;../package&#x22;);
    if (!fieldName) {
        return g.deepCopy(packageFile);
    }
    else if (packageFile[fieldName]) {
        return g.deepCopy(packageFile[fieldName]);
    }
    else {
        return null;
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.general_util.randomString" id="apidoc.element.easyrtc.general_util.randomString">
        function <span class="apidocSignatureSpan">easyrtc.general_util.</span>randomString
        <span class="apidocSignatureSpan">(stringLength, chars)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">randomString = function (stringLength, chars){
    var newString = &#x22;&#x22;;

    if (!chars) {
        chars = &#x22;ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz0123456789&#x22;;
    }

    if (!stringLength) {
        stringLength = 16;
    }

    for (var i=0; i &#x3c; stringLength; i=i+1) {
        var randomNumber = Math.floor(Math.random() * chars.length);
        newString += chars.substring(randomNumber, randomNumber + 1);
    }

    return newString;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * @return  {String} Available easyrtcid. A unique identifier for an EasyRTC connection.
 */
eu.getAvailableEasyrtcid = function() {
var newEasyrtcid = &#x22;&#x22;;
var easyrtcidExists = false;

do {
    newEasyrtcid = g.<span class="apidocCodeKeywordSpan">randomString</span>();
    easyrtcidExists = false;
    for (var key in e.app) {
        if (e.app[key].connection[newEasyrtcid]) {
            easyrtcidExists = true;
            break;
        }
    }
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.easyrtc.util" id="apidoc.module.easyrtc.util">module easyrtc.util</a></h1>


    <h2>
        <a href="#apidoc.element.easyrtc.util.ApplicationError" id="apidoc.element.easyrtc.util.ApplicationError">
        function <span class="apidocSignatureSpan">easyrtc.util.</span>ApplicationError
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">ApplicationError = function (msg) {
    eu.ApplicationError.super_.call(this, msg, this.constructor);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// Set all options in options object. If any fail, an error will be sent to the callback.
async.each(Object.keys(options), function(currentOptionName, asyncCallback) {
    appObj.setOption(currentOptionName, options[currentOptionName]);
    asyncCallback(null);
},
        function(err) {
            if (err) {
                callback(new pub.util.<span class="apidocCodeKeywordSpan">ApplicationError</span>(&#x22;Could not set options when
 creating application: &#x27;&#x22; + appName + &#x22;&#x27;&#x22;, err));
                return;
            }
            // Set default application fields
            var appDefaultFieldObj = appObj.getOption(&#x22;appDefaultFieldObj&#x22;);
            if (_.isObject(appDefaultFieldObj)) {
                for (var currentFieldName in appDefaultFieldObj) {
                    appObj.setField(
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.util.ApplicationWarning" id="apidoc.element.easyrtc.util.ApplicationWarning">
        function <span class="apidocSignatureSpan">easyrtc.util.</span>ApplicationWarning
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">ApplicationWarning = function (msg) {
    eu.ApplicationWarning.super_.call(this, msg, this.constructor);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
pub.createApp = function(appName, options, callback) {
if (!_.isFunction(callback)) {
    callback = function(err, appObj) {
    };
}
if (!appName || !pub.getOption(&#x22;appNameRegExp&#x22;).test(appName)) {
    pub.util.logWarning(&#x22;Can not create application with improper name: &#x27;&#x22; + appName + &#x22;&#x27;&#x22;);
    callback(new pub.util.<span class="apidocCodeKeywordSpan">ApplicationWarning</span>(&#x22;Can not create application with improper
 name: &#x27;&#x22; + appName + &#x22;&#x27;&#x22;));
    return;
}
if (e.app[appName]) {
    pub.util.logWarning(&#x22;Can not create application which already exists: &#x27;&#x22; + appName + &#x22;&#x27;&#x22;);
    callback(new pub.util.ApplicationWarning(&#x22;Can not create application which already exists: &#x27;&#x22; + appName + &#x22
;&#x27;&#x22;));
    return;
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.util.ConnectionError" id="apidoc.element.easyrtc.util.ConnectionError">
        function <span class="apidocSignatureSpan">easyrtc.util.</span>ConnectionError
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">ConnectionError = function (msg) {
    eu.ConnectionError.super_.call(this, msg, this.constructor);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
The &#x22;authenticate&#x22; event is fired during the initial connection. The listener is provided with full details about the
connection, so it may decide whether to authenticate or disconnect them.

In this simplistic example, any clients connecting to the adminSite application will be denied unless they have a username of &#
x22;handsomeJack&#x22;. Any clients connecting to any other application will be let through.


var onAuthenticate = function(socket, easyrtcid, appName, username, credential, easyrtcAuthMessage, next){
  if (appName == &#x22;adminSite&#x22; &#x26;&#x26; username != &#x22;handsomeJack&#x22;){
    next(new easyrtc.util.<span class="apidocCodeKeywordSpan">ConnectionError</span>(&#x22;Failed our private auth.&#x22;));
  }
  else {
    next(null);
  }
};

easyrtc.events.on(&#x22;authenticate&#x22;, onAuthenticate);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.util.ConnectionWarning" id="apidoc.element.easyrtc.util.ConnectionWarning">
        function <span class="apidocSignatureSpan">easyrtc.util.</span>ConnectionWarning
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">ConnectionWarning = function (msg) {
    eu.ConnectionWarning.super_.call(this, msg, this.constructor);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   for (var key in e.app) {
       if (e.app[key].connection[easyrtcid] &#x26;&#x26; e.app[key].connection[easyrtcid].isAuthenticated) {
           pub.app(key, callback);
           return;
       }
   }
   pub.util.logWarning(&#x22;Can not find connection [&#x22; + easyrtcid + &#x22;]&#x22;);
   callback(new pub.util.<span class="apidocCodeKeywordSpan">ConnectionWarning</span>(&#x22;Can not find connection [&#x22; + easyrtcid
 + &#x22;]&#x22;));
};


/**
* Sends the count of the number of connections to the server to a provided callback.
*
* @param       {function(?Error, Number)} callback Callback with error and array containing all easyrtcids.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.util.ServerError" id="apidoc.element.easyrtc.util.ServerError">
        function <span class="apidocSignatureSpan">easyrtc.util.</span>ServerError
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">ServerError = function (msg) {
    eu.ServerError.super_.call(this, msg, this.constructor);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
*/
pub.events.setDefaultListeners = function() {
   pub.events._eventListener.removeAllListeners();
   for (var currentEventName in pub.events.defaultListeners) {
       if (_.isFunction(pub.events.defaultListeners[currentEventName])) {
           pub.events._eventListener.on(currentEventName, pub.events.defaultListeners[currentEventName]);
       } else {
           throw new pub.util.<span class="apidocCodeKeywordSpan">ServerError</span>(&#x22;Error setting default listener. No default
 for event &#x27;&#x22; + currentEventName + &#x22;&#x27; exists.&#x22;);
       }
   }
};


/**
* Map of EasyRTC event listener names to their default functions. This map can be used to run a default function manually.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.util.ServerWarning" id="apidoc.element.easyrtc.util.ServerWarning">
        function <span class="apidocSignatureSpan">easyrtc.util.</span>ServerWarning
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">ServerWarning = function (msg) {
    eu.ServerWarning.super_.call(this, msg, this.constructor);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.util.deepCopy" id="apidoc.element.easyrtc.util.deepCopy">
        function <span class="apidocSignatureSpan">easyrtc.util.</span>deepCopy
        <span class="apidocSignatureSpan">(input)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">deepCopy = function (input) {

    if (
        input === null || input === undefined ||
            typeof input !== &#x22;object&#x22; ||
                (input.constructor !== Object &#x26;&#x26; input.constructor !== Array)
    ) {
        return input;
    }

    if (
        input.constructor === Boolean ||
            input.constructor === Date ||
                input.constructor === Function ||
                    input.constructor === Number ||
                        input.constructor === RegExp ||
                            input.constructor === String
    ) {
        return new input.constructor(input);
    }

    var copy;
    if (input instanceof Array) {
        copy = [];
        for (var i = 0, len = input.length; i &#x3c; len; i++) {
            copy[i] = g.deepCopy(input[i]);
        }
        return copy;
    }

    if (input instanceof Object) {
        copy = {};
        for (var key in input) {
            if (input.hasOwnProperty(key)) {
                copy[key] = g.deepCopy(input[key]);
            }
        }
        return copy;
    }
    return null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
pub.setOption = function(optionName, optionValue) {
   // Can only set options which currently exist
   if (typeof e.option[optionName] == &#x22;undefined&#x22;) {
       pub.util.logError(&#x22;Error setting option. Unrecognised option name &#x27;&#x22; + optionName + &#x22;&#x27;.&#x22;);
       return false;
   }

   e.option[optionName] = pub.util.<span class="apidocCodeKeywordSpan">deepCopy</span>(optionValue);
   return true;
};


/**
* EasyRTC Event handling object which contain most methods for interacting with EasyRTC events. For convenience, this class has
also been attached to the application, connection, session, and room classes.
* @class
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.util.getAvailableEasyrtcid" id="apidoc.element.easyrtc.util.getAvailableEasyrtcid">
        function <span class="apidocSignatureSpan">easyrtc.util.</span>getAvailableEasyrtcid
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getAvailableEasyrtcid = function () {
    var newEasyrtcid = &#x22;&#x22;;
    var easyrtcidExists = false;

    do {
        newEasyrtcid = g.randomString();
        easyrtcidExists = false;
        for (var key in e.app) {
            if (e.app[key].connection[newEasyrtcid]) {
                easyrtcidExists = true;
                break;
            }
        }
    } while (easyrtcidExists);

    return newEasyrtcid;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
            callback(null);
        },

        function(callback) {
            pub.util.logDebug(&#x22;Configuring Socket server&#x22;);

            pub.socketServer.sockets.on(&#x22;connection&#x22;, function (socket) {
var easyrtcid = pub.util.<span class="apidocCodeKeywordSpan">getAvailableEasyrtcid</span>();

pub.util.logDebug(&#x22;[&#x22;+easyrtcid+&#x22;][&#x22;+socket.id+&#x22;] Socket connected&#x22;);
pub.util.logDebug(&#x22;Emitting event &#x27;connection&#x27;&#x22;);
pub.events.emit(&#x22;connection&#x22;, socket, easyrtcid, function(err){
    if(err){
        socket.disconnect();
        pub.util.logError(&#x22;[&#x22;+easyrtcid+&#x22;] Connect error&#x22;, err);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.util.getErrorMsg" id="apidoc.element.easyrtc.util.getErrorMsg">
        function <span class="apidocSignatureSpan">easyrtc.util.</span>getErrorMsg
        <span class="apidocSignatureSpan">(errorCode)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getErrorMsg = function (errorCode) {
    var msg = {
        msgType: &#x22;error&#x22;,
        serverTime: Date.now(),
        msgData: {
            errorCode: errorCode,
            errorText: pub.util.getErrorText(errorCode)
        }
    };

    if (!msg.msgData.errorText) {
        msg.msgData.errorText = &#x22;Error occurred with error code: &#x22; + errorCode;
        pub.util.logWarning(&#x22;Emitted unknown error with error code [&#x22; + errorCode + &#x22;]&#x22;);
    }

    return msg;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    try{socket.disconnect();}catch(e){}
    return;
}

// Only accept authenticate message
if(!_.isObject(msg) || !_.isString(msg.msgType) || msg.msgType != &#x22;authenticate&#x22;) {
    pub.util.logWarning(&#x22;[&#x22;+easyrtcid+&#x22;] EasyRTC Auth message received without msgType of &#x27;authenticate&#x27
;. Disconnecting socket.&#x22;, msg);
    pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, pub.util.<span class="apidocCodeKeywordSpan">getErrorMsg</span>(&#
x22;LOGIN_BAD_AUTH&#x22;), appObj);
    try{socket.disconnect();}catch(e){}
    return;
}

// Check msg structure.
if(!_.isObject(msg.msgData)
    || !_.isString(msg.msgData.apiVersion)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.util.getErrorText" id="apidoc.element.easyrtc.util.getErrorText">
        function <span class="apidocSignatureSpan">easyrtc.util.</span>getErrorText
        <span class="apidocSignatureSpan">(errorCode)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getErrorText = function (errorCode) {
    switch (errorCode) {
        case &#x22;BANNED_IP_ADDR&#x22;:
            return &#x22;Client IP address is banned. Socket will be disconnected.&#x22;;
            break;
        case &#x22;LOGIN_APP_AUTH_FAIL&#x22;:
            return &#x22;Authentication for application failed. Socket will be disconnected.&#x22;;
            break;
        case &#x22;LOGIN_BAD_APP_NAME&#x22;:
            return &#x22;Provided application name is improper. Socket will be disconnected.&#x22;;
            break;
        case &#x22;LOGIN_BAD_AUTH&#x22;:
            return &#x22;Authentication for application failed. Socket will be disconnected.&#x22;;
            break;
        case &#x22;LOGIN_BAD_ROOM&#x22;:
            return &#x22;Requested room is invalid or does not exist. Socket will be disconnected.&#x22;;
            break;
        case &#x22;LOGIN_BAD_STRUCTURE&#x22;:
            return &#x22;Authentication for application failed. The provided structure is improper. Socket will be disconnected.&#x22;;
            break;
        case &#x22;LOGIN_BAD_USER_CFG&#x22;:
            return &#x22;Provided configuration options improper or invalid. Socket will be disconnected.&#x22;;
            break;
        case &#x22;LOGIN_GEN_FAIL&#x22;:
            return &#x22;Authentication failed. Socket will be disconnected.&#x22;;
            break;
        case &#x22;LOGIN_NO_SOCKETS&#x22;:
            return &#x22;No sockets available for account. Socket will be disconnected.&#x22;;
            break;
        case &#x22;LOGIN_TIMEOUT&#x22;:
            return &#x22;Login has timed out. Socket will be disconnected.&#x22;;
            break;
        case &#x22;MSG_REJECT_BAD_DATA&#x22;:
            return &#x22;Message rejected. The provided msgData is improper.&#x22;;
            break;
        case &#x22;MSG_REJECT_BAD_ROOM&#x22;:
            return &#x22;Message rejected. Requested room is invalid or does not exist.&#x22;;
            break;
        case &#x22;MSG_REJECT_BAD_FIELD&#x22;:
            return &#x22;Message rejected. Problem with field structure or name.&#x22;;
            break;
        case &#x22;MSG_REJECT_BAD_SIZE&#x22;:
            return &#x22;Message rejected. Packet size is too large.&#x22;;
            break;
        case &#x22;MSG_REJECT_BAD_STRUCTURE&#x22;:
            return &#x22;Message rejected. The provided structure is improper.&#x22;;
            break;
        case &#x22;MSG_REJECT_BAD_TYPE&#x22;:
            return &#x22;Message rejected. The provided msgType is unsupported.&#x22;;
            break;
        case &#x22;MSG_REJECT_GEN_FAIL&#x22;:
            return &#x22;Message rejected. General failure occurred.&#x22;;
            break;
        case &#x22;MSG_REJECT_NO_AUTH&#x22;:
            return &#x22;Message rejected. Not logged in or client not authorized.&#x22;;
            break;
        case &#x22;MSG_REJECT_NO_ROOM_LIST&#x22;:
            return &#x22;Message rejected. Room list unavailable.&#x22;;
            break;
        case &#x22;MSG_REJECT_PRESENCE&#x22;:
            return &#x22;Message rejected. Presence could could not be set.&#x22;;
            break;
        case &#x22;MSG_REJECT_TARGET_EASYRTCID&#x22;:
            return &#x22;Message rejected. Target easyrtcid is invalid, not using same application, or no longer online.&#x22;;
            break;
        case &#x22;MSG_REJECT_TARGET_GROUP&#x22;:
            return &#x22;Message rejected. Target group is invalid or not defined.&#x22;;
            break;
        case &#x22;MSG_REJECT_TARGET_ROOM&#x22;:
            return &#x22;Message rejected. Target room is invalid or not created.&#x22;;
            break;
        case &#x22;SERVER_SHUTDOWN&#x22;:
            return &#x22;Server is being shutdown. Socket will be disconnected.&#x22;;
            break;
        default:
            pub.util.logWarning(&#x22;Unknown message errorCode requested [&#x22; + errorCode + &#x22;]&#x22;);
            return null;
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 */
pub.util.getErrorMsg = function(errorCode) {
var msg = {
    msgType: &#x22;error&#x22;,
    serverTime: Date.now(),
    msgData: {
        errorCode: errorCode,
        errorText: pub.util.<span class="apidocCodeKeywordSpan">getErrorText</span>(errorCode)
    }
};

if (!msg.msgData.errorText) {
    msg.msgData.errorText = &#x22;Error occurred with error code: &#x22; + errorCode;
    pub.util.logWarning(&#x22;Emitted unknown error with error code [&#x22; + errorCode + &#x22;]&#x22;);
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.util.isError" id="apidoc.element.easyrtc.util.isError">
        function <span class="apidocSignatureSpan">easyrtc.util.</span>isError
        <span class="apidocSignatureSpan">(err)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isError = function (err) {
    if (err &#x26;&#x26; ((err instanceof eu.ConnectionError)||(err instanceof eu.ApplicationError)||(err instanceof eu.ServerError)||(err
 instanceof Error))) {
        return true;
    } else {
        return false;
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
        consoleText += currentDate.toISOString() + &#x22; - &#x22;;
    }
    consoleText += level;
    consoleText += &#x22; - &#x22; + &#x22;EasyRTC: &#x22; + logText;
}

if (logFields != undefined &#x26;&#x26; logFields != null) {
    if (pub.getOption(&#x22;logErrorStackEnable&#x22;) &#x26;&#x26; pub.util.<span class="apidocCodeKeywordSpan">isError</span>(
logFields)) {
        console.log(consoleText, ((pub.getOption(&#x22;logColorEnable&#x22;))? &#x22;\nStack Trace:\n------------\n&#x22;.bold +
logFields.stack.magenta + &#x22;\n------------&#x22;.bold : &#x22;\nStack Trace:\n------------\n&#x22; + logFields.stack + &#x22;\n------------&#x22;));
    }
    else if (pub.getOption(&#x22;logWarningStackEnable&#x22;) &#x26;&#x26; pub.util.isWarning(logFields)) {
        console.log(consoleText, ((pub.getOption(&#x22;logColorEnable&#x22;))? &#x22;\nStack Trace:\n------------\n&#x22;.bold +
logFields.stack.cyan + &#x22;\n------------&#x22;.bold : &#x22;\nStack Trace:\n------------\n&#x22; + logFields.stack + &#x22;\n------------&#x22;));
    }
    else {
        console.log(consoleText, util.inspect(logFields, {colors:pub.getOption(&#x22;logColorEnable&#x22;), showHidden:false, depth
:pub.getOption(&#x22;logObjectDepth&#x22;)}));
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.util.isValidIncomingMessage" id="apidoc.element.easyrtc.util.isValidIncomingMessage">
        function <span class="apidocSignatureSpan">easyrtc.util.</span>isValidIncomingMessage
        <span class="apidocSignatureSpan">(type, msg, appObj, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isValidIncomingMessage = function (type, msg, appObj, callback) {
    // A generic getOption variable which points to the getOption function at either the top or application level
    var getOption = (_.isObject(appObj) ? appObj.getOption : pub.getOption);

    // All messages follow the basic structure
    if (!_.isString(type)) {
        callback(null, false, &#x22;MSG_REJECT_BAD_TYPE&#x22;);
        return;
    }
    if (!_.isObject(msg)) {
        callback(null, false, &#x22;MSG_REJECT_BAD_STRUCTURE&#x22;);
        return;
    }
    if (!_.isString(msg.msgType)) {
        callback(null, false, &#x22;MSG_REJECT_BAD_TYPE&#x22;);
        return;
    }

    switch (type) {
        case &#x22;easyrtcAuth&#x22;:
            if (msg.msgType != &#x22;authenticate&#x22;) {
                callback(null, false, &#x22;MSG_REJECT_BAD_TYPE&#x22;);
                return;
            }
            if (!_.isObject(msg.msgData)) {
                callback(null, false, &#x22;MSG_REJECT_BAD_DATA&#x22;);
                return;
            }

            // msgData.apiVersion (required)
            if (msg.msgData.apiVersion === undefined || !_.isString(msg.msgData.apiVersion) || !getOption(&#x22;apiVersionRegExp&#x22;).test
(msg.msgData.apiVersion)) {
                callback(null, false, &#x22;MSG_REJECT_BAD_STRUCTURE&#x22;);
                return;
            }

            // msgData.appName
            if (msg.msgData.applicationName !== undefined &#x26;&#x26; (!_.isString(msg.msgData.applicationName) || !getOption(&#x22;appNameRegExp
&#x22;).test(msg.msgData.applicationName))) {
                callback(null, false, &#x22;MSG_REJECT_BAD_STRUCTURE&#x22;);
                return;
            }

            // msgData.easyrtcsid
            if (msg.msgData.easyrtcsid !== undefined &#x26;&#x26; (!_.isString(msg.msgData.easyrtcsid) || !getOption(&#x22;easyrtcsidRegExp&#x22;).test
(msg.msgData.easyrtcsid))) {
                callback(null, false, &#x22;MSG_REJECT_BAD_STRUCTURE&#x22;);
                return;
            }

            var isCallbackRun = false;
            async.waterfall([
                function(asyncCallback) {
                    if (!appObj) {
                        pub.app((msg.msgData.applicationName !== undefined ? msg.msgData.applicationName : getOption(&#x22;appDefaultName
&#x22;)), function(err, newAppObj) {
                            if (!err) {
                                appObj = newAppObj;
                                getOption = appObj.getOption;
                            }
                            asyncCallback(null);
                        });
                    }
                    else {
                        asyncCallback(null);
                    }
                },
                function(asyncCallback) {
                    // msgData.username
                    if (msg.msgData.username !== undefined &#x26;&#x26; (!_.isString(msg.msgData.username) || !getOption(&#x22;usernameRegExp&#x22;).
test(msg.msgData.username))) {
                        callback(null, false, &#x22;MSG_REJECT_BAD_STRUCTURE&#x22;);
                        isCallbackRun = true;
                        return;
                    }

                    // msgData.credential
                    if (msg.msgData.credential !== undefined &#x26;&#x26; (!_.isObject(msg.msgData.credential) || _.isEmpty(msg.msgData.credential
))) {
                        callback(null, false, &#x22;MSG_REJECT_BAD_STRUCTURE&#x22;);
                        isCallbackRun = true;
                        return;
                    }

                    // msgData.roomJoin
                    if (msg.msgData.roomJoin !== undefined) {
                        if (!_.isObject(msg.msgData.roomJoin)) {
                            callback(null, false, &#x22;MSG_REJECT_BAD_STRUCTURE&#x22;);
                            isCallbackRun = true;
                            return;
                        }

                        for (var currentRoomName in msg.msgData.roomJoin) {
                            if (!getOption(&#x22;roomNameRegExp&#x22;).test(currentRoomName) || !_.isObject(msg.msgData.roomJoin[currentRoomName
]) || !_.isString(msg.msgData.roomJoin[currentRoomName].roomName) || currentRoomName != ...</pre></li>
    <li>example usage<pre class="apidocCodePre">...
try{socket.disconnect();}catch(e){}
return;
    }

    async.waterfall([
function(asyncCallback) {
    // Check message structure
    pub.util.<span class="apidocCodeKeywordSpan">isValidIncomingMessage</span>(&#x22;easyrtcAuth&#x22;, msg, null, asyncCallback
);
},

function(isMsgValid, msgErrorCode, asyncCallback) {
    // If message structure is invalid, send error, disconnect socket, and write to log
    if (!isMsgValid) {
        try{
            pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, pub.util.getErrorMsg(msgErrorCode), appObj);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.util.isWarning" id="apidoc.element.easyrtc.util.isWarning">
        function <span class="apidocSignatureSpan">easyrtc.util.</span>isWarning
        <span class="apidocSignatureSpan">(err)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isWarning = function (err) {
    if (err &#x26;&#x26; ((err instanceof eu.ConnectionWarning)||(err instanceof eu.ApplicationWarning)||(err instanceof eu.ServerWarning))) {
        return true;
    } else {
        return false;
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    consoleText += &#x22; - &#x22; + &#x22;EasyRTC: &#x22; + logText;
}

if (logFields != undefined &#x26;&#x26; logFields != null) {
    if (pub.getOption(&#x22;logErrorStackEnable&#x22;) &#x26;&#x26; pub.util.isError(logFields)) {
        console.log(consoleText, ((pub.getOption(&#x22;logColorEnable&#x22;))? &#x22;\nStack Trace:\n------------\n&#x22;.bold +
logFields.stack.magenta + &#x22;\n------------&#x22;.bold : &#x22;\nStack Trace:\n------------\n&#x22; + logFields.stack + &#x22;\n------------&#x22;));
    }
    else if (pub.getOption(&#x22;logWarningStackEnable&#x22;) &#x26;&#x26; pub.util.<span class="apidocCodeKeywordSpan">isWarning
</span>(logFields)) {
        console.log(consoleText, ((pub.getOption(&#x22;logColorEnable&#x22;))? &#x22;\nStack Trace:\n------------\n&#x22;.bold +
logFields.stack.cyan + &#x22;\n------------&#x22;.bold : &#x22;\nStack Trace:\n------------\n&#x22; + logFields.stack + &#x22;\n------------&#x22;));
    }
    else {
        console.log(consoleText, util.inspect(logFields, {colors:pub.getOption(&#x22;logColorEnable&#x22;), showHidden:false, depth
:pub.getOption(&#x22;logObjectDepth&#x22;)}));
    }
} else {
    console.log(consoleText);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.util.log" id="apidoc.element.easyrtc.util.log">
        function <span class="apidocSignatureSpan">easyrtc.util.</span>log
        <span class="apidocSignatureSpan">(level, logText, logFields)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">log = function (level, logText, logFields) {
    switch (e.option.logLevel) {
        case &#x22;error&#x22;:
            if (level != &#x22;error&#x22;) {
                break;
            }

        case &#x22;warning&#x22;:
            if (level == &#x22;info&#x22;) {
                break;
            }

        case &#x22;info&#x22;:
            if (level == &#x22;debug&#x22;) {
                break;
            }

        case &#x22;debug&#x22;:
            pub.events.emit(&#x22;log&#x22;, level, logText, logFields);
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
//
// These options pre-define global variables that are exposed by
// popular JavaScript libraries and runtime environmentssuch as
// browser or node.js.

&#x22;browser&#x22;       : true,     // Standard browser globals e.g. `window`, `document`.
&#x22;couch&#x22;         : false,    // Enable globals exposed by CouchDB.
&#x22;devel&#x22;         : false,    // Allow development statements e.g. `console.<span class="apidocCodeKeywordSpan">log</span
>();`.
&#x22;dojo&#x22;          : false,    // Enable globals exposed by Dojo Toolkit.
&#x22;jquery&#x22;        : false,    // Enable globals exposed by jQuery JavaScript library.
&#x22;mootools&#x22;      : false,    // Enable globals exposed by MooTools JavaScript framework.
&#x22;node&#x22;          : false,    // Enable globals available when code is running inside of the NodeJS runtime environment.
&#x22;nonstandard&#x22;   : false,    // Define non-standard but widely adopted globals such as escape and unescape.
&#x22;prototypejs&#x22;   : false,    // Enable globals exposed by Prototype JavaScript framework.
&#x22;rhino&#x22;         : false,    // Enable globals available when your code is running inside of the Rhino runtime environment
.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.util.logDebug" id="apidoc.element.easyrtc.util.logDebug">
        function <span class="apidocSignatureSpan">easyrtc.util.</span>logDebug
        <span class="apidocSignatureSpan">(logText, logFields)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">logDebug = function (logText, logFields) {
    pub.util.log(&#x22;debug&#x22;, logText, logFields);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    var connectionObj = {};             // prepare variables to house the connection object

    // Initially upon a connection, we are only concerned with receiving an easyrtcAuth message
    socket.on(&#x22;easyrtcAuth&#x22;, function(msg, socketCallback) {

if (pub.getOption(&#x22;logMessagesEnable&#x22;)) {
    try {
        pub.util.<span class="apidocCodeKeywordSpan">logDebug</span>(&#x22;[&#x22;+easyrtcid+&#x22;] Incoming socket.io message: [&#
x22;+JSON.stringify(msg)+&#x22;]&#x22;);
    }
    catch(err) {
        pub.util.logDebug(&#x22;[&#x22;+easyrtcid+&#x22;] Incoming socket.io message&#x22;);
    }
}

pub.events.emit(&#x22;easyrtcAuth&#x22;, socket, easyrtcid, msg, socketCallback, function(err, newConnectionObj){
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.util.logError" id="apidoc.element.easyrtc.util.logError">
        function <span class="apidocSignatureSpan">easyrtc.util.</span>logError
        <span class="apidocSignatureSpan">(logText, logFields)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">logError = function (logText, logFields) {
    pub.util.log(&#x22;error&#x22;, logText, logFields);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
        catch(err) {
            pub.util.logDebug(&#x22;[&#x22;+easyrtcid+&#x22;] Incoming socket.io message&#x22;);
        }
    }

    pub.events.emit(&#x22;easyrtcAuth&#x22;, socket, easyrtcid, msg, socketCallback, function(err, newConnectionObj){
        if(err){
            pub.util.<span class="apidocCodeKeywordSpan">logError</span>(&#x22;[&#x22;+easyrtcid+&#x22;] Unhandled easyrtcCmd listener
 error.&#x22;, err);
            return;
        }

        connectionObj = newConnectionObj;
    });
});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.util.logInfo" id="apidoc.element.easyrtc.util.logInfo">
        function <span class="apidocSignatureSpan">easyrtc.util.</span>logInfo
        <span class="apidocSignatureSpan">(logText, logFields)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">logInfo = function (logText, logFields) {
    pub.util.log(&#x22;info&#x22;, logText, logFields);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

    // Authenticate is responsible for authenticating the connection
    pub.events.emit(&#x22;authenticate&#x22;, socket, easyrtcid, newAppName, username, credential, msg, function(err){
        if (err) {
            try{
                pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, pub.util.getErrorMsg(&#x22;LOGIN_BAD_AUTH&#x22;), appObj
);
                socket.disconnect();
                pub.util.<span class="apidocCodeKeywordSpan">logInfo</span>(&#x22;[&#x22;+newAppName+&#x22;][&#x22;+easyrtcid+&#
x22;] Authentication denied. Socket disconnected.&#x22;, err);
            }catch(e){}
        } else {
            asyncCallback(null);
        }
    });
},
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.util.logWarning" id="apidoc.element.easyrtc.util.logWarning">
        function <span class="apidocSignatureSpan">easyrtc.util.</span>logWarning
        <span class="apidocSignatureSpan">(logText, logFields)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">logWarning = function (logText, logFields) {
    pub.util.log(&#x22;warning&#x22;, logText, logFields);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

var appName;
var newAppName = (_.isObject(msg.msgData) &#x26;&#x26;_.isString(msg.msgData.applicationName)) ? msg.msgData.applicationName : pub
.getOption(&#x22;appDefaultName&#x22;);

// Ensure socketCallback is present
if(!_.isFunction(socketCallback)) {
    pub.util.<span class="apidocCodeKeywordSpan">logWarning</span>(&#x22;[&#x22;+easyrtcid+&#x22;] EasyRTC Auth message received
 with no callback. Disconnecting socket.&#x22;, msg);
    try{socket.disconnect();}catch(e){}
    return;
}

// Only accept authenticate message
if(!_.isObject(msg) || !_.isString(msg.msgType) || msg.msgType != &#x22;authenticate&#x22;) {
    pub.util.logWarning(&#x22;[&#x22;+easyrtcid+&#x22;] EasyRTC Auth message received without msgType of &#x27;authenticate&#x27
;. Disconnecting socket.&#x22;, msg);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.util.nextToNowhere" id="apidoc.element.easyrtc.util.nextToNowhere">
        function <span class="apidocSignatureSpan">easyrtc.util.</span>nextToNowhere
        <span class="apidocSignatureSpan">(err)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">nextToNowhere = function (err) {
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.util.sendSessionCookie" id="apidoc.element.easyrtc.util.sendSessionCookie">
        function <span class="apidocSignatureSpan">easyrtc.util.</span>sendSessionCookie
        <span class="apidocSignatureSpan">(req, res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">sendSessionCookie = function (req, res) {
    // If sessions or session cookies are disabled, return without an error.
    if (!pub.getOption(&#x22;sessionEnable&#x22;) || !pub.getOption(&#x22;sessionCookieEnable&#x22;)) {
        return;
    }
    if (req.sessionID &#x26;&#x26; (!req.cookies || !req.cookies[&#x22;easyrtcsid&#x22;] || req.cookies[&#x22;easyrtcsid&#x22;] != req.sessionID)) {
        try {
            pub.util.logDebug(&#x22;Sending easyrtcsid cookie [&#x22; + req.sessionID + &#x22;] to [&#x22; + req.ip + &#x22;] for request [&#x22; + req.url + &#x22;]&#x22;);
            res.cookie(&#x22;easyrtcsid&#x22;, req.sessionID, {maxAge: 2592000000, httpOnly: false});
        } catch (e) {
            pub.util.logWarning(&#x22;Problem setting easyrtcsid cookie [&#x22; + req.sessionID + &#x22;] to [&#x22; + req.ip + &#x22;] for request [&#x22; +
req.url + &#x22;]&#x22;);
        }
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    // Forward people who forget the trailing slash to the folder.
    pub.httpApp.get(pub.getOption(&#x22;demosPublicFolder&#x22;), function(req, res) {res.redirect(pub.getOption(&#x22;demosPublicFolder
&#x22;) + &#x22;/&#x22;);});
}

if (pub.getOption(&#x22;apiEnable&#x22;)) {
    // Set the EasyRTC API files
    pub.util.logDebug(&#x22;Setting up API files to be accessed from &#x27;&#x22; + pub.getOption(&#x22;apiPublicFolder&#x22;) + &#
x22;/&#x27;&#x22;);
    pub.httpApp.get(pub.getOption(&#x22;apiPublicFolder&#x22;) + &#x22;/easyrtc.js&#x22;,                  function(req, res) {pub
.util.<span class="apidocCodeKeywordSpan">sendSessionCookie</span>(req, res); (res.sendFile||res.sendfile).call(res,&#x22;api/easyrtc
.js&#x22;,                   {root:__dirname + &#x22;/../&#x22;});});
    pub.httpApp.get(pub.getOption(&#x22;apiPublicFolder&#x22;) + &#x22;/easyrtc_ft.js&#x22;,               function(req, res) {pub
.util.sendSessionCookie(req, res); (res.sendFile||res.sendfile).call(res,&#x22;api/easyrtc_ft.js&#x22;,                {root:__dirname
 + &#x22;/../&#x22;});});
    pub.httpApp.get(pub.getOption(&#x22;apiPublicFolder&#x22;) + &#x22;/easyrtc.css&#x22;,                 function(req, res) {pub
.util.sendSessionCookie(req, res); (res.sendFile||res.sendfile).call(res,&#x22;api/easyrtc.css&#x22;,                  {root:__dirname
 + &#x22;/../&#x22;});});
    pub.httpApp.get(pub.getOption(&#x22;apiPublicFolder&#x22;) + &#x22;/easyrtc.min.js&#x22;,              function(req, res) {pub
.util.sendSessionCookie(req, res); (res.sendFile||res.sendfile).call(res,&#x22;open_source/api/easyrtc.min.js&#x22;,   {root:__dirname
 + &#x22;/../&#x22;});});
    pub.httpApp.get(pub.getOption(&#x22;apiPublicFolder&#x22;) + &#x22;/easyrtc_ft.min.js&#x22;,           function(req, res) {pub
.util.sendSessionCookie(req, res); (res.sendFile||res.sendfile).call(res,&#x22;api/easyrtc_ft.min.js&#x22;,            {root:__dirname
 + &#x22;/../&#x22;});});
    pub.httpApp.get(pub.getOption(&#x22;apiPublicFolder&#x22;) + &#x22;/easyrtc.min.css&#x22;,             function(req, res) {pub
.util.sendSessionCookie(req, res); (res.sendFile||res.sendfile).call(res,&#x22;open_source/api/easyrtc.min.css&#x22;,  {root:__dirname
 + &#x22;/../&#x22;});});
    pub.httpApp.get(pub.getOption(&#x22;apiPublicFolder&#x22;) + &#x22;/img/*&#x22;, function(req, res) {
        pub.util.sendSessionCookie(req, res);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.util.sendSocketCallbackAck" id="apidoc.element.easyrtc.util.sendSocketCallbackAck">
        function <span class="apidocSignatureSpan">easyrtc.util.</span>sendSocketCallbackAck
        <span class="apidocSignatureSpan">(easyrtcid, socketCallback, appObj)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">sendSocketCallbackAck = function (easyrtcid, socketCallback, appObj) {
    return pub.util.sendSocketCallbackMsg(easyrtcid, socketCallback, {&#x22;msgType&#x22;:&#x22;ack&#x22;}, appObj);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
            asyncCallback(null);
        },
        function(asyncCallback) {
            // The msgType controls how each message is handled
            switch(msg.msgType) {
case &#x22;setUserCfg&#x22;:
    pub.util.logDebug(&#x22;[&#x22;+connectionObj.getAppName()+&#x22;][&#x22;+connectionObj.getEasyrtcid()+&#x22;] WebRTC setUserCfg
 command received. This feature is not yet complete.&#x22;);
    pub.util.<span class="apidocCodeKeywordSpan">sendSocketCallbackAck</span>(easyrtcid, socketCallback, appObj);
    next(null);
    break;

case &#x22;setPresence&#x22;:
    pub.events.emit(&#x22;msgTypeSetPresence&#x22;, connectionObj, msg.msgData.setPresence, socketCallback, next);
    break;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.util.sendSocketCallbackMsg" id="apidoc.element.easyrtc.util.sendSocketCallbackMsg">
        function <span class="apidocSignatureSpan">easyrtc.util.</span>sendSocketCallbackMsg
        <span class="apidocSignatureSpan">(easyrtcid, socketCallback, msg, appObj)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">sendSocketCallbackMsg = function (easyrtcid, socketCallback, msg, appObj) {
    var appName;

    if (appObj) {
        appName = appObj.getAppName();
        if (!appObj.isConnectedSync(easyrtcid)) {
            pub.util.logDebug(&#x22;[&#x22;+appName+&#x22;][&#x22;+easyrtcid+&#x22;] Unable to return socket message. Peer no longer connected.&#x22;);
            return false;
        }
    }

    if (!_.isFunction(socketCallback)) {
        pub.util.logWarning(&#x22;[&#x22;+appName+&#x22;][&#x22;+easyrtcid+&#x22;] Unable to return socket message. Provided socketCallback was not a function
.&#x22;);
        return false;
    }

    try {
        socketCallback(msg);
    } catch(err) {
        pub.util.logWarning(&#x22;[&#x22;+appName+&#x22;][&#x22;+easyrtcid+&#x22;] Unable to return socket message. Call to socketCallback failed.&#x22;);
    }

    if (e.option.logMessagesEnable) {
        try {
            pub.util.logDebug(&#x22;[&#x22;+appName+&#x22;][&#x22;+easyrtcid+&#x22;] Returning socket.io message: [&#x22;+JSON.stringify(msg)+&#x22;]&#x22;);
        }
        catch(err) {
            pub.util.logDebug(&#x22;[&#x22;+appName+&#x22;][&#x22;+easyrtcid+&#x22;] Returning socket.io message&#x22;);
        }
    }
    return true;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    try{socket.disconnect();}catch(e){}
    return;
}

// Only accept authenticate message
if(!_.isObject(msg) || !_.isString(msg.msgType) || msg.msgType != &#x22;authenticate&#x22;) {
    pub.util.logWarning(&#x22;[&#x22;+easyrtcid+&#x22;] EasyRTC Auth message received without msgType of &#x27;authenticate&#x27
;. Disconnecting socket.&#x22;, msg);
    pub.util.<span class="apidocCodeKeywordSpan">sendSocketCallbackMsg</span>(easyrtcid, socketCallback, pub.util.getErrorMsg(&#
x22;LOGIN_BAD_AUTH&#x22;), appObj);
    try{socket.disconnect();}catch(e){}
    return;
}

// Check msg structure.
if(!_.isObject(msg.msgData)
    || !_.isString(msg.msgData.apiVersion)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.util.updateCheck" id="apidoc.element.easyrtc.util.updateCheck">
        function <span class="apidocSignatureSpan">easyrtc.util.</span>updateCheck
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">updateCheck = function () {
    var easyrtcVersion = pub.getVersion();

    require(&#x22;http&#x22;).get(&#x22;http://easyrtc.com/version/?app=easyrtc&#x26;ver=&#x22; + easyrtcVersion + &#x22;&#x26;platform=&#x22; + process.platform + &#x22;&#x26;nodever
=&#x22; + process.version, function(res) {
        if (res.statusCode == 200)
            res.on(&#x27;data&#x27;, function(latestVersion) {
                latestVersion = (latestVersion + &#x22;&#x22;).replace(/[^0-9a-z.]/g, &#x22;&#x22;);
                if (latestVersion != easyrtcVersion) {
                    var l = latestVersion.replace(/[^0-9.]/g, &#x22;&#x22;).split(&#x22;.&#x22;, 3);
                    l[0] = parseInt(l[0]);
                    l[1] = parseInt(l[1]);
                    l[2] = parseInt(l[2]);
                    var v = easyrtcVersion.replace(/[^0-9.]/g, &#x22;&#x22;).split(&#x22;.&#x22;, 3);
                    v[0] = parseInt(v[0]);
                    v[1] = parseInt(v[1]);
                    v[2] = parseInt(v[2]);
                    if (v[0] &#x3c; l[0] || (v[0] == l[0] &#x26;&#x26; v[1] &#x3c; l[1]) || (v[0] == l[0] &#x26;&#x26; v[1] == l[1] &#x26;&#x26; v[2] &#x3c; l[2]))
                        pub.util.logWarning(&#x22;Update Check: New version of EasyRTC is available (&#x22; + latestVersion + &#x22;). Visit http
://easyrtc.com/ for details or run &#x27;npm update&#x27; to upgrade.&#x22;);
                    else if (v[0] == l[0] &#x26;&#x26; v[1] == l[1] &#x26;&#x26; v[2] == l[2] &#x26;&#x26; easyrtcVersion.replace(/[^a-z]/gi, &#x22;&#x22;) != &#x22;&#x22;)
                        pub.util.logWarning(&#x22;Update Check: New non-beta version of EasyRTC is available (&#x22; + latestVersion + &#x22;).
Visit http://easyrtc.com/ for details.&#x22;);
                }
            });
    }).on(&#x27;error&#x27;, function(e) {
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    function(callback) {
        pub.createApp(pub.getOption(&#x22;appDefaultName&#x22;), null, callback);
    },

    function(appObj, callback) {
        // Checks to see if there is a newer version of EasyRTC available
        if (pub.getOption(&#x22;updateCheckEnable&#x22;)) {
            pub.util.<span class="apidocCodeKeywordSpan">updateCheck</span>();
        }
        callback(null);
    }
],
// This function is called upon completion of the async waterfall, or upon an error being thrown.
function (err) {
    next(err);
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.easyrtc.util.ApplicationError" id="apidoc.module.easyrtc.util.ApplicationError">module easyrtc.util.ApplicationError</a></h1>


    <h2>
        <a href="#apidoc.element.easyrtc.util.ApplicationError.ApplicationError" id="apidoc.element.easyrtc.util.ApplicationError.ApplicationError">
        function <span class="apidocSignatureSpan">easyrtc.util.</span>ApplicationError
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">ApplicationError = function (msg) {
    eu.ApplicationError.super_.call(this, msg, this.constructor);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
// Set all options in options object. If any fail, an error will be sent to the callback.
async.each(Object.keys(options), function(currentOptionName, asyncCallback) {
    appObj.setOption(currentOptionName, options[currentOptionName]);
    asyncCallback(null);
},
        function(err) {
            if (err) {
                callback(new pub.util.<span class="apidocCodeKeywordSpan">ApplicationError</span>(&#x22;Could not set options when
 creating application: &#x27;&#x22; + appName + &#x22;&#x27;&#x22;, err));
                return;
            }
            // Set default application fields
            var appDefaultFieldObj = appObj.getOption(&#x22;appDefaultFieldObj&#x22;);
            if (_.isObject(appDefaultFieldObj)) {
                for (var currentFieldName in appDefaultFieldObj) {
                    appObj.setField(
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.util.ApplicationError.super_" id="apidoc.element.easyrtc.util.ApplicationError.super_">
        function <span class="apidocSignatureSpan">easyrtc.util.ApplicationError.</span>super_
        <span class="apidocSignatureSpan">(msg, constr)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">super_ = function (msg, constr){
    Error.captureStackTrace(this, constr || this);
    this.message = msg || &#x22;Error&#x22;;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.easyrtc.util.ApplicationWarning" id="apidoc.module.easyrtc.util.ApplicationWarning">module easyrtc.util.ApplicationWarning</a></h1>


    <h2>
        <a href="#apidoc.element.easyrtc.util.ApplicationWarning.ApplicationWarning" id="apidoc.element.easyrtc.util.ApplicationWarning.ApplicationWarning">
        function <span class="apidocSignatureSpan">easyrtc.util.</span>ApplicationWarning
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">ApplicationWarning = function (msg) {
    eu.ApplicationWarning.super_.call(this, msg, this.constructor);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
pub.createApp = function(appName, options, callback) {
if (!_.isFunction(callback)) {
    callback = function(err, appObj) {
    };
}
if (!appName || !pub.getOption(&#x22;appNameRegExp&#x22;).test(appName)) {
    pub.util.logWarning(&#x22;Can not create application with improper name: &#x27;&#x22; + appName + &#x22;&#x27;&#x22;);
    callback(new pub.util.<span class="apidocCodeKeywordSpan">ApplicationWarning</span>(&#x22;Can not create application with improper
 name: &#x27;&#x22; + appName + &#x22;&#x27;&#x22;));
    return;
}
if (e.app[appName]) {
    pub.util.logWarning(&#x22;Can not create application which already exists: &#x27;&#x22; + appName + &#x22;&#x27;&#x22;);
    callback(new pub.util.ApplicationWarning(&#x22;Can not create application which already exists: &#x27;&#x22; + appName + &#x22
;&#x27;&#x22;));
    return;
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.util.ApplicationWarning.super_" id="apidoc.element.easyrtc.util.ApplicationWarning.super_">
        function <span class="apidocSignatureSpan">easyrtc.util.ApplicationWarning.</span>super_
        <span class="apidocSignatureSpan">(msg, constr)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">super_ = function (msg, constr){
    Error.captureStackTrace(this, constr || this);
    this.message = msg || &#x22;Error&#x22;;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.easyrtc.util.ConnectionError" id="apidoc.module.easyrtc.util.ConnectionError">module easyrtc.util.ConnectionError</a></h1>


    <h2>
        <a href="#apidoc.element.easyrtc.util.ConnectionError.ConnectionError" id="apidoc.element.easyrtc.util.ConnectionError.ConnectionError">
        function <span class="apidocSignatureSpan">easyrtc.util.</span>ConnectionError
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">ConnectionError = function (msg) {
    eu.ConnectionError.super_.call(this, msg, this.constructor);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
The &#x22;authenticate&#x22; event is fired during the initial connection. The listener is provided with full details about the
connection, so it may decide whether to authenticate or disconnect them.

In this simplistic example, any clients connecting to the adminSite application will be denied unless they have a username of &#
x22;handsomeJack&#x22;. Any clients connecting to any other application will be let through.


var onAuthenticate = function(socket, easyrtcid, appName, username, credential, easyrtcAuthMessage, next){
  if (appName == &#x22;adminSite&#x22; &#x26;&#x26; username != &#x22;handsomeJack&#x22;){
    next(new easyrtc.util.<span class="apidocCodeKeywordSpan">ConnectionError</span>(&#x22;Failed our private auth.&#x22;));
  }
  else {
    next(null);
  }
};

easyrtc.events.on(&#x22;authenticate&#x22;, onAuthenticate);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.util.ConnectionError.super_" id="apidoc.element.easyrtc.util.ConnectionError.super_">
        function <span class="apidocSignatureSpan">easyrtc.util.ConnectionError.</span>super_
        <span class="apidocSignatureSpan">(msg, constr)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">super_ = function (msg, constr){
    Error.captureStackTrace(this, constr || this);
    this.message = msg || &#x22;Error&#x22;;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.easyrtc.util.ConnectionWarning" id="apidoc.module.easyrtc.util.ConnectionWarning">module easyrtc.util.ConnectionWarning</a></h1>


    <h2>
        <a href="#apidoc.element.easyrtc.util.ConnectionWarning.ConnectionWarning" id="apidoc.element.easyrtc.util.ConnectionWarning.ConnectionWarning">
        function <span class="apidocSignatureSpan">easyrtc.util.</span>ConnectionWarning
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">ConnectionWarning = function (msg) {
    eu.ConnectionWarning.super_.call(this, msg, this.constructor);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   for (var key in e.app) {
       if (e.app[key].connection[easyrtcid] &#x26;&#x26; e.app[key].connection[easyrtcid].isAuthenticated) {
           pub.app(key, callback);
           return;
       }
   }
   pub.util.logWarning(&#x22;Can not find connection [&#x22; + easyrtcid + &#x22;]&#x22;);
   callback(new pub.util.<span class="apidocCodeKeywordSpan">ConnectionWarning</span>(&#x22;Can not find connection [&#x22; + easyrtcid
 + &#x22;]&#x22;));
};


/**
* Sends the count of the number of connections to the server to a provided callback.
*
* @param       {function(?Error, Number)} callback Callback with error and array containing all easyrtcids.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.util.ConnectionWarning.super_" id="apidoc.element.easyrtc.util.ConnectionWarning.super_">
        function <span class="apidocSignatureSpan">easyrtc.util.ConnectionWarning.</span>super_
        <span class="apidocSignatureSpan">(msg, constr)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">super_ = function (msg, constr){
    Error.captureStackTrace(this, constr || this);
    this.message = msg || &#x22;Error&#x22;;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.easyrtc.util.ServerError" id="apidoc.module.easyrtc.util.ServerError">module easyrtc.util.ServerError</a></h1>


    <h2>
        <a href="#apidoc.element.easyrtc.util.ServerError.ServerError" id="apidoc.element.easyrtc.util.ServerError.ServerError">
        function <span class="apidocSignatureSpan">easyrtc.util.</span>ServerError
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">ServerError = function (msg) {
    eu.ServerError.super_.call(this, msg, this.constructor);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
*/
pub.events.setDefaultListeners = function() {
   pub.events._eventListener.removeAllListeners();
   for (var currentEventName in pub.events.defaultListeners) {
       if (_.isFunction(pub.events.defaultListeners[currentEventName])) {
           pub.events._eventListener.on(currentEventName, pub.events.defaultListeners[currentEventName]);
       } else {
           throw new pub.util.<span class="apidocCodeKeywordSpan">ServerError</span>(&#x22;Error setting default listener. No default
 for event &#x27;&#x22; + currentEventName + &#x22;&#x27; exists.&#x22;);
       }
   }
};


/**
* Map of EasyRTC event listener names to their default functions. This map can be used to run a default function manually.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.util.ServerError.super_" id="apidoc.element.easyrtc.util.ServerError.super_">
        function <span class="apidocSignatureSpan">easyrtc.util.ServerError.</span>super_
        <span class="apidocSignatureSpan">(msg, constr)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">super_ = function (msg, constr){
    Error.captureStackTrace(this, constr || this);
    this.message = msg || &#x22;Error&#x22;;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.easyrtc.util.ServerWarning" id="apidoc.module.easyrtc.util.ServerWarning">module easyrtc.util.ServerWarning</a></h1>


    <h2>
        <a href="#apidoc.element.easyrtc.util.ServerWarning.ServerWarning" id="apidoc.element.easyrtc.util.ServerWarning.ServerWarning">
        function <span class="apidocSignatureSpan">easyrtc.util.</span>ServerWarning
        <span class="apidocSignatureSpan">(msg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">ServerWarning = function (msg) {
    eu.ServerWarning.super_.call(this, msg, this.constructor);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.easyrtc.util.ServerWarning.super_" id="apidoc.element.easyrtc.util.ServerWarning.super_">
        function <span class="apidocSignatureSpan">easyrtc.util.ServerWarning.</span>super_
        <span class="apidocSignatureSpan">(msg, constr)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">super_ = function (msg, constr){
    Error.captureStackTrace(this, constr || this);
    this.message = msg || &#x22;Error&#x22;;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
